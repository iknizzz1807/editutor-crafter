title: "Component Diagram: SDK Auto-Instrumentation"
description: "Shows the application process with the SDK injected. Illustrate wrappers/middleware around HTTP Client, Database Driver, and Web Framework (Gin/Express), all reporting to a central Tracer which sends spans to the Collector."

classes: {
  container_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
  }
  component_style: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
    style.stroke-width: 1
  }
  tracer_style: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
    style.stroke-width: 2
  }
}

application_process: Application Process {
  class: container_style
  shape: rectangle

  user_code: "User Application Code" {
    class: component_style
  }

  sdk: SDK {
    class: container_style
    shape: rectangle

    tracer: Tracer {
      class: tracer_style
      label: "Tracer\n(Creates & Exports Spans)"
    }

    wrappers: Wrappers {
      class: container_style
      shape: rectangle
      label: "Auto-Instrumentation Wrappers"

      http_wrapper: "HTTP Client Wrapper" {
        class: component_style
      }

      db_wrapper: "Database Driver Wrapper" {
        class: component_style
      }

      web_wrapper: "Web Framework Middleware\n(Gin/Express)" {
        class: component_style
      }
    }
  }
}

collector: Collector {
  class: container_style
  shape: rectangle
}

# Connections from user code to wrappers (implicit instrumentation)
user_code -> http_wrapper: "HTTP calls"
user_code -> db_wrapper: "DB queries"
user_code -> web_wrapper: "Incoming requests"

# Wrappers report to tracer
http_wrapper -> tracer: "reports spans"
db_wrapper -> tracer: "reports spans"
web_wrapper -> tracer: "reports spans"

# Tracer sends to external collector
tracer -> collector: "exports spans"