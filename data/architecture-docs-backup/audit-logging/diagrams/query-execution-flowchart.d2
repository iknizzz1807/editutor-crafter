direction: down
title: Query Execution Flowchart

query_start: Start {
  shape: circle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

parse_filters: Parse Query Filters {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

identify_segments: Identify Relevant Segments {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

segment_loop: For Each Segment {
  style.fill: "#1a1a2e"
  style.stroke: "#ffa500"
  style.font-color: "#e6edf3"
  style.stroke-width: 3
}

check_index: Check Segment Index {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

read_events: Read & Filter Events {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

more_segments: More Segments? {
  shape: diamond
  style.fill: "#1a1a2e"
  style.stroke: "#ffa500"
  style.font-color: "#e6edf3"
}

merge_results: Merge Results {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

apply_pagination: Apply Pagination {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

stream_or_export: Stream to Client or Export File {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

query_end: End {
  shape: circle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

segment_container: {
  segment_loop
  check_index
  read_events
  
  segment_loop -> check_index: "Process"
  check_index -> read_events: "Index lookup"
  read_events -> more_segments
}

query_start -> parse_filters
parse_filters -> identify_segments: "Determine time range"
identify_segments -> segment_loop: "List segments"
more_segments -> check_index: "Yes"
more_segments -> merge_results: "No"
merge_results -> apply_pagination
apply_pagination -> stream_or_export
stream_or_export -> query_end