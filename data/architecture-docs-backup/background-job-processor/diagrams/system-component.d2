title: System Component Overview
description: Shows all major components: Producer, Queue Manager, Workers, Scheduler, Monitor, Redis, and their interaction arrows. Include data flow directions.
direction: right

classes: {
  component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  data_store: {
    shape: cylinder
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  queue: {
    shape: queue
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

external: External Systems {
  shape: rectangle
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
  style.stroke-dash: 3

  producer: Producer {
    class: component
    label: "Producer\n(Web Server/API)"
  }
}

core: Core Processing System {
  shape: rectangle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true

  queue_manager: Queue Manager {
    class: component
    label: "Queue Manager\n(Job Broker)"
  }

  scheduler: Scheduler {
    class: component
    label: "Scheduler\n(Delayed/Retry Jobs)"
  }

  worker_pool: Worker Pool {
    shape: rectangle
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"

    worker1: Worker 1 { class: component }
    worker2: Worker 2 { class: component }
    worker3: Worker N { class: component }
  }
}

monitoring: Monitoring System {
  shape: rectangle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  monitor: Monitor {
    class: component
    label: "Monitor\n(Dashboard/Alerts)"
  }
}

storage: Data Storage {
  shape: rectangle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  redis: Redis {
    class: data_store
    label: "Redis\n(Job Storage + Pub/Sub)"
  }
}

# Data flow interactions
producer -> queue_manager: "enqueue(job)"
producer -> monitor: "job.created"

queue_manager -> redis: "store/retrieve"
queue_manager -> worker_pool: "dispatch"
queue_manager -> scheduler: "schedule(delayed_job)"
queue_manager -> monitor: "job.queued"

worker_pool -> queue_manager: "fetch/ack/requeue"
worker_pool -> redis: "heartbeat/state"
worker_pool -> monitor: "job.started\njob.completed\njob.failed"

scheduler -> queue_manager: "enqueue(scheduled_job)"
scheduler -> redis: "scan scheduled jobs"
scheduler -> monitor: "schedule.event"

monitor -> redis: "metrics/state query"
monitor -> worker_pool: "pause/resume/retry"
monitor -> queue_manager: "queue.stats"

# Internal worker connections
worker1 -> worker2: "horizontal scaling"
worker2 -> worker3: "horizontal scaling"

# Notes
note: |md
  ## Data Flow Summary
  1. **Producer** submits jobs to **Queue Manager**
  2. **Queue Manager** stores jobs in **Redis**, dispatches to **Workers**
  3. **Workers** process jobs, report status to **Monitor**
  4. **Scheduler** handles delayed/retry jobs via **Queue Manager**
  5. **Monitor** observes all components, provides dashboard
| {
  shape: page
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  near: top-left
}