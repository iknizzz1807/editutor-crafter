label: Authentication Sequence Diagram
shape: sequence_diagram

browser: Browser
api_server: "API Server"
database: Database {
  shape: cylinder
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

browser -> api_server: 1. POST /login (username, password)
api_server -> database: 2. SELECT * FROM users WHERE username = ?
database -> api_server: 3. Returns user record with password_hash
api_server -> api_server: 4. Validate credentials (compare bcrypt hash)
api_server -> api_server: 5. Generate JWT with user_id claim
api_server -> browser: 6. HTTP 200 with Set-Cookie: jwt=token; HttpOnly; Secure