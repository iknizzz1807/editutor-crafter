title: System Component Diagram {
  style.font-size: 20
  style.font-color: "#e6edf3"
}

browser_engine: Browser Engine {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.stroke-width: 2
  style.font-color: "#e6edf3"

  html_parser: HTML Parser {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    
    responsibilities: |md
      **Responsibilities:**
      • Parse HTML markup
      • Build DOM tree
      • Handle malformed input
    | {
      shape: page
      style.fill: "#0f3460"
      style.font-color: "#e6edf3"
    }
  }

  css_parser: CSS Parser {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    
    responsibilities: |md
      **Responsibilities:**
      • Parse CSS rules
      • Build stylesheet
      • Handle selectors
    | {
      shape: page
      style.fill: "#0f3460"
      style.font-color: "#e6edf3"
    }
  }

  layout_engine: Layout Engine {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    
    responsibilities: |md
      **Responsibilities:**
      • Compute element positions
      • Calculate box model
      • Build layout tree
    | {
      shape: page
      style.fill: "#0f3460"
      style.font-color: "#e6edf3"
    }
  }

  render_engine: Render Engine {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    
    responsibilities: |md
      **Responsibilities:**
      • Generate visual output
      • Paint pixels
      • Handle graphics commands
    | {
      shape: page
      style.fill: "#0f3460"
      style.font-color: "#e6edf3"
    }
  }
}

# External inputs
html_input: HTML Markup {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

css_input: CSS Styles {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

# External output
visual_output: Visual Output {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

# Data structures
dom_tree: DOM Tree {
  shape: cylinder
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

stylesheet: Stylesheet {
  shape: cylinder
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

layout_tree: Layout Tree {
  shape: cylinder
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

# Input connections
html_input -> browser_engine.html_parser: raw HTML {
  style.stroke: "#8b949e"
}
css_input -> browser_engine.css_parser: raw CSS {
  style.stroke: "#8b949e"
}

# Internal pipeline flow
browser_engine.html_parser -> dom_tree: produces {
  style.stroke: "#3fb950"
}
browser_engine.css_parser -> stylesheet: produces {
  style.stroke: "#3fb950"
}

dom_tree -> browser_engine.layout_engine: DOM nodes {
  style.stroke: "#8b949e"
}
stylesheet -> browser_engine.layout_engine: style rules {
  style.stroke: "#8b949e"
}

browser_engine.layout_engine -> layout_tree: produces {
  style.stroke: "#3fb950"
}

layout_tree -> browser_engine.render_engine: positioned elements {
  style.stroke: "#8b949e"
}

# Final output
browser_engine.render_engine -> visual_output: renders {
  style.stroke: "#3fb950"
}