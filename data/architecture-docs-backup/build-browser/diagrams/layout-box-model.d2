title: CSS Box Model Calculation Flow {
  style.font-size: 20
  style.bold: true
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
}

start: Start {
  shape: circle
  style.fill: "#3fb950"
  style.font-color: "#1a1a2e"
  style.bold: true
}

parse_element: Parse Element Properties {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

width_calc: Width Calculation {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  check_width: Check width property {
    shape: diamond
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  auto_width: Calculate auto width\n(available space - margins - borders - padding) {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  fixed_width: Use specified width\n(resolve percentages) {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

margin_calc: Margin Calculation {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  check_margin: Check margin values {
    shape: diamond
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  auto_margin: Calculate auto margins\n(center or zero) {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  fixed_margin: Use specified margins\n(resolve percentages) {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

padding_border: Padding & Border Calculation {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

dimensions: Calculate Final Dimensions {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  content_box: content_width = width\ncontent_height = height {
    style.fill: "#1a1a2e"
    style.font-color: "#e6edf3"
  }
  
  total_box: total_width = content + padding + border + margin\ntotal_height = content + padding + border + margin {
    style.fill: "#1a1a2e"
    style.font-color: "#e6edf3"
  }
}

position: Calculate Position {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

layout_node: Create Layout Node {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

start -> parse_element
parse_element -> width_calc.check_width
width_calc.check_width -> width_calc.auto_width: auto
width_calc.check_width -> width_calc.fixed_width: specified
width_calc.auto_width -> margin_calc.check_margin
width_calc.fixed_width -> margin_calc.check_margin
margin_calc.check_margin -> margin_calc.auto_margin: auto
margin_calc.check_margin -> margin_calc.fixed_margin: specified
margin_calc.auto_margin -> padding_border
margin_calc.fixed_margin -> padding_border
padding_border -> dimensions.content_box
dimensions.content_box -> dimensions.total_box
dimensions.total_box -> position
position -> layout_node

start -> width_calc: {style.stroke: "#8b949e"}
width_calc -> margin_calc: {style.stroke: "#8b949e"}
margin_calc -> padding_border: {style.stroke: "#8b949e"}
padding_border -> dimensions: {style.stroke: "#8b949e"}
dimensions -> position: {style.stroke: "#8b949e"}
position -> layout_node: {style.stroke: "#8b949e"}