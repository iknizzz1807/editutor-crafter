title: Data Model Relationship Diagram
description: A class diagram showing core entities: PipelineConfig, PipelineRun, JobRun, StepRun. Show composition relationships and fields.

# Define a class style for consistency
classes: {
  entity: {
    shape: class
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.border-radius: 4
  }
  composition_arrow: {
    style.stroke: "#8b949e"
    style.stroke-width: 2
  }
}

# Core Entities
PipelineConfig: {
  class: entity
  label: "PipelineConfig"
  - "id: string"
  - "name: string"
  - "config_yaml: string"
  - "created_at: timestamp"
  - "updated_at: timestamp"
  + "validate(): boolean"
}

PipelineRun: {
  class: entity
  label: "PipelineRun"
  - "id: string"
  - "pipeline_config_id: string"
  - "status: string"
  - "triggered_by: string"
  - "commit_hash: string"
  - "branch: string"
  - "started_at: timestamp"
  - "finished_at: timestamp"
  + "cancel(): void"
  + "get_duration(): interval"
}

JobRun: {
  class: entity
  label: "JobRun"
  - "id: string"
  - "pipeline_run_id: string"
  - "job_name: string"
  - "stage: string"
  - "status: string"
  - "docker_image: string"
  - "started_at: timestamp"
  - "finished_at: timestamp"
  - "exit_code: integer"
  - "log_path: string"
  + "is_completed(): boolean"
}

StepRun: {
  class: entity
  class: entity
  label: "StepRun"
  - "id: string"
  - "job_run_id: string"
  - "step_name: string"
  - "status: string"
  - "command: string"
  - "started_at: timestamp"
  - "finished_at: timestamp"
  - "output: string"
  + "get_status(): string"
}

# Relationships with composition
PipelineConfig -> PipelineRun: "1..*" {
  class: composition_arrow
  label: "configures"
}

PipelineRun -> JobRun: "1..*" {
  class: composition_arrow
  label: "has many"
  style.stroke-dash: 0
}

JobRun -> StepRun: "1..*" {
  class: composition_arrow
  label: "has many"
  style.stroke-dash: 0
}