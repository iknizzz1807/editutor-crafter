direction: down

# Core Data Structures
title: Core Data Structures {
  near: top-center
  style.font-size: 24
  style.bold: true
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
}

# Main classes
DebuggedProcess: {
  shape: class
  pid: int
  state: ProcessState
  registers: RegisterSet
  memory_layout: MemoryMap
  breakpoints: Map<Address, Breakpoint>
  symbol_table: SymbolTable
  
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

ProcessState: {
  shape: class
  status: enum
  exit_code: int
  signal: int
  execution_point: Address
  
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Breakpoint: {
  shape: class
  address: Address
  original_instruction: byte
  enabled: bool
  hit_count: int
  condition: string
  temporary: bool
  
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

SymbolTable: {
  shape: class
  symbols: Map<string, Symbol>
  address_map: Map<Address, Symbol>
  source_files: Map<string, SourceFile>
  
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Symbol: {
  shape: class
  name: string
  address: Address
  size: int
  type: SymbolType
  source_location: SourceLocation
  scope: Scope
  
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Variable: {
  shape: class
  name: string
  type: DataType
  address: Address
  value: VariableValue
  scope: Scope
  is_parameter: bool
  
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

RegisterSet: {
  shape: class
  general_purpose: Map<string, uint64>
  instruction_pointer: uint64
  stack_pointer: uint64
  flags: uint64
  
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

MemoryMap: {
  shape: class
  segments: List<MemorySegment>
  heap_start: Address
  stack_start: Address
  
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

# Relationships
DebuggedProcess -> ProcessState: contains {
  style.stroke: "#8b949e"
}

DebuggedProcess -> RegisterSet: has {
  style.stroke: "#8b949e"
}

DebuggedProcess -> MemoryMap: manages {
  style.stroke: "#8b949e"
}

DebuggedProcess -> Breakpoint: maintains {
  style.stroke: "#8b949e"
  label: "1..*"
}

DebuggedProcess -> SymbolTable: uses {
  style.stroke: "#8b949e"
}

SymbolTable -> Symbol: contains {
  style.stroke: "#8b949e"
  label: "1..*"
}

Symbol -> Variable: defines {
  style.stroke: "#8b949e"
  label: "0..*"
}

Breakpoint -> Symbol: references {
  style.stroke: "#8b949e"
  style.stroke-dash: 5
}

Variable <-> Symbol: linked_to {
  style.stroke: "#3fb950"
  style.stroke-dash: 3
}