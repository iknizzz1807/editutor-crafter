title: System Architecture Overview {
  style.font-size: 20
  style.bold: true
}

# External interfaces
ptrace_api: ptrace API {
  shape: cloud
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

elf_files: ELF Files {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

user_commands: User Commands {
  shape: parallelogram
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

# Main debugger system
debugger: Debugger System {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  process_controller: Process Controller {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }

  breakpoint_manager: Breakpoint Manager {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }

  symbol_resolver: Symbol Resolver {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }

  variable_inspector: Variable Inspector {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }

  # Internal relationships
  process_controller -> breakpoint_manager: process events
  breakpoint_manager -> process_controller: continue/stop
  symbol_resolver -> breakpoint_manager: address resolution
  process_controller -> variable_inspector: memory access
  symbol_resolver -> variable_inspector: type information
}

# External connections
user_commands -> debugger.process_controller: attach/detach
user_commands -> debugger.breakpoint_manager: set/remove breakpoints
user_commands -> debugger.variable_inspector: print variables

debugger.process_controller -> ptrace_api: control target process
ptrace_api -> debugger.process_controller: process state

debugger.symbol_resolver -> elf_files: read debug symbols
elf_files -> debugger.symbol_resolver: symbol tables

# Connection styling
*.style.stroke: "#8b949e"