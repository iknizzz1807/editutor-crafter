direction: right
shape: sequence_diagram

style: {
  fill: "#1a1a2e"
  stroke: "#3fb950"
  font-color: "#e6edf3"
}

Developer: {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

VariableInspector: {
  label: "Variable Inspector"
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

SymbolResolver: {
  label: "Symbol Resolver"
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

ProcessController: {
  label: "Process Controller"
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Developer -> VariableInspector: "inspect variable count"
VariableInspector -> SymbolResolver: "resolve symbol count"
SymbolResolver -> SymbolResolver: "parse DWARF debug info"
SymbolResolver -> VariableInspector: "return location & type info"
VariableInspector -> ProcessController: "read memory at address"
ProcessController -> ProcessController: "ptrace PEEKDATA"
ProcessController -> VariableInspector: "return raw bytes"
VariableInspector -> VariableInspector: "interpret bytes using type info"
VariableInspector -> Developer: "display formatted value"

Developer -> VariableInspector: "inspect struct user.name"
VariableInspector -> SymbolResolver: "resolve user symbol"
SymbolResolver -> SymbolResolver: "lookup struct layout"
SymbolResolver -> VariableInspector: "base address + field offset"
VariableInspector -> ProcessController: "read memory range"
ProcessController -> ProcessController: "ptrace multiple reads"
ProcessController -> VariableInspector: "return struct bytes"
VariableInspector -> VariableInspector: "extract field from offset"
VariableInspector -> Developer: "display string value"

Developer -> VariableInspector: "inspect array items[5]"
VariableInspector -> SymbolResolver: "resolve array items"
SymbolResolver -> VariableInspector: "element size & base address"
VariableInspector -> VariableInspector: "calculate offset"
VariableInspector -> ProcessController: "read at calculated address"
ProcessController -> VariableInspector: "return element bytes"
VariableInspector -> Developer: "display array element value"