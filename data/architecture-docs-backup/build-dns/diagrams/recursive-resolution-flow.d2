title: Recursive Resolution Sequence
shape: sequence_diagram

style: {
  fill: "#1a1a2e"
  stroke: "#3fb950"
  font-color: "#e6edf3"
}

client: Client {
  style.stroke: "#3fb950"
  style.bold: true
}

resolver: Recursive Resolver {
  style.stroke: "#3fb950"
  style.bold: true
}

cache: Cache {
  style.fill: "#16213e"
}

root: Root Server {
  style.fill: "#16213e"
}

tld: TLD Server {
  style.fill: "#16213e"
}

auth: Authoritative Server {
  style.fill: "#16213e"
}

client -> resolver: Query example.com A
resolver -> cache: Check cache
cache -> resolver: Cache miss
resolver -> root: Query example.com A
root -> resolver: NS referral (.com servers)
resolver -> tld: Query example.com A
tld -> resolver: NS referral (example.com NS)
resolver -> auth: Query example.com A
auth -> resolver: A record response
resolver -> cache: Store result
resolver -> client: Return A record