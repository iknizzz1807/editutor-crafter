direction: right

title: Git System Architecture {
  near: top-center
  style.font-size: 20
  style.bold: true
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
}

working_dir: Working Directory {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  files: Modified Files {
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
  
  untracked: Untracked Files {
    style.fill: "#16213e" 
    style.font-color: "#e6edf3"
  }
}

staging: Index/Staging Area {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950" 
  style.font-color: "#e6edf3"
  
  staged_files: Staged Changes {
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
}

object_store: Object Store {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.bold: true
  style.font-color: "#e6edf3"
  
  blobs: Blob Objects {
    shape: cylinder
    style.fill: "#0f3460"
    style.font-color: "#e6edf3"
  }
  
  trees: Tree Objects {
    shape: cylinder
    style.fill: "#0f3460"
    style.font-color: "#e6edf3"
  }
  
  commits: Commit Objects {
    shape: cylinder
    style.fill: "#0f3460"
    style.font-color: "#e6edf3"
  }
}

refs: References {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  head: HEAD {
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
  
  branches: Branches {
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
  
  tags: Tags {
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
}

# Data flow arrows
working_dir -> staging: git add {
  style.stroke: "#8b949e"
  style.font-color: "#8b949e"
}

staging -> object_store: git commit {
  style.stroke: "#8b949e"
  style.font-color: "#8b949e"
}

object_store -> refs: update refs {
  style.stroke: "#8b949e"
  style.font-color: "#8b949e"
}

refs -> working_dir: git checkout {
  style.stroke: "#8b949e"
  style.font-color: "#8b949e"
}

object_store -> working_dir: restore files {
  style.stroke: "#8b949e"
  style.font-color: "#8b949e"
}

staging <-> object_store: hash objects {
  style.stroke: "#8b949e"
  style.font-color: "#8b949e"
}

# Internal object relationships
object_store.commits -> object_store.trees: points to {
  style.stroke: "#3fb950"
  style.font-color: "#3fb950"
}

object_store.trees -> object_store.blobs: contains {
  style.stroke: "#3fb950" 
  style.font-color: "#3fb950"
}