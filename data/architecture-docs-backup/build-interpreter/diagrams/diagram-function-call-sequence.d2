shape: sequence_diagram

interpreter: Interpreter
lox_function: LoxFunction
environments: Environments

note: Function Call and Return Flow {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

interpreter -> lox_function: call()
note(lox_function): LoxFunction receives call from interpreter
lox_function -> environments: create new Environment
environments -> lox_function: new environment ready
note(environments): New environment encloses function's closure
lox_function -> environments: execute body statements
environments -> lox_function: throw Return(value)
note(environments): Return exception contains value
lox_function -> interpreter: catch Return, return value
note(interpreter): Interpreter receives return value

interpreter.style.fill: "#1a1a2e"
interpreter.style.stroke: "#3fb950"
interpreter.style.font-color: "#e6edf3"

lox_function.style.fill: "#1a1a2e"
lox_function.style.stroke: "#3fb950"
lox_function.style.font-color: "#e6edf3"

environments.style.fill: "#1a1a2e"
environments.style.stroke: "#3fb950"
environments.style.font-color: "#e6edf3"