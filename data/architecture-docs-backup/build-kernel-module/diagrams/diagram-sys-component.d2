Title: System Component Diagram

classes: {
  kernel_zone: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  userspace_zone: {
    style.fill: "#1a1a2e"
    style.stroke: "#e6edf3"
    style.font-color: "#e6edf3"
  }
  component: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  external: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.double-border: true
    style.font-color: "#e6edf3"
    style.bold: true
  }
  interface: {
    style.stroke: "#3fb950"
    style.stroke-dash: 3
  }
}

userspace: Userspace Applications {
  class: userspace_zone
  
  processes: "Userspace Processes" {
    class: component
  }
}

kernel: Linux Kernel {
  class: kernel_zone
  
  vfs: Virtual File System (VFS) {
    class: external
  }
  
  proc_fs: "Proc Filesystem (Proc FS)" {
    class: external
  }
  
  driver: Character Device Driver {
    class: component
    
    lifecycle: "Module Lifecycle" {
      class: component
    }
    
    core: "Char Device Core" {
      class: component
      label: "Char Device Core\n(major/minor, file_ops)"
    }
    
    buffer: Buffer {
      class: component
      label: "Buffer\n(Shared Memory Region)"
    }
    
    sync: "Sync Manager" {
      class: component
      label: "Sync Manager\n(Mutex, Wait Queues)"
    }
    
    proc_interface: "Proc Interface" {
      class: component
      label: "Proc Interface\n(/proc/chardev)"
    }
  }
}

# System call interface boundary
userspace.processes -> kernel.vfs: "System Calls\n(open, read, write, ioctl, close)" {
  class: interface
  style.stroke-dash: 3
}

# VFS routes calls to driver
kernel.vfs -> driver.core: "Routes to\nfile_operations" {
  class: interface
}

# Driver component relationships
driver.lifecycle -> driver.core: "Registers/Unregisters"
driver.core -> driver.buffer: "Reads/Writes Data"
driver.core -> driver.sync: "Acquires/Releases Locks"
driver.sync -> driver.buffer: "Protects Access"
driver.core -> driver.proc_interface: "Provides Stats"

# Proc filesystem integration
driver.proc_interface -> kernel.proc_fs: "Creates\n/proc/chardev Entry"
kernel.proc_fs <- userspace.processes: "Read/Write\n/proc files" {
  class: interface
  style.stroke-dash: 3
}