title: Section Merging Layout Diagram
description: Visual representation of how sections from different object files are concatenated with alignment padding. Show .text, .data, .rodata sections from multiple files merging into output sections with padding between.

classes: {
  object_file: {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  output_section: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.stroke-width: 2
    style.font-color: "#e6edf3"
  }
  text_section: {
    style.fill: "#1e3a8a"
    style.stroke: "#60a5fa"
  }
  data_section: {
    style.fill: "#7c2d12"
    style.stroke: "#f97316"
  }
  rodata_section: {
    style.fill: "#064e3b"
    style.stroke: "#10b981"
  }
  padding: {
    style.fill: "#374151"
    style.stroke: "#6b7280"
    style.stroke-dash: 2
    label: "Alignment\nPadding"
  }
}

object_files: {
  shape: rectangle
  direction: right
  spacing: 48

  file1: "file1.o" {
    class: object_file
    direction: down

    file1_text: ".text" {
      class: text_section
    }
    file1_data: ".data" {
      class: data_section
    }
    file1_rodata: ".rodata" {
      class: rodata_section
    }
  }

  file2: "file2.o" {
    class: object_file
    direction: down

    file2_text: ".text" {
      class: text_section
    }
    file2_data: ".data" {
      class: data_section
    }
    file2_rodata: ".rodata" {
      class: rodata_section
    }
  }

  file3: "file3.o" {
    class: object_file
    direction: down

    file3_text: ".text" {
      class: text_section
    }
    file3_data: ".data" {
      class: data_section
    }
    file3_rodata: ".rodata" {
      class: rodata_section
    }
  }
}

executable_sections: {
  shape: rectangle
  direction: down
  spacing: 32
  near: bottom-right

  output_text: "Output .text Section" {
    class: output_section
    direction: right
    spacing: 4

    merged_text1: ".text from file1.o" {
      class: text_section
    }
    padding1: {
      class: padding
      width: 16
      height: 40
    }
    merged_text2: ".text from file2.o" {
      class: text_section
    }
    padding2: {
      class: padding
      width: 16
      height: 40
    }
    merged_text3: ".text from file3.o" {
      class: text_section
    }
  }

  output_data: "Output .data Section" {
    class: output_section
    direction: right
    spacing: 4

    merged_data1: ".data from file1.o" {
      class: data_section
    }
    padding3: {
      class: padding
      width: 24
      height: 40
    }
    merged_data2: ".data from file2.o" {
      class: data_section
    }
    padding4: {
      class: padding
      width: 24
      height: 40
    }
    merged_data3: ".data from file3.o" {
      class: data_section
    }
  }

  output_rodata: "Output .rodata Section" {
    class: output_section
    direction: right
    spacing: 4

    merged_rodata1: ".rodata from file1.o" {
      class: rodata_section
    }
    padding5: {
      class: padding
      width: 8
      height: 40
    }
    merged_rodata2: ".rodata from file2.o" {
      class: rodata_section
    }
    padding6: {
      class: padding
      width: 8
      height: 40
    }
    merged_rodata3: ".rodata from file3.o" {
      class: rodata_section
    }
  }
}

linker_process: "Linker Section Concatenation" {
  shape: rectangle
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.stroke-width: 3
  style.font-color: "#e6edf3"
  style.bold: true
  width: 120
  height: 60
}

object_files -> linker_process: "Input"
linker_process -> executable_sections: "Output"

note: |md
  ## Section Merging Process
  1. Linker collects all sections of same type from object files
  2. Sections are concatenated in command-line order
  3. Alignment padding inserted between sections
  4. Each output section gets proper memory alignment
| {
  shape: page
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
  near: top-right
}