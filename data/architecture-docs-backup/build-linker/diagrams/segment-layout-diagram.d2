title: Executable Segment Layout
description: Shows the final executable memory layout with PT_LOAD segments: text segment (RX) containing .text and .rodata, data segment (RW) containing .data and .bss, with page alignment boundaries.

classes: {
  segment_style: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  section_style: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  boundary_style: {
    style.stroke: "#ff7b72"
    style.stroke-dash: 3
    style.font-color: "#ff7b72"
    style.font-size: 11
  }
  memory_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
  }
}

executable_memory: Executable Memory Layout {
  class: memory_style
  shape: rectangle

  text_segment: Text Segment (PT_LOAD - RX) {
    class: segment_style
    shape: rectangle
    style.double-border: true

    text_section: {
      class: section_style
      shape: rectangle
      label: |md
        **.text**
        Code instructions
        Read-Execute (RX)
      |
    }

    rodata_section: {
      class: section_style
      shape: rectangle
      label: |md
        **.rodata**
        Read-only data
        Read-Execute (RX)
      |
    }

    text_section -> rodata_section: "Contiguous" {
      style.stroke: "#8b949e"
      style.stroke-width: 1
    }
  }

  page_boundary: "Page Alignment Boundary" {
    class: boundary_style
    shape: rectangle
    height: 1
    width: 600
    label: "Page Alignment (typically 4KB or 2MB)"
    style.stroke-dash: 5
  }

  data_segment: Data Segment (PT_LOAD - RW) {
    class: segment_style
    shape: rectangle
    style.double-border: true

    data_section: {
      class: section_style
      shape: rectangle
      label: |md
        **.data**
        Initialized global variables
        Read-Write (RW)
      |
    }

    bss_section: {
      class: section_style
      shape: rectangle
      label: |md
        **.bss**
        Uninitialized/zero-initialized data
        Read-Write (RW)
        (No space in file, zero-filled at load)
      |
    }

    data_section -> bss_section: "Contiguous" {
      style.stroke: "#8b949e"
      style.stroke-width: 1
    }
  }

  text_segment -> page_boundary: "↓ Memory addresses grow down" {
    style.stroke: "#8b949e"
    style.stroke-width: 1
  }
  page_boundary -> data_segment: "↓" {
    style.stroke: "#8b949e"
    style.stroke-width: 1
  }
}

legend: {
  shape: text
  text: |md
    ## Legend
    - **PT_LOAD**: Program header type for loadable segments
    - **RX**: Read-Execute permissions
    - **RW**: Read-Write permissions
    - **Page Alignment**: Segments aligned to system page boundaries
    - **Contiguous sections**: Sections within same segment are contiguous in memory
  |
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

executable_memory -> legend: {
  style.stroke: "#8b949e"
  style.stroke-dash: 2
  style.font-color: "#8b949e"
}