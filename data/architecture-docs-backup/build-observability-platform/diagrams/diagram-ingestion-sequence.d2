shape: sequence_diagram
title: Ingestion Pipeline Sequence
desc: Sequence diagram showing an app sending OTLP data to the Receiver, which batches it, passes to the Normalizer, and then to the appropriate Storage Engine and Cross-Signal Index. Include backpressure feedback loop.

classes: {
  primary_actor: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  processing_component: {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#c9d1d9"
  }
  storage_component: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
    style.italic: true
  }
  backpressure_note: {
    style.fill: "#5c2c2c"
    style.stroke: "#ff6b6b"
    style.font-color: "#ffcccb"
    style.bold: true
  }
}

app: App {class: primary_actor}
receiver: Receiver {class: processing_component}
normalizer: Normalizer {class: processing_component}
storage_engine: Storage Engine {class: storage_component}
cross_signal_index: Cross-Signal Index {class: storage_component}

app -> receiver: OTLP data (logs/metrics/traces)
note: |md
  **Backpressure Feedback Loop**
  If downstream components are overwhelmed,
  Receiver can slow or reject incoming data
| {
  class: backpressure_note
  near: top-center
}

receiver -> receiver: Batch incoming data
receiver -> normalizer: Batched telemetry
normalizer -> normalizer: Normalize & classify signals
normalizer -> storage_engine: Store processed data
normalizer -> cross_signal_index: Update correlation indexes

storage_engine -> receiver: Storage capacity/health (optional)
cross_signal_index -> receiver: Indexing status (optional)