title: Page Table Structure Diagram

page_tables: Page Table Hierarchy {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.border-radius: 5

  virtual_address: Virtual Address (32-bit) {
    shape: sql_table
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true

    "31-22": Directory Index (10 bits)
    "21-12": Table Index (10 bits)
    "11-0": Offset (12 bits)
  }

  page_directory: Page Directory {
    shape: sql_table
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    
    description: One per process
    "PDE 0": Page Table Address
    "PDE 1": Page Table Address
    "PDE ...": "..."
    "PDE 1023": Page Table Address
  }

  page_table: Page Table {
    shape: sql_table
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    
    description: 1024 entries per table
    "PTE 0": Physical Page Frame
    "PTE 1": Physical Page Frame
    "PTE ...": "..."
    "PTE 1023": Physical Page Frame
  }

  physical_page: Physical Memory Page (4KB) {
    shape: page
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }

  pte_structure: Page Table Entry (PTE) {
    shape: sql_table
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"

    "31-12": Physical Page Frame Number
    "11-0": "Flags (Present, Read/Write, User/Supervisor, etc.)"
  }
}

# Virtual address breakdown connections
page_tables.virtual_address."31-22" -> page_tables.page_directory: indexes
page_tables.virtual_address."21-12" -> page_tables.page_table: indexes
page_tables.virtual_address."11-0" -> page_tables.physical_page: offset

# Page directory to page table connections
page_tables.page_directory."PDE 0" -> page_tables.page_table: "points to (contains base address)"

# Page table to physical page connections
page_tables.page_table."PTE 0" -> page_tables.physical_page: "maps to (via PTE)"

# PTE structure relationship
page_tables.pte_structure -> page_tables.page_table: describes structure of
