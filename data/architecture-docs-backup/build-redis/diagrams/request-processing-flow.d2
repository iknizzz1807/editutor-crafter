shape: sequence_diagram

client: Redis Client {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

network: Network Layer {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

protocol: Protocol Parser {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

dispatcher: Command Dispatcher {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

storage: Storage Engine {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

client -> network: TCP Connection
network -> client: Accept Connection

client -> network: RESP SET Command
network -> protocol: Raw Bytes

protocol -> protocol: Parse RESP Protocol
protocol -> dispatcher: "Command Type: SET, Args: [key, value]"

dispatcher -> dispatcher: Route Command
dispatcher -> storage: Execute SET Operation

storage -> storage: Store Key-Value Pair
storage -> dispatcher: Operation Result

dispatcher -> protocol: Response Data
protocol -> protocol: Serialize RESP +OK

protocol -> network: RESP Response
network -> client: TCP Response

client -> network: RESP GET Command
network -> protocol: Raw Bytes

protocol -> protocol: Parse RESP Protocol
protocol -> dispatcher: "Command Type: GET, Args: [key]"

dispatcher -> storage: Execute GET Operation
storage -> storage: Retrieve Value
storage -> dispatcher: Found Value

dispatcher -> protocol: Response Data
protocol -> protocol: Serialize RESP Bulk String
protocol -> network: RESP Response
network -> client: TCP Response

client -> network: Close Connection
network -> network: Cleanup Resources