direction: down

title: Thompson's Construction Process {
  near: top-center
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
}

start: Start {
  shape: circle
  style.fill: "#3fb950"
  style.font-color: "#000000"
}

ast_input: AST Node Input {
  shape: rectangle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

node_type: Determine Node Type {
  shape: diamond
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

literal_process: Literal Character {
  literal_create: Create Start State {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  literal_connect: Add Character Transition {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  literal_accept: Create Accept State {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  literal_example: |md
    **Example: 'a'**
    (start) --a--> (accept)
  | {
    shape: page
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  literal_create -> literal_connect -> literal_accept
  literal_accept -> literal_example
  
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
}

concat_process: Concatenation {
  concat_left: Process Left Child {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  concat_right: Process Right Child {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  concat_merge: Merge Accept to Start {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  concat_example: |md
    **Example: 'ab'**
    (s1) --a--> (s2) --b--> (s3)
  | {
    shape: page
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  concat_left -> concat_right -> concat_merge
  concat_merge -> concat_example
  
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
}

alt_process: Alternation {
  alt_left: Process Left Child {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  alt_right: Process Right Child {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  alt_start: Create New Start {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  alt_end: Create New Accept {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  alt_connect: Add Epsilon Transitions {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  alt_example: |md
    **Example: 'a OR b'**
    Start splits to both paths
  | {
    shape: page
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  alt_left -> alt_start
  alt_right -> alt_start
  alt_start -> alt_end -> alt_connect
  alt_connect -> alt_example
  
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
}

quant_process: Quantifiers {
  quant_child: Process Child {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  quant_wrap: Add Loop Transitions {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  quant_example: |md
    **Example: 'a*'**
    Loop back for repetition
  | {
    shape: page
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  quant_child -> quant_wrap -> quant_example
  
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
}

combine: Combine Fragments {
  shape: rectangle
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

complete_nfa: Complete NFA {
  shape: rectangle
  style.fill: "#3fb950"
  style.font-color: "#000000"
  style.bold: true
}

start -> ast_input
ast_input -> node_type

node_type -> literal_process: Literal
node_type -> concat_process: Concatenation
node_type -> alt_process: Alternation
node_type -> quant_process: Quantifier

literal_process -> combine
concat_process -> combine
alt_process -> combine
quant_process -> combine

combine -> complete_nfa