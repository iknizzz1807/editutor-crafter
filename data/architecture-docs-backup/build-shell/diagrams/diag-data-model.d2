ShellState: ShellState {
  shape: class
  job_table: "JobTable"
  foreground_pgid: "pid_t"
  terminal_fd: "int"
  original_termios: "struct termios"
  is_interactive: "bool"
}

JobTable: JobTable {
  shape: class
  jobs: "Job[]"
  next_job_id: "int"
}

ShellState -> JobTable: contains

Job: Job {
  shape: class
  job_id: "int"
  pgid: "pid_t"
  state: "JobState"
  command_line: "string"
  first_command: "Command*"
}

JobTable -> Job: jobs

Command: Command {
  shape: class
  argv: "string[]"
  argc: "int"
  redirections: "Redirection[]"
  next: "Command*"
}

Job -> Command: first_command
Command -> Command: next

Redirection: Redirection {
  shape: class
  type: "RedirType"
  fd: "int"
  filename: "string"
  flags: "int"
  mode: "mode_t"
}

Command -> Redirection: redirections

JobState: JobState {
  shape: class
  FOREGROUND: "0"
  BACKGROUND: "1"
  STOPPED: "2"
}

RedirType: RedirType {
  shape: class
  INPUT: "0"
  OUTPUT: "1"
  APPEND: "2"
  HEREDOC: "3"
}

style: {
  fill: "#1a1a2e"
  stroke: "#3fb950"
  font-color: "#e6edf3"
}

ShellState.style: {
  fill: "#0f3460"
  stroke: "#3fb950"
  bold: true
}