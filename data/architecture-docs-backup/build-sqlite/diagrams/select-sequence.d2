shape: sequence_diagram

client: Client {
  shape: circle
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.bold: true
}

parser: Parser {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
}

planner: "Query Planner" {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
}

cursor: "B-tree Cursor" {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
}

storage: Storage {
  shape: cylinder
  style.fill: "#16213e"
  style.stroke: "#3fb950"
}

proj_filter: "Projection/Filter" {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
}

result_set: "Result Set" {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
}

title: SELECT Query Execution Sequence

client -> parser: SQL query
parser -> planner: Abstract Syntax Tree (AST)
planner -> cursor: open()\nInitialize cursor with chosen plan
cursor -> storage: read page
storage -> cursor: page data
cursor -> proj_filter: raw row
proj_filter -> result_set: filtered/projected row
result_set -> client: formatted result
cursor -> cursor: next()\nAdvance to next row {
  style.stroke-dash: 3
}
cursor -> proj_filter: next raw row {
  style.stroke-dash: 3
}
proj_filter -> result_set: next filtered row {
  style.stroke-dash: 3
}
result_set -> client: next result row {
  style.stroke-dash: 3
}

note: |md
  **Volcano Execution Model**
  Row-by-row pipelined processing
  Each operator implements `next()` method
  Minimizes memory usage
| {
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}