direction: right

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  decision: {
    shape: diamond
    style.fill: "#16213e"
    style.stroke: "#ff7b72"
    style.font-color: "#e6edf3"
  }
  terminal: {
    shape: oval
    style.fill: "#0f3460"
    style.stroke: "#58a6ff"
    style.font-color: "#e6edf3"
  }
  error: {
    style.fill: "#1a1a2e"
    style.stroke: "#ff7b72"
    style.font-color: "#ff7b72"
    style.bold: true
  }
}

start: "assert_equal(actual, expected)" {
  class: terminal
}

compare: "Compute Comparison\nactual == expected" {
  class: process
}

match: Match? {
  class: decision
}

pass: "PASS\n(Return normally)" {
  class: process
}

compute_diff: "Compute Difference\ndiff = unified_diff(actual, expected)" {
  class: process
}

format_msg: "Format Error Message\nInclude: actual, expected, diff" {
  class: process
}

raise_error: "Raise AssertionError\nwith formatted message" {
  class: error
}

end_fail: "Test Fails\nException propagates to runner" {
  class: terminal
}

end_pass: "Test Continues\nNext assertion or test completion" {
  class: terminal
}

start -> compare
compare -> match
match -> pass: "Yes (Match)"
match -> compute_diff: "No (Mismatch)"
pass -> end_pass
compute_diff -> format_msg
format_msg -> raise_error
raise_error -> end_fail