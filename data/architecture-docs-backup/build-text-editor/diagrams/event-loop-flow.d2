direction: down

title: Main Event Loop Flow {
  style.font-size: 20
  style.bold: true
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
}

start: Start {
  shape: circle
  style.fill: "#3fb950"
  style.font-color: "#1a1a2e"
  style.bold: true
}

read_input: Read Input {
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

timeout_check: Input Available? {
  shape: diamond
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

parse_command: Parse Command {
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

command_type: Command Type? {
  shape: diamond
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

error_handling: Error Handling {
  style.fill: "#d63031"
  style.stroke: "#e17055"
  style.font-color: "#ffffff"
  style.bold: true
}

movement: Handle Movement {
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

editing: Handle Text Edit {
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

control: Handle Control Key {
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

update_buffer: Update Buffer {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

render_screen: Render Screen {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

quit_check: Quit Command? {
  shape: diamond
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

end: End {
  shape: circle
  style.fill: "#d63031"
  style.font-color: "#ffffff"
  style.bold: true
}

start -> read_input

read_input -> timeout_check

timeout_check -> parse_command: Yes
timeout_check -> read_input: No/Timeout {
  style.stroke: "#8b949e"
}

parse_command -> command_type

command_type -> error_handling: Invalid {
  style.stroke: "#d63031"
}
command_type -> movement: Arrow Keys
command_type -> editing: Text Input
command_type -> control: Ctrl+Key

error_handling -> render_screen

movement -> update_buffer
editing -> update_buffer
control -> update_buffer

update_buffer -> render_screen

render_screen -> quit_check

quit_check -> end: Yes {
  style.stroke: "#d63031"
}
quit_check -> read_input: No {
  style.stroke: "#3fb950"
}