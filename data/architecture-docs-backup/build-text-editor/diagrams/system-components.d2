title: System Component Architecture

# Dark theme styles
vars: {
  container-fill: "#1a1a2e"
  stroke-color: "#3fb950"
  text-color: "#e6edf3"
  arrow-color: "#8b949e"
}

# Main system container
text_editor: Text Editor System {
  style.fill: ${container-fill}
  style.stroke: ${stroke-color}
  style.font-color: ${text-color}
  
  # Core components
  terminal_manager: Terminal Manager {
    style.fill: "#16213e"
    style.stroke: ${stroke-color}
    style.font-color: ${text-color}
    style.bold: true
  }
  
  input_handler: Input Handler {
    style.fill: "#16213e"
    style.stroke: ${stroke-color}
    style.font-color: ${text-color}
    style.bold: true
  }
  
  text_buffer: Text Buffer {
    shape: cylinder
    style.fill: "#16213e"
    style.stroke: ${stroke-color}
    style.font-color: ${text-color}
    style.bold: true
  }
  
  renderer: Renderer {
    style.fill: "#16213e"
    style.stroke: ${stroke-color}
    style.font-color: ${text-color}
    style.bold: true
  }
  
  search_syntax: Search/Syntax {
    style.fill: "#16213e"
    style.stroke: ${stroke-color}
    style.font-color: ${text-color}
    style.bold: true
  }
}

# External entities
keyboard: Keyboard Input {
  style.fill: "#0f3460"
  style.stroke: ${stroke-color}
  style.font-color: ${text-color}
}

screen: Terminal Screen {
  style.fill: "#0f3460"
  style.stroke: ${stroke-color}
  style.font-color: ${text-color}
}

# Data flow connections
keyboard -> text_editor.terminal_manager: raw keypresses {
  style.stroke: ${arrow-color}
}

text_editor.terminal_manager -> text_editor.input_handler: parsed input {
  style.stroke: ${arrow-color}
}

text_editor.input_handler -> text_editor.text_buffer: edit commands {
  style.stroke: ${arrow-color}
}

text_editor.input_handler -> text_editor.search_syntax: search queries {
  style.stroke: ${arrow-color}
}

text_editor.text_buffer -> text_editor.renderer: buffer state {
  style.stroke: ${arrow-color}
}

text_editor.search_syntax -> text_editor.renderer: highlights & matches {
  style.stroke: ${arrow-color}
}

text_editor.renderer -> text_editor.terminal_manager: ANSI sequences {
  style.stroke: ${arrow-color}
}

text_editor.terminal_manager -> screen: screen updates {
  style.stroke: ${arrow-color}
}

# Feedback loop
text_editor.text_buffer -> text_editor.input_handler: cursor position {
  style.stroke: "#8b949e"
  style.stroke-dash: 5
}