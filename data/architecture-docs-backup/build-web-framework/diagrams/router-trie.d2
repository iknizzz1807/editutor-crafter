direction: right

title: Router Internal Structure: Prefix Tree (Trie)
desc: A visual example of a route trie. Nodes represent path segments (static or parameter). Include a root node and child nodes for routes like '/api/users/:id' and '/api/posts'. Highlight the parameter node and the handler stored at leaf nodes.

route_trie: {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  root: / {
    shape: circle
  }

  root -> api: api
  api: api

  api -> users: users
  users: users

  api -> posts: posts {
    style.bold: true
    style.stroke: "#3fb950"
  }

  users -> param_id: :id {
    style.stroke-dash: 2
    style.stroke: "#f0883e"
  }
  param_id: :id {
    shape: diamond
    style.fill: "#0f3460"
    style.stroke: "#f0883e"
    style.bold: true
    style.font-color: "#f0883e"
  }

  param_id -> handler1: "ends"
  handler1: "GET /api/users/:id" {
    shape: page
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.multiple: true
  }

  posts -> handler2: "ends"
  handler2: "GET /api/posts" {
    shape: page
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.multiple: true
  }
}

note: |md
  ## How It Works
  - Each node represents a path segment.
  - Static segments (e.g., `api`, `users`) are exact matches.
  - Parameter segments (e.g., `:id`) capture dynamic values.
  - Handlers are attached to leaf nodes that complete a route.
| {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}