shape: sequence_diagram

Title: Sequence Diagram: Compiling an Expression {
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.font-size: 20
  style.bold: true
}

compiler_driver: Compiler Driver {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

expression_compiler: Expression Compiler {
  style.fill: "#16213e"
  style.stroke: "#ffa657"
  style.font-color: "#e6edf3"
}

bytecode_chunk: Bytecode Chunk {
  style.fill: "#16213e"
  style.stroke: "#ff7b72"
  style.font-color: "#e6edf3"
}

compiler_driver -> expression_compiler: visit BinaryOp(+)
expression_compiler -> compiler_driver: compile left operand (1)
compiler_driver -> expression_compiler: visit Constant(1)
expression_compiler -> bytecode_chunk: write LOAD_CONST 1
expression_compiler -> compiler_driver: compile right operand (2 * 3)
compiler_driver -> expression_compiler: visit BinaryOp(*)
expression_compiler -> compiler_driver: compile left operand (2)
compiler_driver -> expression_compiler: visit Constant(2)
expression_compiler -> bytecode_chunk: write LOAD_CONST 2
expression_compiler -> compiler_driver: compile right operand (3)
compiler_driver -> expression_compiler: visit Constant(3)
expression_compiler -> bytecode_chunk: write LOAD_CONST 3
expression_compiler -> bytecode_chunk: write MUL
expression_compiler -> bytecode_chunk: write ADD