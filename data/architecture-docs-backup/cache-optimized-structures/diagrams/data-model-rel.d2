classes: {
  dark_container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.stroke-width: 2
    style.font-color: "#e6edf3"
    style.border-radius: 5
  }
  dark_class: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
    style.stroke-width: 1
  }
  composition_arrow: {
    target-arrowhead: diamond
    style.stroke: "#3fb950"
    style.stroke-width: 2
    style.stroke-dash: 0
  }
}

measurement_group: "Benchmark & Measurement Types" {
  class: dark_container

  benchmark_result: {
    shape: class
    class: dark_class
    label: "BenchmarkResult"
    "- name: string"
    "- timestamp: DateTime"
    "- config: BenchmarkConfig"
    "+ add_run(run: RunMetrics): void"
    "+ compute_statistics(): SummaryStats"
  }

  run_metrics: {
    shape: class
    class: dark_class
    label: "RunMetrics"
    "- iteration: int"
    "- timestamp_stats: TimingStats"
    "- hw_counters: HardwareCounters"
    "+ validate(): bool"
  }

  timing_stats: {
    shape: class
    class: dark_class
    label: "TimingStats"
    "- start_ns: int64"
    "- end_ns: int64"
    "- duration_ns: int64"
    "+ elapsed_ms(): float"
  }

  benchmark_result -> run_metrics: "contains 1..*" {
    class: composition_arrow
    source-arrowhead: none
  }
  run_metrics -> timing_stats: "contains" {
    class: composition_arrow
    source-arrowhead: none
  }
}

structures_group: "Data Structure Core Types" {
  class: dark_container

  particle_system: {
    shape: class
    class: dark_class
    label: "ParticleSystem"
    "- count: int"
    "- aos_layout: \"Particle[]\""
    "- soa_positions: \"float[][]\""
    "- soa_velocities: \"float[][]\""
    "+ update(dt: float): void"
    "+ switch_layout(layout: Layout): void"
  }

  hash_table: {
    shape: class
    class: dark_class
    label: "HashTable<K, V>"
    "- capacity: int"
    "- keys: \"K[]\""
    "- values: \"V[]\""
    "- occupied: \"bool[]\""
    "+ insert(key: K, value: V): bool"
    "+ lookup(key: K): V | null"
  }

  veb_tree: {
    shape: class
    class: dark_class
    label: "vEBTree"
    "- universe_size: int"
    "- tree_array: \"int[]\""
    "- summary_bit: int"
    "+ insert(x: int): void"
    "+ successor(x: int): int | null"
  }

  hash_table -> hash_table.keys: "stores in" {
    class: composition_arrow
    label: "contiguous array"
    source-arrowhead: none
  }
  hash_table -> hash_table.values: "stores in" {
    class: composition_arrow
    label: "contiguous array"
    source-arrowhead: none
  }
  veb_tree -> veb_tree.tree_array: "stored as" {
    class: composition_arrow
    label: "single flat array"
    source-arrowhead: none
  }
}

note: |md
  **Layout Choices:**
  - **AoS:** Single array of structs (cache-friendly for particle-at-a-time)
  - **SoA:** Multiple parallel arrays (cache-friendly for field-at-a-time)
| {
  shape: page
  class: dark_container
  near: bottom-left
}