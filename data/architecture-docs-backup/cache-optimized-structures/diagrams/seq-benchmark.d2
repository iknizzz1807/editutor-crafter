shape: sequence_diagram

title: Benchmark Execution Sequence
direction: right

actor: User {
  label: User (Initiator)
  class: actor_style
}

actor: Benchmark_Harness {
  label: Benchmark Harness (Controller)
  class: controller_style
}

actor: Cache_Detector {
  label: Cache Detector (Profiler)
  class: profiler_style
}

actor: DS_Under_Test {
  label: "Data Structure Under Test (Specimen)"
  class: specimen_style
}

actor: Performance_Counter_Reader {
  label: Performance Counter Reader (Instrument)
  class: instrument_style
}

User -> Benchmark_Harness: Execute Benchmark Run
Benchmark_Harness -> Cache_Detector: Detect Cache Configuration
Cache_Detector --> Benchmark_Harness: Return Cache Sizes & Line Sizes

note: Phase 1: System Characterization {near: top-left}

Benchmark_Harness -> DS_Under_Test: Initialize with Test Data
Benchmark_Harness -> Performance_Counter_Reader: Start Performance Counters
Performance_Counter_Reader --> Benchmark_Harness: Counters Running

note: Phase 2: Experiment Setup {near: top-center}

Benchmark_Harness -> DS_Under_Test: Run Pre-defined Operations
DS_Under_Test --> Benchmark_Harness: Operations Completed

note: Phase 3: Execution & Measurement {near: top-center}

Benchmark_Harness -> Performance_Counter_Reader: Stop Performance Counters
Performance_Counter_Reader -> Performance_Counter_Reader: Aggregate Measurements
Performance_Counter_Reader --> Benchmark_Harness: Return Performance Data
Benchmark_Harness -> Benchmark_Harness: Process & Format Results
Benchmark_Harness --> User: Present Final Report (Cache Hits, Cycles, Time)

note: Phase 4: Result Collection & Analysis {near: top-right}

classes: {
  actor_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#58a6ff"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  controller_style: {
    style.fill: "#0d1117"
    style.stroke: "#3fb950"
    style.font-color: "#3fb950"
    style.bold: true
    style.double-border: true
  }
  profiler_style: {
    style.fill: "#161b22"
    style.stroke: "#a371f7"
    style.font-color: "#a371f7"
  }
  specimen_style: {
    style.fill: "#161b22"
    style.stroke: "#ff7b72"
    style.font-color: "#ff7b72"
  }
  instrument_style: {
    style.fill: "#161b22"
    style.stroke: "#79c0ff"
    style.font-color: "#79c0ff"
  }
}