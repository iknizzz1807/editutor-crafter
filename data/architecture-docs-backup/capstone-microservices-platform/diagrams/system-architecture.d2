direction: right

title: System Architecture Overview {
  near: top-center
  style.font-size: 24
  style.bold: true
  style.font-color: "#e6edf3"
}

# External clients
client: Client Applications {
  shape: cloud
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

# API Gateway
gateway: API Gateway {
  shape: hexagon
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

# Service Discovery
discovery: {
  title: Service Discovery
  registry: Service Registry {
    shape: cylinder
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
}

# Business Services
services: Business Services {
  users: Users Service {
    shape: rectangle
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  products: Products Service {
    shape: rectangle
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  orders: Orders Service {
    shape: rectangle
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  payments: Payments Service {
    shape: rectangle
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  style.fill: "#16213e"
  style.stroke: "#3fb950"
}

# Observability
observability: Observability {
  tracing: Distributed Tracing {
    shape: oval
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  metrics: Metrics Collection {
    shape: oval
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  logging: Centralized Logging {
    shape: oval
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
}

# Connections
client -> gateway: HTTP Requests {
  style.stroke: "#8b949e"
}

gateway -> services.users: Route {
  style.stroke: "#8b949e"
}
gateway -> services.products: Route {
  style.stroke: "#8b949e"
}
gateway -> services.orders: Route {
  style.stroke: "#8b949e"
}
gateway -> services.payments: Route {
  style.stroke: "#8b949e"
}

# Service discovery connections
gateway -> discovery.registry: Service Lookup {
  style.stroke: "#3fb950"
}

services.users -> discovery.registry: Register/Heartbeat {
  style.stroke: "#3fb950"
}
services.products -> discovery.registry: Register/Heartbeat {
  style.stroke: "#3fb950"
}
services.orders -> discovery.registry: Register/Heartbeat {
  style.stroke: "#3fb950"
}
services.payments -> discovery.registry: Register/Heartbeat {
  style.stroke: "#3fb950"
}

# Inter-service communication
services.orders -> services.users: User Validation {
  style.stroke: "#8b949e"
}
services.orders -> services.products: Inventory Check {
  style.stroke: "#8b949e"
}
services.orders -> services.payments: Process Payment {
  style.stroke: "#8b949e"
}

# Observability connections
gateway -> observability.tracing: Trace Data {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}
services -> observability.metrics: Metrics {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}
services -> observability.logging: Logs {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}