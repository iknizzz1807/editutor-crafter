title: System Component Overview

direction: right

classes: {
  container_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.double-border: true
    style.bold: true
  }
  component_style: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
    style.bold: false
  }
  active_env_style: {
    style.fill: "#0d3b1c"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.double-border: true
    style.bold: true
  }
  inactive_env_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
    style.double-border: false
    style.bold: false
  }
  traffic_flow: {
    style.stroke: "#3fb950"
    style.stroke-width: 3
    style.animated: true
  }
  control_flow: {
    style.stroke: "#d29922"
    style.stroke-dash: 3
    style.animated: false
  }
}

user: "User" {
  shape: person
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
}

load_balancer: Load Balancer {
  shape: rectangle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.double-border: true
}

user -> load_balancer: "User Traffic" {
  class: traffic_flow
}

management: "Management Components" {
  class: container_style
  
  environment_manager: Environment Manager {
    class: component_style
  }
  
  load_balancer_controller: Load Balancer Controller {
    class: component_style
  }
  
  deployment_orchestrator: Deployment Orchestrator {
    class: component_style
  }
  
  database_migrator: Database Migrator {
    class: component_style
  }
}

environments: "Blue-Green Environments" {
  class: container_style
  
  blue_env: "Blue Environment (Active)" {
    class: active_env_style
    web_app: "Web Application" {
      style.fill: "#16213e"
      style.font-color: "#e6edf3"
    }
    app_db: "Application Database" {
      shape: cylinder
      style.fill: "#16213e"
      style.font-color: "#e6edf3"
    }
    web_app -> app_db: "queries"
  }
  
  green_env: "Green Environment (Idle)" {
    class: inactive_env_style
    web_app: "Web Application" {
      style.fill: "#16213e"
      style.font-color: "#e6edf3"
    }
    app_db: "Application Database" {
      shape: cylinder
      style.fill: "#16213e"
      style.font-color: "#e6edf3"
    }
    web_app -> app_db: "queries"
  }
}

load_balancer -> blue_env: "Routes Traffic" {
  class: traffic_flow
}

load_balancer -> green_env: "Standby Path" {
  class: traffic_flow
  style.opacity: 0.5
}

management.environment_manager -> blue_env: "Manages Infrastructure" {
  class: control_flow
}
management.environment_manager -> green_env: "Manages Infrastructure" {
  class: control_flow
}

management.load_balancer_controller -> load_balancer: "Configures Routing" {
  class: control_flow
}

management.deployment_orchestrator -> green_env: "Deploys New Version" {
  class: control_flow
}

management.database_migrator -> green_env.app_db: "Runs Migrations" {
  class: control_flow
}

note: |md
  **Traffic Flow**: Solid green arrows
  **Control Flow**: Dashed yellow arrows
  
  Blue environment currently handles production traffic
  Green environment receives new deployments
| {
  shape: page
  style.fill: "#1a1a2e"
  style.stroke: "#d29922"
  style.font-color: "#e6edf3"
  near: top-left
}