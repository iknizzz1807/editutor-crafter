title: Core Data Model Relationships

classes: {
  dark_theme: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: false
  }
  class_style: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
    style.border-radius: 5
  }
}

experiment: Experiment {
  shape: class
  class: class_style
  - "id: UUID"
  - "name: string"
  - "description: string"
  - "status: ExperimentStatus"
  - "created_at: DateTime"
  - "updated_at: DateTime"
  + "start(): void"
  + "stop(): void"
  + "validate(): boolean"
}

hypothesis: Hypothesis {
  shape: class
  class: class_style
  - "id: UUID"
  - "experiment_id: UUID"
  - "description: string"
  - "expected_steady_state: string"
  + "evaluate(metrics: Map): boolean"
}

metric_threshold: MetricThreshold {
  shape: class
  class: class_style
  - "id: UUID"
  - "hypothesis_id: UUID"
  - "metric_name: string"
  - "operator: ThresholdOperator"
  - "threshold_value: number"
  - "tolerance_percent: number"
  + "is_violated(value: number): boolean"
}

fault: Fault {
  shape: class
  class: class_style
  - "id: UUID"
  - "experiment_id: UUID"
  - "type: FaultType"
  - "parameters: Map"
  - "targets: List"
  - "status: FaultStatus"
  - "start_time: DateTime"
  - "end_time: DateTime"
  + "inject(): void"
  + "revert(): void"
}

experiment_result: ExperimentResult {
  shape: class
  class: class_style
  - "id: UUID"
  - "experiment_id: UUID"
  - "status: ResultStatus"
  - "started_at: DateTime"
  - "completed_at: DateTime"
  - "metrics_snapshot: Map"
  - "hypothesis_evaluation: boolean"
  - "faults_executed: List"
  + "generate_report(): string"
}

experiment -> fault: "has-many (1..*)"
experiment -> hypothesis: "has-one (1..1)"
hypothesis -> metric_threshold: "has-many (1..*)"
experiment_result -> experiment: "references (1..1)"
