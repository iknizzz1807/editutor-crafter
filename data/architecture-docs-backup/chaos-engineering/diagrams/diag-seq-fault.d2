shape: sequence_diagram

label: |md
  # Sequence Diagram: Injecting a Network Latency Fault
  A sequence diagram showing the interaction between User, Experiment Controller, Fault Injector Agent, and Target Service for applying 200ms latency.
|

user: User {
  class: actor_style
}
experiment_controller: Experiment Controller {
  class: controller_style
}
fault_injector: Fault Injector Agent {
  class: agent_style
}
target_service: Target Service {
  class: service_style
}

user -> experiment_controller: "POST /experiments {latency: 200ms}"
experiment_controller -> fault_injector: "InjectFault RPC (type=network_latency, duration=200ms)"
fault_injector -> target_service: "Apply tc netem rule (add 200ms latency)"
target_service -> fault_injector: Rule applied successfully
fault_injector -> experiment_controller: Fault injection acknowledged
experiment_controller -> user: "Experiment started (fault active)"

classes: {
  actor_style: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  controller_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  agent_style: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  service_style: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}
