title: Chaos Platform System Overview

classes: {
  dark_container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.border-radius: 5
  }
  dark_component: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.border-radius: 3
  }
  primary_arrow: {
    style.stroke: "#8b949e"
    style.animated: true
  }
  critical_arrow: {
    style.stroke: "#f85149"
    style.stroke-width: 2
    style.animated: true
  }
}

chaos_platform: Chaos Engineering Platform {
  class: dark_container
  
  experiment_controller: Experiment Controller (API) {
    class: dark_component
    shape: rectangle
    - "Responsibility: Orchestrates experiment lifecycle"
    - "Owns: Experiment definitions, state transitions"
    - "Interface: REST API / gRPC"
  }
  
  fault_injector: Fault Injector (Agents) {
    class: dark_component
    shape: rectangle
    - "Responsibility: Executes sabotage operations"
    - "Owns: Fault execution state, agent registry"
    - "Interface: Agent-based, command channels"
  }
  
  safety_monitor: Safety Monitor {
    class: dark_component
    shape: rectangle
    - "Responsibility: Watches telemetry, triggers abort"
    - "Owns: Safety rules, breach detection logic"
    - "Interface: Metric streams, abort channels"
  }
  
  metrics_collector: Metrics Collector {
    class: dark_component
    shape: rectangle
    - "Responsibility: Gathers observational data"
    - "Owns: Time-series metrics, experiment snapshots"
    - "Interface: Telemetry ingestion, query API"
  }
  
  result_analyzer: Result Analyzer {
    class: dark_component
    shape: rectangle
    - "Responsibility: Compiles mission reports"
    - "Owns: Analysis results, hypothesis validation"
    - "Interface: Report generation, insights API"
  }
}

external_systems: {
  user: "User / Client" {
    shape: person
    style.fill: "#0f3460"
    style.font-color: "#e6edf3"
  }
  
  target_systems: "Target Systems" {
    shape: cloud
    style.fill: "#0f3460"
    style.font-color: "#e6edf3"
  }
}

# Data Flow - Experiment Orchestration
user -> chaos_platform.experiment_controller: "experiment definition (CreateExperiment)" {
  class: primary_arrow
}

chaos_platform.experiment_controller -> chaos_platform.fault_injector: "fault execution commands" {
  class: primary_arrow
  style.stroke-dash: 3
}

chaos_platform.fault_injector -> target_systems: "inject faults" {
  class: critical_arrow
}

# Data Flow - Metric Collection
target_systems -> chaos_platform.metrics_collector: "metric streams (telemetry)" {
  class: primary_arrow
}

chaos_platform.metrics_collector -> chaos_platform.safety_monitor: "metric streams (monitoring)" {
  class: primary_arrow
}

chaos_platform.metrics_collector -> chaos_platform.result_analyzer: "metric streams (analysis)" {
  class: primary_arrow
}

# Data Flow - Safety & Results
chaos_platform.safety_monitor -> chaos_platform.experiment_controller: "abort signals" {
  class: critical_arrow
}

chaos_platform.safety_monitor -> chaos_platform.fault_injector: "rollback commands" {
  class: critical_arrow
}

chaos_platform.experiment_controller -> chaos_platform.result_analyzer: "experiment context" {
  class: primary_arrow
}

chaos_platform.result_analyzer -> user: "result reports" {
  class: primary_arrow
}

# Internal coordination
chaos_platform.experiment_controller <-> chaos_platform.metrics_collector: "status queries" {
  class: primary_arrow
  style.stroke-dash: 2
}

# Legend
note: |md
  ## Data Flow Legend
  - **Solid**: Primary data flow
  - **Dashed**: Control commands
  - **Red**: Critical/safety paths
  - **Animated**: Real-time streams
| {
  shape: page
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
  near: bottom-right
}