classes: {
  class_style: {
    shape: class
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: false
  }
  important_connection: {
    style.stroke: "#3fb950"
    style.stroke-width: 2
    style.bold: true
  }
}

title_container: {
  shape: rectangle
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.stroke-width: 3
  style.double-border: true
  label: "Data Model Relationship Diagram"
  style.font-size: 32
  style.font-color: "#ffffff"
  style.bold: true
}

DialogState: {
  shape: class
  class: class_style
  label: |md
  **DialogState**
  ---
  - current_intent: Intent
  - slots: Map<string, Slot>
  + update_slot(key: string, value: Slot): void
  + get_slot(key: string): Optional<Slot>
  + clear(): void
  |
}

Intent: {
  shape: class
  class: class_style
  label: |md
  **Intent**
  ---
  - name: string
  - required_slots: string[]
  + is_slot_required(slot_name: string): bool
  + get_required_slots(): string[]
  |
}

Slot: {
  shape: class
  class: class_style
  label: |md
  **Slot**
  ---
  - name: string
  - value: Entity
  - is_filled: bool
  + fill(entity: Entity): void
  + clear(): void
  + get_value(): Optional<Entity>
  |
}

Entity: {
  shape: class
  class: class_style
  label: |md
  **Entity**
  ---
  - type: string
  - raw_value: string
  - normalized_value: string
  + get_type(): string
  + get_raw_value(): string
  + get_normalized(): string
  |
}

ResponseTemplate: {
  shape: class
  class: class_style
  label: |md
  **ResponseTemplate**
  ---
  - template: string
  - required_slots: string[]
  + render(slots: Map<string, Slot>): string
  + get_missing_slots(slots: Map<string, Slot>): string[]
  + is_ready(slots: Map<string, Slot>): bool
  |
}

UserUtterance: {
  shape: class
  class: class_style
  label: |md
  **UserUtterance**
  ---
  - raw_text: string
  - cleaned_text: string
  - intent: Optional<Intent>
  - entities: Entity[]
  - slots: Map<string, Slot>
  + get_raw_text(): string
  + get_cleaned_text(): string
  + get_intent(): Optional<Intent>
  + get_entities(): Entity[]
  + get_slots(): Map<string, Slot>
  |
}

DialogState -> Intent: "current_intent" {class: important_connection}
DialogState -> Slot: "slots (map)" {class: important_connection}
Intent -> Slot: "required_slots" {
  class: important_connection
  style.stroke-dash: 3
}
Slot -> Entity: "value"
ResponseTemplate -> Slot: "required_slots" {
  class: important_connection
  style.stroke-dash: 3
}
UserUtterance -> Intent: "intent"
UserUtterance -> Entity: "entities"
UserUtterance -> Slot: "slots (map)"

ConversationCore: {
  shape: rectangle
  label: "Core Conversation Types"
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.stroke-width: 2
  style.font-color: "#e6edf3"
  style.bold: true
}
ConversationCore.DialogState
ConversationCore.Intent
ConversationCore.Slot
ConversationCore.Entity

ResponseSystem: {
  shape: rectangle
  label: "Response System"
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.stroke-width: 2
  style.font-color: "#e6edf3"
  style.bold: true
}
ResponseSystem.ResponseTemplate

InputProcessing: {
  shape: rectangle
  label: "Input Processing"
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.stroke-width: 2
  style.font-color: "#e6edf3"
  style.bold: true
}
InputProcessing.UserUtterance

ConversationCore.near: top-left
ResponseSystem.near: top-right
InputProcessing.near: bottom-center
title_container.near: top-center
title_container.width: 400
title_container.height: 80