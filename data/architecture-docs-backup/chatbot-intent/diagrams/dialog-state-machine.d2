title: Dialog Manager State Machine

classes: {
  state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.border-radius: 5
    width: 160
  }
  final_state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.border-radius: 5
    style.double-border: true
    width: 160
  }
  initial_state: {
    shape: circle
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    width: 20
    height: 20
    label: ""
  }
}

init: { class: initial_state }

# States
IDLE: Dialog Manager IDLE { class: state }
INTENT_IDENTIFIED: Intent Identified { class: state }
COLLECTING_SLOTS: Collecting Slots { class: state }
CONFIRMING: Confirming with User { class: state }
READY_TO_EXECUTE: Ready to Execute { class: final_state }

# Initial transition
init -> IDLE: Start

# Main flow transitions
IDLE -> INTENT_IDENTIFIED: intent_detected\naction: generate_response
INTENT_IDENTIFIED -> COLLECTING_SLOTS: slot_received (missing slots)\naction: prompt_for_slot
INTENT_IDENTIFIED -> CONFIRMING: slot_received (all slots filled)\naction: generate_response
COLLECTING_SLOTS -> COLLECTING_SLOTS: slot_received (more slots needed)\naction: prompt_for_slot
COLLECTING_SLOTS -> CONFIRMING: slot_received (all slots filled)\naction: generate_response
CONFIRMING -> READY_TO_EXECUTE: confirmation_yes\naction: generate_response
CONFIRMING -> COLLECTING_SLOTS: confirmation_no\naction: prompt_for_slot

# Reset transitions (from any state back to IDLE)
IDLE -> IDLE: reset { style.stroke: "#ffa500" }
INTENT_IDENTIFIED -> IDLE: reset { style.stroke: "#ffa500" }
COLLECTING_SLOTS -> IDLE: reset { style.stroke: "#ffa500" }
CONFIRMING -> IDLE: reset { style.stroke: "#ffa500" }
READY_TO_EXECUTE -> IDLE: reset { style.stroke: "#ffa500" }