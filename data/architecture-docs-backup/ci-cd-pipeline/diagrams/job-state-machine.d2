direction: right

classes: {
  state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  final_state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
    style.double-border: true
  }
  
  start_state: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    style.font-color: "#1a1a2e"
    style.bold: true
  }
  
  transition: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  retry_transition: {
    style.stroke: "#f39c12"
    style.font-color: "#f39c12"
  }
  
  error_transition: {
    style.stroke: "#e74c3c"
    style.font-color: "#e74c3c"
  }
}

init: {
  shape: circle
  class: start_state
  label: ""
}

queued: Queued {
  shape: circle
  class: state
}

running: Running {
  shape: circle
  class: state
}

retry: Retry {
  shape: circle
  class: state
}

success: Success {
  shape: circle
  class: final_state
}

failed: Failed {
  shape: circle
  class: final_state
}

init -> queued: Job Submitted {
  class: transition
}

queued -> running: Executor Available / Start Container {
  class: transition
}

running -> success: Job Completed / Update Status {
  class: transition
}

running -> retry: Transient Failure / Log Error {
  class: error_transition
}

running -> failed: Fatal Error / Cleanup Resources {
  class: error_transition
}

retry -> running: Retry Delay Elapsed / Restart Job {
  class: retry_transition
}

retry -> failed: Max Retries Exceeded / Mark Failed {
  class: error_transition
}

queued -> failed: Timeout / Cancel Job {
  class: error_transition
}

title: Job Execution State Machine {
  near: top-center
  style.font-size: 18
  style.bold: true
  style.font-color: "#e6edf3"
}