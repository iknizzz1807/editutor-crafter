title: Client Integration Architecture {
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
  near: top-center
}

classes: {
  container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  component: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  external: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  manager: {
    style.fill: "#2d3748"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

integration_layer: Client Integration Layer {
  class: container
  
  http_wrapper: HTTPClientWrapper {
    class: component
  }
  
  grpc_interceptor: gRPCInterceptor {
    class: component
  }
  
  service_registry: ServiceRegistry {
    class: manager
  }
  
  circuit_breaker_mgr: CircuitBreakerManager {
    class: manager
  }
  
  http_wrapper -> service_registry: lookup service
  grpc_interceptor -> service_registry: lookup service
  
  http_wrapper -> circuit_breaker_mgr: check circuit state
  grpc_interceptor -> circuit_breaker_mgr: check circuit state
  
  service_registry -> circuit_breaker_mgr: register services
}

external_clients: External Clients {
  class: container
  
  app_http_client: Application HTTP Client {
    class: external
  }
  
  app_grpc_client: Application gRPC Client {
    class: external
  }
}

downstream_services: Downstream Services {
  class: container
  
  http_service: HTTP Service A {
    class: external
  }
  
  grpc_service: gRPC Service B {
    class: external
  }
  
  rest_api: REST API C {
    class: external
  }
}

app_http_client -> integration_layer.http_wrapper: HTTP requests {
  style.stroke: "#3fb950"
  style.bold: true
}

app_grpc_client -> integration_layer.grpc_interceptor: gRPC calls {
  style.stroke: "#3fb950"
  style.bold: true
}

integration_layer.http_wrapper -> http_service: proxied HTTP {
  style.stroke: "#8b949e"
}

integration_layer.http_wrapper -> rest_api: proxied HTTP {
  style.stroke: "#8b949e"
}

integration_layer.grpc_interceptor -> grpc_service: proxied gRPC {
  style.stroke: "#8b949e"
}

circuit_note: |md
  ## Circuit Breaker Protection
  - Automatic failure detection
  - Graceful degradation
  - Service health monitoring
| {
  shape: page
  style.fill: "#2d3748"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  near: bottom-right
}