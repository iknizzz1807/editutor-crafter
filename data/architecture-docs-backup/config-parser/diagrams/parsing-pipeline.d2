classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  error: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    style.bold: true
  }
  storage: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  output: {
    style.fill: "#00b894"
    style.stroke: "#00a085"
    style.font-color: "#ffffff"
    style.bold: true
  }
}

input: Input File {
  class: storage
  shape: page
}

format_detect: Format Detection {
  class: decision
  shape: diamond
}

ini_parser: INI Parser {
  class: process
}

toml_tokenizer: TOML Tokenizer {
  class: process
}

toml_parser: TOML Parser {
  class: process
}

yaml_parser: YAML Parser {
  class: process
}

lexical_error: Lexical Error {
  class: error
  shape: hexagon
}

syntax_error: Syntax Error {
  class: error
  shape: hexagon
}

semantic_error: Semantic Error {
  class: error
  shape: hexagon
}

ast: Abstract Syntax Tree {
  class: storage
  shape: cylinder
}

data_mapper: Data Structure Mapper {
  class: process
}

validation: Schema Validation {
  class: decision
  shape: diamond
}

error_reporter: Error Reporter {
  class: error
}

output: Parsed Config {
  class: output
  shape: page
}

input -> format_detect: read

format_detect -> ini_parser: .ini/.cfg
format_detect -> toml_tokenizer: .toml
format_detect -> yaml_parser: .yaml/.yml

toml_tokenizer -> toml_parser: tokens
toml_tokenizer -> lexical_error: invalid tokens

ini_parser -> syntax_error: parse fail
ini_parser -> ast: success

toml_parser -> syntax_error: parse fail  
toml_parser -> ast: success

yaml_parser -> syntax_error: parse fail
yaml_parser -> ast: success

ast -> data_mapper: transform

data_mapper -> semantic_error: type mismatch
data_mapper -> validation: valid structure

validation -> output: pass
validation -> semantic_error: constraint fail

lexical_error -> error_reporter: report
syntax_error -> error_reporter: report  
semantic_error -> error_reporter: report

error_reporter -> output: formatted errors