title: Namespace Isolation Diagram

classes: {
  host_style: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  container_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#e17055"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  process_style: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  namespace_style: {
    style.fill: "#2d3748"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

host: Host System View {
  class: host_style
  
  pid_host: PID Namespace {
    class: namespace_style
    host_pids: |md
      **Real PIDs:**
      - init (1)
      - systemd (2)
      - container_proc (15432)
      - bash (15433)
      - app (15434)
    | {
      shape: page
    }
  }
  
  mount_host: Mount Namespace {
    class: namespace_style
    host_mounts: |md
      **Host Filesystem:**
      - / (root)
      - /home
      - /var/lib/containers
      - /proc
      - /sys
    | {
      shape: page
    }
  }
  
  net_host: Network Namespace {
    class: namespace_style
    host_network: |md
      **Host Network:**
      - eth0: 192.168.1.100
      - lo: 127.0.0.1
      - docker0: 172.17.0.1
      - All ports accessible
    | {
      shape: page
    }
  }
}

container: Container View {
  class: container_style
  
  pid_container: PID Namespace {
    class: namespace_style
    container_pids: |md
      **Container PIDs:**
      - init (1) ← container_proc
      - bash (2) 
      - app (3)
      
      *Only sees own processes*
    | {
      shape: page
    }
  }
  
  mount_container: Mount Namespace {
    class: namespace_style
    container_mounts: |md
      **Container Filesystem:**
      - / ← pivot_root to container
      - /bin, /usr, /etc
      - /tmp (tmpfs)
      
      *Host / is hidden*
    | {
      shape: page
    }
  }
  
  net_container: Network Namespace {
    class: namespace_style
    container_network: |md
      **Container Network:**
      - eth0: 172.17.0.2
      - lo: 127.0.0.1
      
      *Isolated network stack*
    | {
      shape: page
    }
  }
}

isolation: Isolation Boundary {
  shape: cloud
  style.fill: "#4a5568"
  style.stroke: "#e17055"
  style.font-color: "#e6edf3"
  style.stroke-dash: 5
}

process: Container Process {
  class: process_style
  shape: hexagon
}

# Connections
pid_host -> pid_container: PID translation\n(15432 ↔ 1) {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

mount_host -> mount_container: Filesystem isolation\n(pivot_root) {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

net_host -> net_container: Network isolation\n(veth pair) {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

process -> container: sees only {
  style.stroke: "#3fb950"
}

host -> process: manages {
  style.stroke: "#e17055"
}

isolation.near: center-right