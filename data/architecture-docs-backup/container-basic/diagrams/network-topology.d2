title: Container Network Topology

classes: {
  host_component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  container_component: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  network_interface: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  veth_pair: {
    style.stroke: "#ff7675"
    style.stroke-width: 3
    style.font-color: "#ff7675"
  }
}

host_system: Host System {
  class: host_component
  
  host_net_stack: Host Network Stack {
    class: host_component
    
    eth0: eth0 Interface {
      class: network_interface
      label: "eth0\n(Physical NIC)"
    }
    
    lo: lo Interface {
      class: network_interface
      label: "lo\n(127.0.0.1)"
    }
    
    routing: Host Routing Table {
      class: host_component
      shape: page
      label: "Routing Table\nDefault Gateway\nContainer Routes"
    }
  }
  
  docker_bridge: Docker Bridge {
    class: network_interface
    shape: hexagon
    label: "docker0\n172.17.0.1/16"
  }
  
  veth_host: veth Host End {
    class: network_interface
    label: "veth1234@if5"
  }
}

container: Container Namespace {
  class: container_component
  
  container_net: Container Network Stack {
    class: container_component
    
    lo_container: lo Interface {
      class: network_interface
      label: "lo\n(127.0.0.1)"
    }
    
    eth0_container: eth0 Interface {
      class: network_interface
      label: "eth0\n172.17.0.2/16"
    }
    
    container_routing: Container Routes {
      class: container_component
      shape: page
      label: "Routing Table\ndefault via 172.17.0.1"
    }
  }
}

external: External Network {
  class: host_component
  shape: cloud
  label: "Internet\nOther Hosts"
}

host_system.docker_bridge -> host_system.veth_host: bridge port {
  class: veth_pair
}

host_system.veth_host <-> container.container_net.eth0_container: veth pair {
  class: veth_pair
  label: "Virtual Ethernet Pair\n(Kernel tunnel)"
}

host_system.host_net_stack.eth0 <-> external: physical link {
  style.stroke: "#74b9ff"
  style.stroke-width: 2
}

host_system.docker_bridge -> host_system.host_net_stack.routing: NAT/forwarding {
  style.stroke: "#fdcb6e"
  style.stroke-dash: 5
}

container.container_net.eth0_container -> container.container_net.container_routing: default route {
  style.stroke: "#a29bfe"
  style.stroke-dash: 3
}

isolation_note: |md
  **Network Isolation**
  - Container sees only its own interfaces
  - Separate routing tables
  - Host bridge connects namespaces
  - veth pairs tunnel traffic
| {
  shape: page
  class: container_component
  near: bottom-right
}