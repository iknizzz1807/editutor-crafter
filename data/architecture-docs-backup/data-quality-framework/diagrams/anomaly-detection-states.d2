direction: right

# Initial state
init: {
  shape: circle
  style.fill: "#3fb950"
  style.stroke: "#e6edf3"
  label: ""
  style.font-size: 8
}

# States
baseline_learning: Baseline Learning {
  shape: circle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

normal_monitoring: Normal Monitoring {
  shape: circle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

anomaly_detected: Anomaly Detected {
  shape: circle
  style.fill: "#d63031"
  style.stroke: "#e17055"
  style.font-color: "#ffffff"
  style.bold: true
}

alert_state: Alert State {
  shape: circle
  style.fill: "#fdcb6e"
  style.stroke: "#e17055"
  style.font-color: "#2d3436"
  style.bold: true
}

recovery_state: Recovery {
  shape: circle
  style.fill: "#74b9ff"
  style.stroke: "#0984e3"
  style.font-color: "#ffffff"
  style.bold: true
}

final_state: {
  shape: circle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.double-border: true
  label: ""
}

# Transitions
init -> baseline_learning: Start

baseline_learning -> normal_monitoring: Learning complete\n(sufficient data)

baseline_learning -> baseline_learning: Collecting data\n(insufficient samples)

normal_monitoring -> anomaly_detected: Statistical deviation\n(threshold exceeded)

normal_monitoring -> normal_monitoring: Data within\nnormal range

anomaly_detected -> alert_state: Confirm anomaly\n(multiple violations)

anomaly_detected -> normal_monitoring: False positive\n(single outlier)

alert_state -> recovery_state: Anomaly acknowledged\n(operator intervention)

recovery_state -> normal_monitoring: Data normalized\n(back to baseline)

recovery_state -> anomaly_detected: Anomaly persists\n(continued deviation)

alert_state -> alert_state: Escalate alert\n(unacknowledged)

normal_monitoring -> baseline_learning: Retrain model\n(drift detected)

# Edge styling
init -> baseline_learning: {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

baseline_learning -> normal_monitoring: {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

normal_monitoring -> anomaly_detected: {
  style.stroke: "#d63031"
  style.stroke-width: 2
}

anomaly_detected -> alert_state: {
  style.stroke: "#e17055"
  style.stroke-width: 2
}