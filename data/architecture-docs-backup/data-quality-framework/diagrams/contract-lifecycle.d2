title: Contract Lifecycle Management {
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
  near: top-center
}

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  storage: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  critical: {
    style.fill: "#1a1a2e"
    style.stroke: "#d63031"
    style.font-color: "#ffffff"
    style.bold: true
  }
}

contract_definition: Define Contract {
  shape: rectangle
  class: process
}

contract_registration: Register Contract {
  shape: rectangle
  class: process
}

schema_validation: Validate Schema {
  shape: diamond
  class: decision
}

version_check: Check Version Compatibility {
  shape: diamond
  class: decision
}

breaking_change_detection: Detect Breaking Changes {
  shape: diamond
  class: critical
}

contract_storage: Contract Registry {
  shape: cylinder
  class: storage
}

version_storage: Version History {
  shape: cylinder
  class: storage
}

approval_process: Approval Process {
  shape: rectangle
  class: process
}

notification: Send Notifications {
  shape: rectangle
  class: critical
}

contract_deployment: Deploy Contract {
  shape: rectangle
  class: process
}

rollback: Rollback Version {
  shape: rectangle
  class: critical
}

producer_consumer: Producer/Consumer Agreement {
  shape: rectangle
  class: process
}

monitoring: Monitor Contract Usage {
  shape: rectangle
  class: process
}

contract_definition -> contract_registration: Submit
contract_registration -> schema_validation: Validate
schema_validation -> version_check: Valid
schema_validation -> contract_definition: Invalid Schema {
  style.stroke: "#d63031"
}

version_check -> breaking_change_detection: Compatible
version_check -> approval_process: Incompatible Version {
  style.stroke: "#f39c12"
}

breaking_change_detection -> notification: Breaking Changes Found {
  style.stroke: "#d63031"
}
breaking_change_detection -> contract_storage: No Breaking Changes

notification -> approval_process: Alert Consumers
approval_process -> contract_deployment: Approved
approval_process -> rollback: Rejected {
  style.stroke: "#d63031"
}

contract_deployment -> contract_storage: Store
contract_deployment -> version_storage: Version
contract_deployment -> producer_consumer: Establish Agreement

producer_consumer -> monitoring: Track Usage
monitoring -> contract_storage: Usage Data

rollback -> version_storage: Restore Previous
rollback -> notification: Rollback Notice {
  style.stroke: "#d63031"
}

contract_storage -> version_storage: Version History {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}