classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950" 
    style.font-color: "#e6edf3"
  }
  
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  data: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

title: Hunk Formation Process {
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
  near: top-center
}

start: Start {
  shape: circle
  style.fill: "#3fb950"
  label: ""
}

get_edits: Get Next Edit Operation {
  shape: rectangle
  class: process
}

has_current: Has Current Hunk? {
  shape: diamond
  class: decision
}

within_context: Within Context Distance? {
  shape: diamond
  class: decision
}

add_to_hunk: Add Edit to Current Hunk {
  shape: rectangle
  class: process
}

finalize_hunk: Finalize Current Hunk {
  shape: rectangle
  class: process
}

create_hunk: Create New Hunk {
  shape: rectangle
  class: process
}

add_context: Add Context Lines {
  shape: rectangle
  class: process
}

more_edits: More Edit Operations? {
  shape: diamond
  class: decision
}

output_hunk: Output Hunk {
  shape: rectangle
  class: process
}

end: End {
  shape: circle
  style.fill: "#e74c3c"
  style.double-border: true
  label: ""
}

current_hunk: Current Hunk {
  shape: page
  class: data
}

context_buffer: Context Lines Buffer {
  shape: page
  class: data
}

start -> get_edits

get_edits -> has_current

has_current -> create_hunk: No
has_current -> within_context: Yes

within_context -> add_to_hunk: Yes (â‰¤ 3 lines apart)
within_context -> finalize_hunk: No (> 3 lines apart)

add_to_hunk -> add_context
create_hunk -> add_to_hunk

add_context -> more_edits

finalize_hunk -> output_hunk
finalize_hunk -> create_hunk

more_edits -> get_edits: Yes
more_edits -> finalize_hunk: No

output_hunk -> more_edits

finalize_hunk -> end: No more hunks

add_to_hunk -> current_hunk: updates
add_context -> context_buffer: manages
create_hunk -> current_hunk: creates