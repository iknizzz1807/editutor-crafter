classes: {
  container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
  }
  
  node: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  client: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  protocol: {
    style.fill: "#2d3748"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-dash: 3
  }
}

title: System Architecture Overview {
  near: top-center
  style.font-size: 24
  style.bold: true
  style.font-color: "#3fb950"
}

external: External Clients {
  class: container
  
  client1: Web App {
    class: client
    shape: rectangle
  }
  
  client2: Mobile App {
    class: client
    shape: rectangle
  }
  
  client3: Service A {
    class: client
    shape: rectangle
  }
}

cluster: Distributed Cache Cluster {
  class: container
  
  router: Client Router {
    class: node
    shape: rectangle
  }
  
  ring: Hash Ring {
    class: node
    shape: circle
  }
  
  nodes: Cache Nodes {
    class: container
    
    node1: Cache Node 1 {
      class: node
      shape: cylinder
    }
    
    node2: Cache Node 2 {
      class: node
      shape: cylinder
    }
    
    node3: Cache Node 3 {
      class: node
      shape: cylinder
    }
  }
  
  gossip: Gossip Protocol {
    class: protocol
    shape: hexagon
  }
  
  router -> ring: lookup key
  ring -> nodes.node1: route request
  ring -> nodes.node2: route request
  ring -> nodes.node3: route request
  
  gossip <-> nodes.node1: health & membership
  gossip <-> nodes.node2: health & membership  
  gossip <-> nodes.node3: health & membership
  
  gossip -> ring: update membership
}

external.client1 -> cluster.router: cache requests
external.client2 -> cluster.router: cache requests
external.client3 -> cluster.router: cache requests

cluster.router -> external.client1: responses
cluster.router -> external.client2: responses
cluster.router -> external.client3: responses