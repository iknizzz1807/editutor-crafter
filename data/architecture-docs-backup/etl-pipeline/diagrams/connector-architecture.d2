title: Connector Architecture {
  near: top-center
  style.font-size: 24
  style.bold: true
  style.font-color: "#e6edf3"
}

classes: {
  container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  abstract: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
    style.italic: true
  }
  
  concrete: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  pipeline: {
    style.fill: "#2d1b69"
    style.stroke: "#f39c12"
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

core: Core Abstractions {
  class: container
  
  base_connector: BaseConnector {
    shape: class
    class: abstract
    - "source_config: Config"
    - "connection: Connection"
    + "connect(): void"
    + "extract(): DataStream"
    + "validate_schema(): bool"
    + "get_metadata(): Metadata"
  }
  
  data_source: DataSource {
    shape: class
    class: abstract
    - "schema: Schema"
    - "last_modified: DateTime"
    + "read_batch(size: int): Iterator[Record]"
    + "supports_streaming(): bool"
    + "get_statistics(): Stats"
  }
}

implementations: Connector Implementations {
  class: container
  
  db_connector: DatabaseConnector {
    shape: class
    class: concrete
    - "connection_string: string"
    - "query: string"
    - "batch_size: int"
    + "execute_query(): ResultSet"
    + "handle_pagination(): void"
    + "manage_transactions(): void"
  }
  
  api_connector: APIConnector {
    shape: class
    class: concrete
    - "endpoint_url: string"
    - "auth_token: string"
    - "rate_limits: RateLimit"
    + "make_request(): Response"
    + "handle_retries(): void"
    + "parse_response(): Record[]"
  }
  
  file_connector: FileConnector {
    shape: class
    class: concrete
    - "file_path: string"
    - "format: FileFormat"
    - "compression: CompressionType"
    + "open_file(): FileHandle"
    + "parse_format(): Record[]"
    + "handle_compression(): void"
  }
}

pipeline: Data Transformation Pipeline {
  class: pipeline
  
  extractor: DataExtractor {
    shape: class
    class: pipeline
    - "connector: BaseConnector"
    - "extraction_mode: Mode"
    + "pull_data(): DataBatch"
    + "monitor_progress(): void"
  }
  
  transformer: DataTransformer {
    shape: class
    class: pipeline
    - "transformation_rules: Rule[]"
    - "schema_mapper: SchemaMapper"
    + "apply_transforms(data: DataBatch): DataBatch"
    + "validate_output(): bool"
  }
  
  loader: DataLoader {
    shape: class
    class: pipeline
    - "target_connector: BaseConnector"
    - "load_strategy: LoadStrategy"
    + "write_batch(data: DataBatch): void"
    + "handle_conflicts(): void"
  }
}

registry: Connector Registry {
  class: container
  
  factory: ConnectorFactory {
    shape: class
    class: concrete
    - "registered_types: Map<string, Class>"
    + "create_connector(type: string): BaseConnector"
    + "register_type(name: string, cls: Class): void"
  }
  
  config_manager: ConfigurationManager {
    shape: class
    class: concrete
    - "config_schemas: Map<string, Schema>"
    + "validate_config(config: Config): bool"
    + "load_from_file(path: string): Config"
  }
}

core.base_connector -> implementations.db_connector: implements
core.base_connector -> implementations.api_connector: implements  
core.base_connector -> implementations.file_connector: implements

core.data_source -> implementations.db_connector: uses
core.data_source -> implementations.api_connector: uses
core.data_source -> implementations.file_connector: uses

registry.factory -> core.base_connector: creates
registry.factory -> implementations.db_connector: instantiates
registry.factory -> implementations.api_connector: instantiates
registry.factory -> implementations.file_connector: instantiates

pipeline.extractor -> core.base_connector: uses
pipeline.transformer -> pipeline.extractor: processes from
pipeline.loader -> pipeline.transformer: loads from

registry.config_manager -> core.base_connector: configures
registry.config_manager -> pipeline.extractor: configures