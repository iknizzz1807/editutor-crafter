classes: {
  error_node: {
    style.fill: "#d63031"
    style.font-color: "#ffffff"
    style.stroke: "#e17055"
    style.bold: true
  }
  detection_node: {
    style.fill: "#fdcb6e"
    style.font-color: "#2d3436"
    style.stroke: "#e17055"
    style.bold: true
  }
  recovery_node: {
    style.fill: "#00b894"
    style.font-color: "#ffffff"
    style.stroke: "#3fb950"
    style.bold: true
  }
  process_node: {
    style.fill: "#1a1a2e"
    style.font-color: "#e6edf3"
    style.stroke: "#3fb950"
  }
}

filesystem_operations: Filesystem Operations {
  class: process_node
}

error_detection: Error Detection Layer {
  class: detection_node
}

filesystem_operations -> error_detection: Monitor operations

error_types: Error Classification {
  io_errors: I/O Errors {
    class: error_node
    shape: diamond
  }
  corruption_errors: Data Corruption {
    class: error_node
    shape: diamond
  }
  resource_errors: Resource Exhaustion {
    class: error_node
    shape: diamond
  }
}

error_detection -> error_types.io_errors: Detect I/O failures
error_detection -> error_types.corruption_errors: Detect corruption
error_detection -> error_types.resource_errors: Check resources

io_recovery: I/O Error Recovery {
  retry_mechanism: Retry with Backoff {
    class: recovery_node
  }
  bad_block_marking: Mark Bad Blocks {
    class: recovery_node
  }
  alternate_path: Use Alternate I/O Path {
    class: recovery_node
  }
}

corruption_recovery: Corruption Recovery {
  journal_replay: Journal Replay {
    class: recovery_node
  }
  backup_restore: Restore from Backup {
    class: recovery_node
  }
  fsck_repair: Run Filesystem Check {
    class: recovery_node
  }
}

resource_recovery: Resource Recovery {
  cleanup_cache: Free Cache Memory {
    class: recovery_node
  }
  garbage_collect: Garbage Collection {
    class: recovery_node
  }
  emergency_readonly: Switch to Read-Only {
    class: recovery_node
  }
}

error_types.io_errors -> io_recovery.retry_mechanism: Transient errors
error_types.io_errors -> io_recovery.bad_block_marking: Permanent errors
error_types.io_errors -> io_recovery.alternate_path: Hardware failure

error_types.corruption_errors -> corruption_recovery.journal_replay: Minor corruption
error_types.corruption_errors -> corruption_recovery.backup_restore: Major corruption
error_types.corruption_errors -> corruption_recovery.fsck_repair: Structural damage

error_types.resource_errors -> resource_recovery.cleanup_cache: Memory pressure
error_types.resource_errors -> resource_recovery.garbage_collect: Disk full
error_types.resource_errors -> resource_recovery.emergency_readonly: Critical shortage

recovery_success: Recovery Successful {
  class: recovery_node
  shape: oval
}

recovery_failure: Recovery Failed {
  class: error_node
  shape: oval
}

io_recovery.retry_mechanism -> recovery_success: Success
io_recovery.bad_block_marking -> recovery_success: Isolated
io_recovery.alternate_path -> recovery_success: Bypassed

corruption_recovery.journal_replay -> recovery_success: Restored
corruption_recovery.backup_restore -> recovery_success: Recovered
corruption_recovery.fsck_repair -> recovery_success: Repaired

resource_recovery.cleanup_cache -> recovery_success: Freed
resource_recovery.garbage_collect -> recovery_success: Space available
resource_recovery.emergency_readonly -> recovery_success: Protected

io_recovery.retry_mechanism -> recovery_failure: Max retries exceeded
corruption_recovery.backup_restore -> recovery_failure: No backup available
corruption_recovery.fsck_repair -> recovery_failure: Irreparable damage
resource_recovery.emergency_readonly -> recovery_failure: Critical system state

error_logging: Error Logging & Reporting {
  class: process_node
}

recovery_success -> error_logging: Log recovery
recovery_failure -> error_logging: Log failure

filesystem_operations <- recovery_success: Resume operations
filesystem_operations <- recovery_failure: Abort/Degrade