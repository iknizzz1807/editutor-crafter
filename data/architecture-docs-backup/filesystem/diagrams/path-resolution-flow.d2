title: Path Resolution Algorithm

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  success: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  error: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
  }
}

start: Start {
  shape: circle
  class: success
}

parse: Parse Path\nInto Components {
  class: process
}

init_current: Set Current Dir\nto Root Inode {
  class: process
}

check_components: More Components\nto Process? {
  shape: diamond
  class: decision
}

get_component: Get Next\nComponent {
  class: process
}

check_dot: Component = "."? {
  shape: diamond
  class: decision
}

check_dotdot: Component = ".."? {
  shape: diamond
  class: decision
}

handle_dotdot: Set Current Dir\nto Parent Inode {
  class: process
}

read_dir: Read Current\nDirectory {
  class: process
}

lookup: Lookup Component\nin Directory {
  class: process
}

found: Component\nFound? {
  shape: diamond
  class: decision
}

update_current: Update Current Dir\nto Found Inode {
  class: process
}

return_target: Return Target\nInode {
  class: success
}

error_not_found: Error:\nComponent Not Found {
  class: error
}

error_not_dir: Error:\nNot a Directory {
  class: error
}

start -> parse
parse -> init_current
init_current -> check_components

check_components -> get_component: Yes
check_components -> return_target: No

get_component -> check_dot

check_dot -> check_components: Yes (skip)
check_dot -> check_dotdot: No

check_dotdot -> handle_dotdot: Yes
check_dotdot -> read_dir: No

handle_dotdot -> check_components

read_dir -> lookup
lookup -> found

found -> update_current: Yes
found -> error_not_found: No

update_current -> check_components