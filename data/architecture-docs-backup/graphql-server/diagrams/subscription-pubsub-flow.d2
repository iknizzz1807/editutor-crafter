shape: sequence_diagram

classes: {
  dark_theme: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  important: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  event: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

publisher: Event Publisher {
  class: dark_theme
}

topic_router: Topic Router {
  class: important
}

subscription_resolver: Subscription Resolver Chain {
  class: important
}

filter_engine: Event Filter Engine {
  class: dark_theme
}

subscriber_a: Active Subscriber A {
  class: event
}

subscriber_b: Active Subscriber B {
  class: event
}

subscriber_c: Inactive Subscriber C {
  class: event
}

publisher -> topic_router: 1. Publish Event (orderStatusChanged)
topic_router -> subscription_resolver: 2. Route to subscription resolvers
subscription_resolver -> filter_engine: 3. Apply GraphQL field resolvers
filter_engine -> filter_engine: 4. Check subscription filters & permissions
filter_engine -> subscriber_a: 5. Deliver event (matches filter: userId=123)
filter_engine -> subscriber_b: 6. Deliver event (matches filter: orderId=456)
filter_engine -> subscriber_c: 7. Skip delivery (filter mismatch)
subscriber_a -> subscription_resolver: 8. Acknowledge receipt
subscriber_b -> subscription_resolver: 9. Acknowledge receipt
subscription_resolver -> topic_router: 10. Update delivery metrics