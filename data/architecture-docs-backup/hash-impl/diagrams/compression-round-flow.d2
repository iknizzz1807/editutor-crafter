title: Single Compression Round Flow {
  near: top-center
  style.font-size: 24
  style.bold: true
  style.font-color: "#e6edf3"
}

classes: {
  variable: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  function: {
    style.fill: "#1a1a2e"
    style.stroke: "#ffeaa7"
    style.font-color: "#e6edf3"
    style.bold: true
    shape: diamond
  }
  temp: {
    style.fill: "#2d3436"
    style.stroke: "#74b9ff"
    style.font-color: "#e6edf3"
  }
  input: {
    style.fill: "#0f3460"
    style.stroke: "#fd79a8"
    style.font-color: "#e6edf3"
  }
}

# Input variables at start of round
a_input: "a" { class: variable }
b_input: "b" { class: variable }
c_input: "c" { class: variable }
d_input: "d" { class: variable }
e_input: "e" { class: variable }
f_input: "f" { class: variable }
g_input: "g" { class: variable }
h_input: "h" { class: variable }

# Schedule word and constant
w_k: "W[t] + K[t]" { class: input }

# Round functions
ch_func: "Ch(e,f,g)" { class: function }
maj_func: "Maj(a,b,c)" { class: function }
sigma1_func: "Σ₁(e)" { class: function }
sigma0_func: "Σ₀(a)" { class: function }

# Temporary calculations
temp1: "T₁" { class: temp }
temp2: "T₂" { class: temp }

# Updated variables
a_new: "a (new)" { class: variable }
b_new: "b (new)" { class: variable }
c_new: "c (new)" { class: variable }
d_new: "d (new)" { class: variable }
e_new: "e (new)" { class: variable }
f_new: "f (new)" { class: variable }
g_new: "g (new)" { class: variable }
h_new: "h (new)" { class: variable }

# Flow for T1 calculation
e_input -> sigma1_func
e_input -> ch_func
f_input -> ch_func
g_input -> ch_func
h_input -> temp1: "+"
sigma1_func -> temp1: "+"
ch_func -> temp1: "+"
w_k -> temp1: "+"

# Flow for T2 calculation
a_input -> sigma0_func
a_input -> maj_func
b_input -> maj_func
c_input -> maj_func
sigma0_func -> temp2: "+"
maj_func -> temp2: "+"

# Variable updates
temp1 -> a_new: "T₁ + T₂"
temp2 -> a_new: "T₁ + T₂"
a_input -> b_new: "="
b_input -> c_new: "="
c_input -> d_new: "="
d_input -> e_new: "T₁ + d"
temp1 -> e_new: "T₁ + d"
e_input -> f_new: "="
f_input -> g_new: "="
g_input -> h_new: "="

# Calculation labels
calc1: "T₁ = h + Σ₁(e) + Ch(e,f,g) + K[t] + W[t]" {
  shape: page
  style.fill: "#2d3436"
  style.stroke: "#74b9ff"
  style.font-color: "#e6edf3"
  near: bottom-left
}

calc2: "T₂ = Σ₀(a) + Maj(a,b,c)" {
  shape: page
  style.fill: "#2d3436"
  style.stroke: "#74b9ff"
  style.font-color: "#e6edf3"
  near: bottom-right
}