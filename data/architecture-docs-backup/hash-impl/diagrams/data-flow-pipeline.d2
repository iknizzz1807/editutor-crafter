title: "End-to-End Data Flow Pipeline" {
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
}

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  data: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  output: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
    style.double-border: true
  }
}

input: "Input String" {
  shape: oval
  class: data
}

padding: "Message Padding" {
  class: process
}

padded_msg: "Padded Message" {
  shape: page
  class: data
}

block_check: "Multiple Blocks?" {
  shape: diamond
  class: decision
}

block_parser: "Block Parser\n(512-bit chunks)" {
  class: process
}

blocks: "Message Blocks" {
  shape: cylinder
  class: data
}

schedule_gen: "Schedule Generation\n(W[0] to W[63])" {
  class: process
}

schedule: "Message Schedule" {
  shape: page
  class: data
}

compression: "Compression Rounds\n(64 iterations)" {
  class: process
}

hash_values: "Hash Values\n(H[0] to H[7])" {
  shape: cylinder
  class: data
}

more_blocks: "More Blocks?" {
  shape: diamond
  class: decision
}

final_hash: "Final Hash Output\n(256-bit)" {
  shape: hexagon
  class: output
}

input -> padding: "raw message"
padding -> padded_msg: "add padding + length"
padded_msg -> block_check: "check size"
block_check -> block_parser: "yes"
block_check -> block_parser: "no" {
  style.stroke-dash: 3
}
block_parser -> blocks: "512-bit blocks"
blocks -> schedule_gen: "current block"
schedule_gen -> schedule: "word schedule"
schedule -> compression: "W[0..63]"
compression -> hash_values: "update H values"
hash_values -> more_blocks: "check remaining"
more_blocks -> blocks: "yes" {
  style.stroke: "#3fb950"
  style.bold: true
}
more_blocks -> final_hash: "no"

preprocessing: "Message Preprocessing" {
  shape: rectangle
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.opacity: 0.3
}

processing: "Cryptographic Processing" {
  shape: rectangle
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.opacity: 0.3
}