title: Hash State Evolution {
  near: top-center
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
}

classes: {
  state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  initial_state: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    style.font-color: "#000000"
    style.bold: true
  }
  final_state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
    style.double-border: true
  }
  transition: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  action: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-dash: 3
  }
}

init: {
  shape: circle
  class: initial_state
  label: ""
}

initial: Initial State {
  shape: circle
  class: state
}

processing: Processing Block {
  shape: circle
  class: state
}

complete: Block Complete {
  shape: circle
  class: state
}

final: Final Hash {
  shape: circle
  class: final_state
}

init_hash: Initialize H₀-H₇ {
  shape: rectangle
  class: action
}

compression: 64 Round Compression {
  shape: rectangle
  class: action
}

update_state: Update Hash State {
  shape: rectangle
  class: action
}

output_hash: Output 256-bit Hash {
  shape: rectangle
  class: action
}

init -> initial: {
  class: transition
}

initial -> init_hash: Load next message block {
  class: transition
}

init_hash -> processing: Block ready {
  class: transition
}

processing -> compression: Start compression {
  class: transition
}

compression -> complete: 64 rounds complete {
  class: transition
}

complete -> update_state: Add to previous state {
  class: transition
}

update_state -> processing: More blocks? {
  class: transition
  style.stroke-dash: 5
}

update_state -> final: All blocks processed {
  class: transition
}

final -> output_hash: Generate final hash {
  class: transition
}

note: |md
  **Actions:**
  - **Initialize**: Set H₀-H₇ constants
  - **Compression**: 64 rounds of Choice, Majority, Sigma
  - **Update**: Add compressed result to hash state
  - **Output**: Concatenate final H₀-H₇ values
| {
  shape: page
  near: bottom-right
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}