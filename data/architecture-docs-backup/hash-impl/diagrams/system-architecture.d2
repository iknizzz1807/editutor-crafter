title: SHA-256 System Architecture

classes: {
  component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  data: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  flow: {
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

input_msg: "Input Message\n(arbitrary length)" {
  shape: page
  class: data
}

preprocessor: Preprocessor {
  shape: rectangle
  class: component
  "padding": Message Padding
  "parsing": Block Parsing
  "validation": Length Validation
}

blocks: "512-bit Message Blocks" {
  shape: cylinder
  class: data
}

scheduler: "Message Scheduler" {
  shape: rectangle
  class: component
  "expansion": Word Expansion
  "generation": Schedule Generation
  "optimization": "W[0..63] Creation"
}

schedule: "64-word Message Schedule\n(W[0] to W[63])" {
  shape: queue
  class: data
}

compression: "Compression Function" {
  shape: rectangle
  class: component
  "rounds": 64 Hash Rounds
  "operations": Bitwise Operations
  "state": State Updates
}

hash_state: "Hash State\n(8 Ã— 32-bit words)" {
  shape: hexagon
  class: data
}

output_formatter: "Output Formatter" {
  shape: rectangle
  class: component
  "concatenation": State Concatenation
  "formatting": Hex Formatting
  "finalization": Result Generation
}

final_output: "Final SHA-256 Hash\n(256-bit)" {
  shape: oval
  class: data
  style.stroke: "#3fb950"
  style.stroke-width: 3
}

input_msg -> preprocessor: "raw message" {
  class: flow
}

preprocessor -> blocks: "padded & parsed" {
  class: flow
}

blocks -> scheduler: "512-bit chunks" {
  class: flow
}

scheduler -> schedule: "expanded words" {
  class: flow
}

schedule -> compression: "W[0..63]" {
  class: flow
}

compression -> hash_state: "updated state" {
  class: flow
}

hash_state -> compression: "current state" {
  class: flow
  style.stroke-dash: 3
}

compression -> output_formatter: "final state" {
  class: flow
}

output_formatter -> final_output: "formatted hash" {
  class: flow
}

note: |md
  **SHA-256 Data Flow:**
  1. Input padded to 512-bit blocks
  2. Each block expanded to 64 words
  3. 64 compression rounds per block
  4. Final state formatted as 256-bit hash
| {
  shape: page
  near: bottom-right
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}