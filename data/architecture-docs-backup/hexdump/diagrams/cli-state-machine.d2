direction: right

classes: {
  state: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    shape: circle
  }
  final_state: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.double-border: true
    shape: circle
  }
  error_state: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    shape: circle
  }
  transition: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  error_transition: {
    style.stroke: "#d63031"
    style.font-color: "#ffffff"
  }
}

init: {
  class: state
  style.fill: "#3fb950"
  label: ""
}

parsing: Parsing Args {
  class: state
}

validating: Validating {
  class: state
}

configuring: Building Config {
  class: state
}

ready: Ready {
  class: final_state
}

help_shown: Help Shown {
  class: final_state
}

error: Error {
  class: error_state
}

init -> parsing: Start {
  class: transition
}

parsing -> parsing: Process flag/option {
  class: transition
}

parsing -> help_shown: --help/-h flag {
  class: transition
}

parsing -> validating: All args processed {
  class: transition
}

parsing -> error: Invalid syntax {
  class: error_transition
}

parsing -> error: Unknown option {
  class: error_transition
}

validating -> configuring: All valid {
  class: transition
}

validating -> error: Invalid offset {
  class: error_transition
}

validating -> error: Invalid length {
  class: error_transition
}

validating -> error: Conflicting formats {
  class: error_transition
}

validating -> error: Missing file {
  class: error_transition
}

configuring -> ready: Config complete {
  class: transition
}

configuring -> error: Config failed {
  class: error_transition
}

notes: |md
  **Key Transitions:**
  - Parse each argument sequentially
  - Validate semantic correctness
  - Build final configuration object
  - Handle help requests immediately
  - Error states are terminal
| {
  shape: page
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  near: bottom-right
}