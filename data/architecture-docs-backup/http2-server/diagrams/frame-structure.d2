http2_frame: HTTP/2 Frame Structure {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

frame_header: Frame Header (9 bytes) {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  length_field: Length Field {
    shape: class
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    - "length: 24 bits"
    - "max_size: 16777215 bytes"
  }
  
  type_field: Type Field {
    shape: class
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    - "type: 8 bits"
    - "DATA: 0x0"
    - "HEADERS: 0x1"
    - "SETTINGS: 0x4"
  }
  
  flags_field: Flags Field {
    shape: class
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    - "flags: 8 bits"
    - "END_STREAM: 0x1"
    - "END_HEADERS: 0x4"
    - "PADDED: 0x8"
  }
  
  stream_id: Stream ID {
    shape: class
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    - "stream_id: 31 bits"
    - "reserved: 1 bit"
    - "range: 1 to 2^31-1"
  }
}

data_frame: DATA Frame {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  data_payload: Payload {
    shape: class
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    - "pad_length: 8 bits (optional)"
    - "data: variable length"
    - "padding: variable length"
  }
}

headers_frame: HEADERS Frame {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  headers_payload: Payload {
    shape: class
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    - "pad_length: 8 bits (optional)"
    - "stream_dependency: 32 bits (optional)"
    - "weight: 8 bits (optional)"
    - "header_block_fragment: variable"
    - "padding: variable length"
  }
}

settings_frame: SETTINGS Frame {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  settings_payload: Payload {
    shape: class
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    - "parameter_id: 16 bits"
    - "parameter_value: 32 bits"
    - "HEADER_TABLE_SIZE: 0x1"
    - "MAX_CONCURRENT_STREAMS: 0x3"
    - "INITIAL_WINDOW_SIZE: 0x4"
  }
}

http2_frame -> frame_header: contains
frame_header -> length_field
frame_header -> type_field
frame_header -> flags_field
frame_header -> stream_id

http2_frame -> data_frame: when type=0x0
http2_frame -> headers_frame: when type=0x1
http2_frame -> settings_frame: when type=0x4

data_frame -> data_payload
headers_frame -> headers_payload
settings_frame -> settings_payload

classes: {
  arrow_style: {
    style.stroke: "#8b949e"
    style.font-color: "#8b949e"
  }
}

http2_frame -> frame_header: { class: arrow_style }
http2_frame -> data_frame: { class: arrow_style }
http2_frame -> headers_frame: { class: arrow_style }
http2_frame -> settings_frame: { class: arrow_style }