title: HPACK Header Compression Process

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  table: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  output: {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

start: Start {
  shape: circle
  class: process
}

input: Header Field\n(name, value) {
  class: process
}

static_lookup: Static Table\nLookup {
  shape: diamond
  class: decision
}

static_found: Found in\nStatic Table? {
  shape: diamond
  class: decision
}

dynamic_lookup: Dynamic Table\nLookup {
  shape: diamond
  class: decision
}

dynamic_found: Found in\nDynamic Table? {
  shape: diamond
  class: decision
}

literal_index: Literal with\nIncremental Indexing {
  class: process
}

literal_no_index: Literal without\nIndexing {
  class: process
}

never_index: Literal never\nIndexed {
  class: process
}

add_dynamic: Add to\nDynamic Table {
  class: table
}

huffman_check: Use Huffman\nEncoding? {
  shape: diamond
  class: decision
}

huffman_encode: Huffman Encode\nString Value {
  class: process
}

integer_encode: Variable Length\nInteger Encoding {
  class: process
}

output_indexed: Output:\nIndexed Header {
  class: output
}

output_literal: Output:\nLiteral Header {
  class: output
}

start -> input
input -> static_lookup
static_lookup -> static_found
static_found -> output_indexed: Yes
static_found -> dynamic_lookup: No

dynamic_lookup -> dynamic_found
dynamic_found -> output_indexed: Yes
dynamic_found -> literal_index: No

literal_index -> add_dynamic
add_dynamic -> huffman_check

literal_no_index -> huffman_check
never_index -> huffman_check

huffman_check -> huffman_encode: Yes
huffman_check -> integer_encode: No

huffman_encode -> integer_encode
integer_encode -> output_literal

literal_index -> literal_no_index: Sensitive?
literal_index -> never_index: Security Critical?

static_lookup -> dynamic_lookup: Name only match
dynamic_lookup -> literal_index: Name only match