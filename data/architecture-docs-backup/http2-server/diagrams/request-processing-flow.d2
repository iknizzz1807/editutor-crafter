shape: sequence_diagram

client: Client
server: HTTP/2 Server
frame_parser: Frame Parser
hpack: HPACK Decompressor
stream_manager: Stream Manager
request_handler: Request Handler
response_generator: Response Generator

client -> server: TCP connection with HTTP/2 data
server -> frame_parser: Raw bytes
frame_parser -> frame_parser: Parse binary frame header
frame_parser -> frame_parser: Extract frame type, flags, stream ID
frame_parser -> hpack: HEADERS frame payload
hpack -> hpack: Decompress using dynamic table
hpack -> hpack: Reconstruct HTTP headers
hpack -> stream_manager: Decompressed headers + stream ID
stream_manager -> stream_manager: Lookup/create stream context
stream_manager -> stream_manager: Update stream state
stream_manager -> request_handler: Complete HTTP request
request_handler -> request_handler: Route to application logic
request_handler -> request_handler: Process business logic
request_handler -> response_generator: Response data + headers
response_generator -> hpack: Response headers for compression
hpack -> hpack: Compress headers using HPACK
hpack -> response_generator: Compressed header block
response_generator -> frame_parser: HEADERS frame + DATA frames
frame_parser -> frame_parser: Add binary frame headers
frame_parser -> server: Complete HTTP/2 frames
server -> client: Multiplexed response frames

classes: {
  server_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  processing_style: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

server.class: server_style
frame_parser.class: processing_style
hpack.class: processing_style
stream_manager.class: processing_style
request_handler.class: processing_style
response_generator.class: processing_style