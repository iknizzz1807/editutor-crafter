title: System Architecture Overview {
  near: top-center
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
}

classes: {
  container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
  }
  service: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  storage: {
    style.fill: "#0f3460"
    style.stroke: "#58a6ff"
    style.font-color: "#e6edf3"
  }
  external: {
    style.fill: "#21262d"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
    style.stroke-dash: 3
  }
}

external_layer: External Interfaces {
  class: container
  
  job_api: Job Submission API {
    class: external
    shape: rectangle
  }
  
  monitoring: Monitoring Dashboard {
    class: external
    shape: rectangle
  }
}

core_system: Distributed Job Scheduler {
  class: container
  
  scheduler: Scheduler Service {
    class: service
    shape: rectangle
  }
  
  job_queue: Job Queue {
    class: storage
    shape: queue
  }
  
  worker_pool: Worker Pool {
    class: container
    
    worker1: Worker 1 {
      class: service
      shape: rectangle
    }
    
    worker2: Worker 2 {
      class: service
      shape: rectangle
    }
    
    worker3: Worker N {
      class: service
      shape: rectangle
    }
  }
}

coordination: Coordination Layer {
  class: container
  
  etcd: etcd Cluster {
    class: storage
    shape: cylinder
  }
  
  redis: Redis Cache {
    class: storage
    shape: cylinder
  }
}

# External to Core connections
external_layer.job_api -> core_system.scheduler: Submit Jobs {
  style.stroke: "#8b949e"
}

core_system.scheduler -> external_layer.monitoring: Metrics & Status {
  style.stroke: "#8b949e"
}

# Core system internal connections
core_system.scheduler -> core_system.job_queue: Enqueue Jobs {
  style.stroke: "#3fb950"
}

core_system.job_queue -> core_system.worker_pool.worker1: Pull Jobs {
  style.stroke: "#58a6ff"
}

core_system.job_queue -> core_system.worker_pool.worker2: Pull Jobs {
  style.stroke: "#58a6ff"
}

core_system.job_queue -> core_system.worker_pool.worker3: Pull Jobs {
  style.stroke: "#58a6ff"
}

# Coordination layer connections
core_system.scheduler <-> coordination.etcd: Leader Election\nCluster State {
  style.stroke: "#f85149"
}

core_system.worker_pool.worker1 <-> coordination.etcd: Register\nHeartbeat {
  style.stroke: "#f85149"
}

core_system.worker_pool.worker2 <-> coordination.etcd: Register\nHeartbeat {
  style.stroke: "#f85149"
}

core_system.worker_pool.worker3 <-> coordination.etcd: Register\nHeartbeat {
  style.stroke: "#f85149"
}

core_system.scheduler <-> coordination.redis: Job State\nRetry Logic {
  style.stroke: "#ff7b72"
}

external_layer.monitoring -> coordination.etcd: Cluster Health {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

external_layer.monitoring -> coordination.redis: Job Statistics {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}