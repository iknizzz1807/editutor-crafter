direction: right

title: JSON Parser System Architecture {
  near: top-center
  style.font-size: 24
  style.bold: true
  style.font-color: "#e6edf3"
}

classes: {
  container_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
  }
  component_style: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  data_style: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
    style.stroke-dash: 3
  }
  flow_style: {
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
  }
}

input: JSON String Input {
  shape: page
  class: data_style
}

tokenizer: Tokenizer {
  class: container_style
  
  lexer: Lexical Analyzer {
    class: component_style
  }
  
  scanner: Character Scanner {
    class: component_style
  }
  
  tokens: Token Stream {
    shape: queue
    class: data_style
  }
  
  scanner -> lexer: characters
  lexer -> tokens: emit tokens
}

parser: Parser {
  class: container_style
  
  descent: Recursive Descent Engine {
    class: component_style
  }
  
  grammar: Grammar Rules {
    class: component_style
  }
  
  ast: AST Builder {
    class: component_style
  }
  
  grammar -> descent: parse rules
  descent -> ast: build nodes
}

error_handler: Error Handler {
  class: container_style
  
  validator: Syntax Validator {
    class: component_style
  }
  
  reporter: Error Reporter {
    class: component_style
  }
  
  validator -> reporter: validation errors
}

output: Native Data Structures {
  shape: cylinder
  class: data_style
}

input -> tokenizer.scanner: raw JSON {
  class: flow_style
}

tokenizer.tokens -> parser.descent: token stream {
  class: flow_style
}

parser.ast -> output: structured data {
  class: flow_style
}

tokenizer.lexer <-> error_handler.validator: lexical errors {
  style.stroke: "#d63031"
  style.font-color: "#d63031"
  style.stroke-dash: 5
}

parser.descent <-> error_handler.validator: syntax errors {
  style.stroke: "#d63031"
  style.font-color: "#d63031"
  style.stroke-dash: 5
}

error_handler.reporter -> output: error messages {
  style.stroke: "#d63031"
  style.font-color: "#d63031"
  style.stroke-width: 2
}