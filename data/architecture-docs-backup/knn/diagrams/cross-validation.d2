title: Cross-Validation State Machine

classes: {
  state_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  initial_state: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    style.font-color: "#ffffff"
  }
  
  final_state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.double-border: true
    style.bold: true
  }
  
  transition: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

init: {
  shape: circle
  label: ""
  class: initial_state
}

data_split: Data Splitting {
  shape: circle
  class: state_style
}

fold_setup: Fold Setup {
  shape: circle
  class: state_style
}

training: Model Training {
  shape: circle
  class: state_style
}

validation: Validation {
  shape: circle
  class: state_style
}

fold_complete: Fold Complete {
  shape: circle
  class: state_style
}

aggregation: Results Aggregation {
  shape: circle
  class: state_style
}

complete: {
  shape: circle
  label: "Complete"
  class: final_state
}

init -> data_split: Start CV {
  class: transition
}

data_split -> fold_setup: K folds created {
  class: transition
}

fold_setup -> training: Train on K-1 folds {
  class: transition
}

training -> validation: Test on validation fold {
  class: transition
}

validation -> fold_complete: Record metrics {
  class: transition
}

fold_complete -> fold_setup: "Next fold [i < K]" {
  class: transition
}

fold_complete -> aggregation: "All folds done [i = K]" {
  class: transition
}

aggregation -> complete: Final score computed {
  class: transition
}

cv_note: {
  shape: page
  label: |md
    ## K-Fold Cross-Validation Process
    
    **Data Splitting**: Divide dataset into K equal folds
    
    **Iteration**: For each fold i (1 to K):
    - Use folds 1..i-1, i+1..K for training
    - Use fold i for validation
    - Record performance metrics
    
    **Aggregation**: Compute mean Â± std of metrics
  |
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  near: top-center
}