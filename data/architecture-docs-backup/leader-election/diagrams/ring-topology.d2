title: Ring Election Topology

classes: {
  node_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  failed_node: {
    style.fill: "#2d1b1b"
    style.stroke: "#d63031"
    style.font-color: "#ffb3b3"
    style.stroke-dash: 5
  }
  token_style: {
    style.fill: "#3fb950"
    style.font-color: "#1a1a2e"
    style.bold: true
  }
  bypass_style: {
    style.stroke: "#e17055"
    style.stroke-dash: 3
    style.stroke-width: 2
  }
}

ring: Ring Election Network {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  
  node1: "Node 1\n(ID: 1)\nElection Initiator" {
    class: node_style
    shape: circle
  }
  
  node3: "Node 3\n(ID: 3)\nActive" {
    class: node_style
    shape: circle
  }
  
  node5: "Node 5\n(ID: 5)\nFAILED" {
    class: failed_node
    shape: circle
  }
  
  node7: "Node 7\n(ID: 7)\nActive\nCurrent Leader" {
    class: node_style
    shape: circle
    style.double-border: true
  }
  
  token: "Election Token\n[1, 3, 7]\nParticipants List" {
    class: token_style
    shape: hexagon
  }
  
  # Ring connections (logical order by ID)
  node1 -> node3: "Normal flow\nToken passes" {
    style.stroke: "#3fb950"
    style.stroke-width: 2
  }
  
  node3 -> node5: "Node 5 unreachable" {
    style.stroke: "#d63031"
    style.stroke-dash: 5
  }
  
  node3 -> node7: "Bypass failed node" {
    class: bypass_style
  }
  
  node7 -> node1: "Complete circuit\nReturn to initiator" {
    style.stroke: "#3fb950"
    style.stroke-width: 2
  }
  
  # Token position
  token -> node7: "Token currently at\nhighest ID node" {
    style.stroke: "#3fb950"
    style.stroke-width: 3
  }
}

flow_info: Token Flow Process {
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  
  step1: "1. Node 1 initiates election\nCreates token [1]" {
    style.fill: "#1a1a2e"
    style.font-color: "#e6edf3"
    shape: rectangle
  }
  
  step2: "2. Token reaches Node 3\nUpdates to [1, 3]" {
    style.fill: "#1a1a2e"
    style.font-color: "#e6edf3"
    shape: rectangle
  }
  
  step3: "3. Node 5 failed\nToken skipped/bypassed" {
    style.fill: "#2d1b1b"
    style.font-color: "#ffb3b3"
    shape: rectangle
  }
  
  step4: "4. Token reaches Node 7\nUpdates to [1, 3, 7]" {
    style.fill: "#1a1a2e"
    style.font-color: "#e6edf3"
    shape: rectangle
  }
  
  step5: "5. Token returns to Node 1\nNode 7 elected (highest ID)" {
    style.fill: "#3fb950"
    style.font-color: "#1a1a2e"
    style.bold: true
    shape: rectangle
  }
  
  step1 -> step2
  step2 -> step3
  step3 -> step4
  step4 -> step5
}

legend: Algorithm Properties {
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  
  prop1: "• Deterministic: Highest ID wins" {
    style.font-color: "#e6edf3"
    shape: text
  }
  
  prop2: "• Fault-tolerant: Failed nodes bypassed" {
    style.font-color: "#e6edf3"
    shape: text
  }
  
  prop3: "• Single token circulation" {
    style.font-color: "#e6edf3"
    shape: text
  }
  
  prop4: "• O(N) message complexity" {
    style.font-color: "#e6edf3"
    shape: text
  }
}