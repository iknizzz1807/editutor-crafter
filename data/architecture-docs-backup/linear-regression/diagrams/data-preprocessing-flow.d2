title: Data Preprocessing Pipeline

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  error: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
  }
  success: {
    style.fill: "#00b894"
    style.stroke: "#55a3ff"
    style.font-color: "#ffffff"
  }
}

start: Start {
  shape: circle
  class: success
}

load_csv: Load CSV File {
  class: process
}

validate_format: Validate Data Format {
  shape: diamond
  class: decision
}

format_error: Format Error {
  class: error
}

check_missing: Check Missing Values {
  shape: diamond
  class: decision
}

handle_missing: Handle Missing Values {
  class: process
}

missing_error: Too Many Missing Values {
  class: error
}

feature_scaling: Feature Scaling & Normalization {
  class: process
}

validate_scaling: Validate Scaling Results {
  shape: diamond
  class: decision
}

scaling_error: Scaling Error {
  class: error
}

construct_matrix: Construct Feature Matrix {
  class: process
}

validate_matrix: Validate Matrix Dimensions {
  shape: diamond
  class: decision
}

matrix_error: Matrix Construction Error {
  class: error
}

complete: Ready for ML Pipeline {
  shape: circle
  class: success
}

# Main flow
start -> load_csv
load_csv -> validate_format
validate_format -> check_missing: Valid
validate_format -> format_error: Invalid

check_missing -> handle_missing: Has Missing
check_missing -> feature_scaling: No Missing

handle_missing -> missing_error: Too Many Missing
handle_missing -> feature_scaling: Handled

feature_scaling -> validate_scaling
validate_scaling -> scaling_error: Failed
validate_scaling -> construct_matrix: Valid

construct_matrix -> validate_matrix
validate_matrix -> matrix_error: Invalid
validate_matrix -> complete: Valid

# Error recovery paths
format_error -> load_csv: Retry
missing_error -> load_csv: Retry
scaling_error -> feature_scaling: Retry
matrix_error -> construct_matrix: Retry

# Arrow styling
start -> load_csv: {
  style.stroke: "#8b949e"
}
load_csv -> validate_format: {
  style.stroke: "#8b949e"
}
validate_format -> check_missing: {
  style.stroke: "#8b949e"
}
validate_format -> format_error: {
  style.stroke: "#d63031"
}
check_missing -> handle_missing: {
  style.stroke: "#8b949e"
}
check_missing -> feature_scaling: {
  style.stroke: "#8b949e"
}
handle_missing -> missing_error: {
  style.stroke: "#d63031"
}
handle_missing -> feature_scaling: {
  style.stroke: "#8b949e"
}
feature_scaling -> validate_scaling: {
  style.stroke: "#8b949e"
}
validate_scaling -> scaling_error: {
  style.stroke: "#d63031"
}
validate_scaling -> construct_matrix: {
  style.stroke: "#8b949e"
}
construct_matrix -> validate_matrix: {
  style.stroke: "#8b949e"
}
validate_matrix -> matrix_error: {
  style.stroke: "#d63031"
}
validate_matrix -> complete: {
  style.stroke: "#00b894"
}