title: System Architecture Overview

classes: {
  container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  datastore: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  external: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  arrow: {
    style.stroke: "#8b949e"
  }
}

dataset_mgmt: Dataset Management {
  class: container
  test_cases: Test Case Manager
  datasets: Dataset Processor
  validation: Input Validator
  test_cases -> datasets: configure
  validation -> test_cases: validate
}

metrics_engine: Metrics Engine {
  class: container
  scorer: Multi-Metric Scorer
  evaluators: Evaluation Algorithms
  aggregator: Statistical Aggregator
  scorer -> evaluators: execute
  evaluators -> aggregator: results
}

eval_runner: Evaluation Runner {
  class: container
  orchestrator: Test Orchestrator
  executor: Batch Executor
  monitor: Progress Monitor
  orchestrator -> executor: dispatch
  executor -> monitor: status
}

reporting: Reporting {
  class: container
  analyzer: Results Analyzer
  generator: Report Generator
  dashboard: Dashboard API
  analyzer -> generator: insights
  generator -> dashboard: data
}

test_db: Test Cases DB {
  shape: cylinder
  class: datastore
}

results_db: Results DB {
  shape: cylinder
  class: datastore
}

config_store: Configuration Store {
  shape: cylinder
  class: datastore
}

llm_apis: LLM APIs {
  shape: cloud
  class: external
}

external_metrics: External Metric Services {
  shape: cloud
  class: external
}

dataset_mgmt -> test_db: {class: arrow; label: store/retrieve}
dataset_mgmt -> config_store: {class: arrow; label: read config}

metrics_engine -> external_metrics: {class: arrow; label: API calls}

eval_runner -> dataset_mgmt: {class: arrow; label: get test cases}
eval_runner -> metrics_engine: {class: arrow; label: score responses}
eval_runner -> llm_apis: {class: arrow; label: generate responses}
eval_runner -> results_db: {class: arrow; label: store results}

reporting -> results_db: {class: arrow; label: query results}
reporting -> config_store: {class: arrow; label: report configs}