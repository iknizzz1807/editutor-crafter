classes: {
  checkpoint: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  process: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  export: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    style.bold: true
  }
}

checkpoint: Model Checkpoint {
  class: checkpoint
}

perplexity: Calculate Perplexity {
  class: process
}

benchmarks: Task-Specific Benchmarks {
  class: process
}

quality_check: Quality Threshold? {
  shape: diamond
  class: decision
}

adapter_merge: Merge Adapters {
  class: process
}

verification: Quality Verification {
  class: process
}

format_choice: Export Format? {
  shape: diamond
  class: decision
}

hf_export: Export HuggingFace {
  class: export
}

gguf_export: Export GGUF {
  class: export
}

retrain: Retrain Model {
  class: process
  style.fill: "#fdcb6e"
  style.font-color: "#2d3436"
}

checkpoint -> perplexity: Load model
perplexity -> benchmarks: Evaluate performance
benchmarks -> quality_check: Check metrics

quality_check -> adapter_merge: Pass
quality_check -> retrain: Fail {
  style.stroke: "#d63031"
}

adapter_merge -> verification: Merge LoRA weights
verification -> format_choice: Validate output

format_choice -> hf_export: HuggingFace
format_choice -> gguf_export: GGUF

retrain -> checkpoint: Improve training {
  style.stroke: "#d63031"
  style.stroke-dash: 3
}

note: |md
  **Evaluation Metrics:**
  • Perplexity on validation set
  • Task-specific benchmarks
  • Quality threshold validation
  • Format compatibility checks
| {
  shape: page
  style.fill: "#2d3436"
  style.font-color: "#e6edf3"
  near: top-right
}