title: System Component Overview

# Color scheme classes
classes: {
  main_component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  external_dep: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  data_flow: {
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  export_format: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

# External Dependencies
external: External Dependencies {
  huggingface: HuggingFace Models {
    shape: cloud
    class: external_dep
  }
  
  data_sources: Training Data Sources {
    shape: cylinder
    class: external_dep
  }
}

# Main Pipeline Components
pipeline: Fine-tuning Pipeline {
  class: main_component
  
  data_prep: Data Preparation {
    shape: rectangle
    class: main_component
  }
  
  lora_config: LoRA Configuration {
    shape: rectangle
    class: main_component
  }
  
  qlora_quant: QLoRA Quantization {
    shape: rectangle
    class: main_component
  }
  
  training: Training Loop {
    shape: rectangle
    class: main_component
  }
  
  evaluation: Evaluation & Merging {
    shape: rectangle
    class: main_component
  }
}

# Export Formats
exports: Export Formats {
  safetensors: SafeTensors {
    shape: page
    class: export_format
  }
  
  gguf: GGUF {
    shape: page
    class: export_format
  }
  
  pytorch: PyTorch {
    shape: page
    class: export_format
  }
}

# Data Flow Connections
external.data_sources -> pipeline.data_prep: Raw Data {
  class: data_flow
}

external.huggingface -> pipeline.qlora_quant: Base Model {
  class: data_flow
}

pipeline.data_prep -> pipeline.training: Processed Dataset {
  class: data_flow
}

pipeline.lora_config -> pipeline.qlora_quant: LoRA Parameters {
  class: data_flow
}

pipeline.qlora_quant -> pipeline.training: Quantized Model {
  class: data_flow
}

pipeline.training -> pipeline.evaluation: Trained Adapters {
  class: data_flow
}

pipeline.evaluation -> exports.safetensors: Merged Model {
  class: data_flow
}

pipeline.evaluation -> exports.gguf: Quantized Export {
  class: data_flow
}

pipeline.evaluation -> exports.pytorch: Full Precision {
  class: data_flow
}

# Bidirectional feedback
pipeline.evaluation <-> pipeline.training: Metrics & Checkpoints {
  class: data_flow
}