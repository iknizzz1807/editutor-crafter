classes: {
  bucket_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  node_style: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  sentinel_style: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  resize_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#d63031"
    style.font-color: "#e6edf3"
    style.stroke-dash: 3
  }
}

title: Split-Ordered Hash Map Structure {
  style.font-color: "#e6edf3"
  style.bold: true
  near: top-center
}

bucket_array: Bucket Array {
  class: bucket_style
  
  b0: "B[0]" {
    class: bucket_style
  }
  b1: "B[1]" {
    class: bucket_style
  }
  b2: "B[2]" {
    class: bucket_style
  }
  b3: "B[3]" {
    class: bucket_style
  }
  b4: "B[4]" {
    class: resize_style
  }
  b5: "B[5]" {
    class: resize_style
  }
  b6: "B[6]" {
    class: resize_style
  }
  b7: "B[7]" {
    class: resize_style
  }
}

linked_lists: Split-Ordered Lists {
  class: bucket_style
  
  s0: "S(000)" {
    class: sentinel_style
  }
  n1: "N(001)" {
    class: node_style
  }
  s2: "S(010)" {
    class: sentinel_style
  }
  n3: "N(011)" {
    class: node_style
  }
  s4: "S(100)" {
    class: sentinel_style
  }
  n5: "N(101)" {
    class: node_style
  }
  s6: "S(110)" {
    class: sentinel_style
  }
  n7: "N(111)" {
    class: node_style
  }
  
  s0 -> n1: next
  n1 -> s2: next
  s2 -> n3: next
  n3 -> s4: next
  s4 -> n5: next
  n5 -> s6: next
  s6 -> n7: next
}

resize_info: Incremental Resize {
  class: resize_style
  
  old_size: "Old Size: 4" {
    class: bucket_style
  }
  new_size: "New Size: 8" {
    class: resize_style
  }
  status: "Buckets 4-7 being initialized" {
    class: resize_style
  }
}

bucket_array.b0 -> linked_lists.s0: points to
bucket_array.b1 -> linked_lists.n1: points to
bucket_array.b2 -> linked_lists.s2: points to
bucket_array.b3 -> linked_lists.n3: points to
bucket_array.b4 -> linked_lists.s4: points to {
  style.stroke: "#d63031"
  style.stroke-dash: 3
}
bucket_array.b5 -> linked_lists.n5: points to {
  style.stroke: "#d63031"
  style.stroke-dash: 3
}
bucket_array.b6 -> linked_lists.s6: points to {
  style.stroke: "#d63031"
  style.stroke-dash: 3
}
bucket_array.b7 -> linked_lists.n7: points to {
  style.stroke: "#d63031"
  style.stroke-dash: 3
}

legend: Legend {
  class: bucket_style
  
  sentinel_legend: "S(xxx) = Sentinel Node" {
    class: sentinel_style
  }
  node_legend: "N(xxx) = Data Node" {
    class: node_style
  }
  new_legend: "Dashed = New Buckets" {
    class: resize_style
  }
}

note: |md
  **Key Properties:**
  - Binary keys determine sort order
  - Sentinels mark logical bucket boundaries
  - New buckets added during resize
  - Lock-free traversal via atomic next pointers
| {
  shape: page
  class: bucket_style
  near: bottom-center
}