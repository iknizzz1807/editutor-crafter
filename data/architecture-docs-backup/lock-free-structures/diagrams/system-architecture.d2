direction: down

# System Component Architecture
title: System Component Architecture {
  style.font-size: 24
  style.font-color: "#e6edf3"
  near: top-center
}

# Define color scheme
classes: {
  foundation: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  data_layer: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  memory_layer: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  component: {
    style.fill: "#2d3748"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

# Foundation Layer
foundation: Atomic Operations Foundation {
  class: foundation
  
  atomic_ops: Atomic Operations {
    class: component
    shape: rectangle
  }
  
  cas: Compare-And-Swap (CAS) {
    class: component
    shape: rectangle
  }
  
  memory_ordering: Memory Ordering {
    class: component
    shape: rectangle
  }
  
  atomic_ops -> cas: enables
  cas -> memory_ordering: requires
}

# Data Structures Layer
data_layer: Data Structures Layer {
  class: data_layer
  
  stack: Lock-free Stack {
    class: component
    shape: rectangle
  }
  
  queue: Lock-free Queue {
    class: component
    shape: rectangle
  }
  
  hashmap: Lock-free Hash Map {
    class: component
    shape: rectangle
  }
}

# Memory Reclamation Layer
memory_layer: Memory Reclamation Layer {
  class: memory_layer
  
  hazard_ptrs: Hazard Pointers {
    class: component
    shape: rectangle
  }
  
  epoch_mgmt: Epoch Management {
    class: component
    shape: rectangle
  }
  
  safe_reclaim: Safe Memory Reclamation {
    class: component
    shape: rectangle
  }
  
  hazard_ptrs -> safe_reclaim: protects
  epoch_mgmt -> safe_reclaim: coordinates
}

# Dependencies between layers
foundation -> data_layer: provides primitives {
  style.stroke: "#3fb950"
  style.stroke-width: 3
}

data_layer -> memory_layer: requires safety {
  style.stroke: "#e17055"
  style.stroke-width: 2
}

foundation -> memory_layer: atomic support {
  style.stroke: "#8b949e"
  style.stroke-dash: 5
}