title: Abstract Syntax Tree Data Model

classes: {
  base_node: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  container_node: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  leaf_node: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

ASTNode: {
  shape: class
  class: base_node
  "node_type: NodeType"
  "parent: ASTNode?"
  "children: ASTNode[]"
  "position: Position"
  "+ accept(visitor: Visitor): void"
  "+ add_child(node: ASTNode): void"
  "+ get_text_content(): string"
}

Document: {
  shape: class
  class: container_node
  "title: string?"
  "metadata: Map<string, string>"
  "+ get_blocks(): BlockNode[]"
  "+ to_html(): string"
}

BlockNode: {
  shape: class
  class: container_node
  "block_type: BlockType"
  "+ is_container(): bool"
  "+ can_contain(node: ASTNode): bool"
}

Paragraph: {
  shape: class
  class: container_node
  "inline_elements: InlineNode[]"
  "+ get_plain_text(): string"
}

Heading: {
  shape: class
  class: container_node
  "level: int"
  "anchor_id: string?"
  "+ get_heading_text(): string"
}

CodeBlock: {
  shape: class
  class: leaf_node
  "language: string?"
  "code_content: string"
  "is_fenced: bool"
}

List: {
  shape: class
  class: container_node
  "list_type: ListType"
  "is_ordered: bool"
  "start_number: int?"
  "+ get_items(): ListItem[]"
}

ListItem: {
  shape: class
  class: container_node
  "marker: string"
  "is_checked: bool?"
  "+ get_content(): ASTNode[]"
}

InlineNode: {
  shape: class
  class: container_node
  "inline_type: InlineType"
  "+ render_html(): string"
}

Text: {
  shape: class
  class: leaf_node
  "content: string"
  "is_whitespace: bool"
  "+ escape_html(): string"
}

Emphasis: {
  shape: class
  class: container_node
  "emphasis_type: EmphasisType"
  "marker: string"
}

Link: {
  shape: class
  class: container_node
  "url: string"
  "title: string?"
  "link_text: InlineNode[]"
  "+ is_valid_url(): bool"
}

Image: {
  shape: class
  class: leaf_node
  "src: string"
  "alt_text: string"
  "title: string?"
  "+ get_dimensions(): Dimensions?"
}

Code: {
  shape: class
  class: leaf_node
  "code_text: string"
  "language: string?"
}

Document -> ASTNode: extends
BlockNode -> ASTNode: extends
InlineNode -> ASTNode: extends

Paragraph -> BlockNode: extends
Heading -> BlockNode: extends
CodeBlock -> BlockNode: extends
List -> BlockNode: extends
ListItem -> BlockNode: extends

Text -> InlineNode: extends
Emphasis -> InlineNode: extends
Link -> InlineNode: extends
Image -> InlineNode: extends
Code -> InlineNode: extends

Document -> BlockNode: contains {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}
Paragraph -> InlineNode: contains {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}
List -> ListItem: contains {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}
Link -> InlineNode: contains {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}
Emphasis -> InlineNode: contains {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}