direction: down

classes: {
  decision: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  process: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  recovery: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  terminal: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    style.bold: true
  }
}

input: Malformed Input Detected {
  class: process
}

classify: Input Classification {
  shape: diamond
  class: decision
}

block_error: Block-Level Error? {
  shape: diamond
  class: decision
}

inline_error: Inline-Level Error? {
  shape: diamond
  class: decision
}

recoverable: Recoverable? {
  shape: diamond
  class: decision
}

structural: Structural Corruption? {
  shape: diamond
  class: decision
}

interpret: Make Reasonable\nInterpretation {
  class: recovery
}

skip_element: Skip Malformed\nElement {
  class: recovery
}

literal: Treat as Literal Text {
  class: recovery
}

partial: Partial Recovery\n& Continue {
  class: recovery
}

fail_safe: Fail Safe\n& Stop Processing {
  class: terminal
}

continue: Continue Processing\nDocument {
  class: process
}

output: Generate Output\nwith Fallback {
  class: process
}

input -> classify

classify -> block_error: Block parsing
classify -> inline_error: Inline parsing

block_error -> recoverable: Yes

recoverable -> interpret: Yes - Ambiguous syntax
recoverable -> skip_element: No - Clear malformation

interpret -> continue
skip_element -> continue

block_error -> structural: No

structural -> fail_safe: Yes - Document corruption
structural -> partial: No - Isolated error

partial -> continue

inline_error -> literal: Yes

literal -> continue

inline_error -> recoverable: No

continue -> output

output -> continue: More content
output: Complete {
  near: bottom-center
  class: process
}

note: |md
  **Recovery Principles:**
  - Be liberal in what you accept
  - Distinguish recoverable vs structural errors
  - Graceful degradation over failure
  - Context-aware recovery strategies
| {
  shape: page
  near: top-right
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}