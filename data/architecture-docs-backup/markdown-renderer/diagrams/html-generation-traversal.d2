shape: sequence_diagram

classes: {
  generator: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  visitor: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  node: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

generator: HTML Generator {
  class: generator
}
visitor: Node Visitor {
  class: visitor
}
document: Document Node {
  class: node
}
heading: Heading Node {
  class: node
}
paragraph: Paragraph Node {
  class: node
}
text: Text Node {
  class: node
}

generator -> document: traverse(root_node)
document -> visitor: accept(visitor)
visitor -> document: visit_document()
document -> generator: "<html><body>"

generator -> heading: traverse(child_node)
heading -> visitor: accept(visitor)
visitor -> heading: identify_node_type()
heading -> visitor: "HEADING, level=1"
visitor -> heading: escape_content()
heading -> visitor: "Welcome to Markdown"
visitor -> heading: generate_opening_tag()
heading -> generator: "<h1>"
visitor -> heading: apply_attributes()
heading -> generator: "<h1 id='welcome'>"

generator -> text: traverse(child_node)
text -> visitor: accept(visitor)
visitor -> text: visit_text()
text -> visitor: "Welcome to Markdown"
visitor -> text: escape_html_entities()
text -> generator: "Welcome to Markdown"

heading -> generator: "</h1>"

generator -> paragraph: traverse(next_sibling)
paragraph -> visitor: accept(visitor)
visitor -> paragraph: visit_paragraph()
paragraph -> generator: "<p>"

generator -> text: traverse(inline_content)
text -> visitor: accept(visitor)
visitor -> text: visit_text()
text -> generator: "This is a paragraph."

paragraph -> generator: "</p>"
document -> generator: "</body></html>"