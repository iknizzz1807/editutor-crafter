title: Error Recovery Decision Tree

classes: {
  decision_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  action_style: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  error_style: {
    style.fill: "#0f3460"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
  }
  success_style: {
    style.fill: "#2d5016"
    style.stroke: "#3fb950"
    style.font-color: "#ffffff"
  }
}

start: Error Detected {
  shape: circle
  class: error_style
}

classify: Classify Error Type {
  shape: diamond
  class: decision_style
}

transient: Transient Error {
  shape: rectangle
  class: error_style
}

resource: Resource Error {
  shape: rectangle
  class: error_style
}

permanent: Permanent Error {
  shape: rectangle
  class: error_style
}

retry_immediate: Immediate Retry {
  shape: rectangle
  class: action_style
}

retry_backoff: Exponential Backoff\nRetry {
  shape: rectangle
  class: action_style
}

dead_letter: Move to\nDead Letter Queue {
  shape: rectangle
  class: action_style
}

cleanup_resources: Cleanup Resources {
  shape: rectangle
  class: action_style
}

check_attempts: Max Retries\nReached? {
  shape: diamond
  class: decision_style
}

check_resource: Resources\nAvailable? {
  shape: diamond
  class: decision_style
}

success: Recovery\nSuccessful {
  shape: circle
  style.double-border: true
  class: success_style
}

failure: Recovery\nFailed {
  shape: circle
  style.double-border: true
  class: error_style
}

start -> classify

classify -> transient: Network timeout\nAPI rate limit\nTemporary service unavailable
classify -> resource: Memory exhaustion\nDisk space full\nWorker pool saturated
classify -> permanent: Invalid file format\nCorrupted data\nMalformed request

transient -> retry_immediate
retry_immediate -> check_attempts
check_attempts -> retry_immediate: No
check_attempts -> dead_letter: Yes

resource -> check_resource
check_resource -> retry_backoff: Yes
check_resource -> dead_letter: No

retry_backoff -> cleanup_resources
cleanup_resources -> success

permanent -> dead_letter

dead_letter -> failure

retry_immediate -> success: Success
retry_backoff -> success: Success