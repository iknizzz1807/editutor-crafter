title: Command Execution Sequence
shape: sequence_diagram

classes: {
  component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  process: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

Parser: {
  class: component
}

Executor: {
  class: component
}

JobManager: Job Manager {
  class: component
}

ChildProcess: Child Process {
  class: process
}

Parser -> Executor: "parse_command(\"ls -la\")"
Executor -> JobManager: "create_job()"
JobManager -> Executor: job_id
Executor -> Executor: "setup_redirections()"
Executor -> ChildProcess: "fork()"
ChildProcess -> ChildProcess: "exec(\"ls\", [\"-la\"])"
ChildProcess -> Executor: process_id
Executor -> JobManager: "add_process(job_id, pid)"
JobManager -> JobManager: "track_job_state()"
ChildProcess -> Executor: exit_status
Executor -> JobManager: "job_completed(job_id)"
JobManager -> Executor: "cleanup_job()"
Executor -> Parser: execution_result