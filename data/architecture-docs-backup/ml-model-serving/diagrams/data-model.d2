classes: {
  class_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  container_style: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

direction: right

request_types: Request Types {
  class: container_style
  
  InferenceRequest: InferenceRequest {
    shape: class
    class: class_style
    "- model_name: string"
    "- version: Optional[string]"
    "- input_data: Dict[string, Any]"
    "- request_id: string"
    "- timeout_ms: int"
    "- routing_config: Optional[RoutingConfig]"
    "+ validate(): bool"
    "+ serialize(): bytes"
  }
  
  BatchRequest: BatchRequest {
    shape: class
    class: class_style
    "- requests: List[InferenceRequest]"
    "- batch_id: string"
    "- priority: int"
    "- max_wait_time_ms: int"
    "- batch_size_limit: int"
    "+ add_request(req: InferenceRequest): void"
    "+ is_ready(): bool"
  }
}

metadata_types: Metadata and Config {
  class: container_style
  
  ModelMetadata: ModelMetadata {
    shape: class
    class: class_style
    "- name: string"
    "- version: string"
    "- framework: string"
    "- input_schema: Dict[string, Any]"
    "- output_schema: Dict[string, Any]"
    "- model_path: string"
    "- created_at: datetime"
    "- tags: Dict[string, string]"
    "+ validate_input(data: Any): bool"
    "+ get_signature(): ModelSignature"
  }
  
  ExperimentConfig: ExperimentConfig {
    shape: class
    class: class_style
    "- experiment_id: string"
    "- experiment_type: ExperimentType"
    "- traffic_split: Dict[string, float]"
    "- model_variants: List[string]"
    "- start_time: datetime"
    "- end_time: Optional[datetime]"
    "- success_metrics: List[string]"
    "+ get_model_for_request(req: InferenceRequest): string"
    "+ is_active(): bool"
  }
}

monitoring_types: Monitoring Data {
  class: container_style
  
  RequestMetrics: RequestMetrics {
    shape: class
    class: class_style
    "- request_id: string"
    "- model_name: string"
    "- model_version: string"
    "- latency_ms: float"
    "- input_size_bytes: int"
    "- output_size_bytes: int"
    "- timestamp: datetime"
    "- status_code: int"
    "- error_message: Optional[string]"
    "+ to_prometheus_format(): string"
  }
  
  ModelHealth: ModelHealth {
    shape: class
    class: class_style
    "- model_name: string"
    "- model_version: string"
    "- status: HealthStatus"
    "- last_check: datetime"
    "- cpu_usage: float"
    "- memory_usage_mb: float"
    "- request_count_1m: int"
    "- error_rate_1m: float"
    "+ is_healthy(): bool"
    "+ get_load_score(): float"
  }
}

request_types.InferenceRequest -> metadata_types.ModelMetadata: "references model" {
  style.stroke: "#8b949e"
}

request_types.BatchRequest -> request_types.InferenceRequest: "contains multiple" {
  style.stroke: "#8b949e"
}

metadata_types.ExperimentConfig -> metadata_types.ModelMetadata: "selects variants" {
  style.stroke: "#8b949e"
}

request_types.InferenceRequest -> monitoring_types.RequestMetrics: "generates metrics" {
  style.stroke: "#8b949e"
}

metadata_types.ModelMetadata -> monitoring_types.ModelHealth: "health monitored" {
  style.stroke: "#8b949e"
}

metadata_types.ExperimentConfig -> monitoring_types.RequestMetrics: "tracks experiment results" {
  style.stroke: "#8b949e"
}