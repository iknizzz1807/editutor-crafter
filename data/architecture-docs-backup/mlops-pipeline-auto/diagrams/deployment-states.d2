title: Model Deployment State Machine

classes: {
  state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  transition: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  critical: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    style.bold: true
  }
  success: {
    style.fill: "#00b894"
    style.stroke: "#3fb950"
    style.font-color: "#ffffff"
    style.bold: true
  }
}

init: {
  shape: circle
  style.fill: "#3fb950"
  label: ""
}

staging: Staging {
  shape: circle
  class: state
}

canary: Canary {
  shape: circle
  class: state
}

production: Production {
  shape: circle
  class: success
  style.double-border: true
}

rollback: Rollback {
  shape: circle
  class: critical
}

failed: Failed {
  shape: circle
  class: critical
  style.double-border: true
}

deprecated: Deprecated {
  shape: circle
  class: state
  style.stroke-dash: 3
}

init -> staging: model ready {
  class: transition
}

staging -> canary: tests pass\nvalidation ok {
  class: transition
}

staging -> failed: tests fail\nvalidation error {
  class: transition
}

canary -> production: metrics healthy\nperformance acceptable\ntraffic % successful {
  class: transition
}

canary -> rollback: metrics degraded\nerror rate high\nlatency spike {
  class: transition
}

production -> canary: new version\nA/B test {
  class: transition
}

production -> rollback: critical issue\nservice degradation {
  class: transition
}

rollback -> production: issue resolved\nservice restored {
  class: transition
}

rollback -> failed: rollback unsuccessful\nmanual intervention {
  class: transition
}

production -> deprecated: newer version\ntraffic migrated {
  class: transition
}

canary -> staging: feedback loop\nmodel retraining {
  class: transition
}

failed -> staging: issue fixed\nmodel updated {
  class: transition
}