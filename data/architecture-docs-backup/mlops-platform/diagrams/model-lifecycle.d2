title: Model Version State Machine

classes: {
  state_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  initial_state: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    style.font-color: "#000000"
  }
  final_state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.double-border: true
    style.bold: true
  }
  transition_style: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  approval_style: {
    style.stroke: "#d63031"
    style.font-color: "#e6edf3"
    style.stroke-dash: 3
  }
  rollback_style: {
    style.stroke: "#fdcb6e"
    style.font-color: "#e6edf3"
    style.stroke-dash: 5
  }
}

init: {
  shape: circle
  label: ""
  class: initial_state
}

development: Development {
  shape: circle
  class: state_style
}

staging: Staging {
  shape: circle
  class: state_style
}

production: Production {
  shape: circle
  class: state_style
}

archived: Archived {
  shape: circle
  class: final_state
}

approval_gate: "Approval Gate" {
  shape: diamond
  style.fill: "#16213e"
  style.stroke: "#d63031"
  style.font-color: "#e6edf3"
  style.bold: true
}

init -> development: "Model Registration" {
  class: transition_style
}

development -> development: "Training Iterations" {
  class: transition_style
}

development -> staging: "Promote to Staging\n[Manual/Automated]" {
  class: transition_style
}

staging -> approval_gate: "Request Production\nDeployment" {
  class: transition_style
}

approval_gate -> production: "Approved\n[Manual Review]" {
  class: approval_style
}

approval_gate -> staging: "Rejected\n[Review Failed]" {
  class: rollback_style
}

production -> archived: "Superseded by\nNewer Version" {
  class: transition_style
}

staging -> development: "Failed Validation\n[Rollback]" {
  class: rollback_style
}

production -> staging: "Critical Issue\n[Emergency Rollback]" {
  class: rollback_style
}

staging -> staging: "Pre-production\nTesting" {
  class: transition_style
}

production -> production: "Serving Live\nTraffic" {
  class: transition_style
}