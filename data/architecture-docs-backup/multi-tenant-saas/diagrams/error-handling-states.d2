title: Tenant Lifecycle State Machine

classes: {
  state: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  initial: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    style.font-color: "#ffffff"
  }
  final: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.double-border: true
  }
  transition: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

init: {
  shape: circle
  label: ""
  class: initial
}

pending: Pending {
  shape: circle
  class: state
}

active: Active {
  shape: circle
  class: state
}

suspended: Suspended {
  shape: circle
  class: state
}

grace_period: Grace Period {
  shape: circle
  class: state
}

deleted: Deleted {
  shape: circle
  class: final
}

archived: Archived {
  shape: circle
  class: final
}

init -> pending: Create Tenant {
  class: transition
}

pending -> active: Complete Setup\n& Payment Valid {
  class: transition
}

pending -> deleted: Setup Failed\n| Admin Rejection {
  class: transition
}

active -> suspended: Policy Violation\n| Admin Action {
  class: transition
}

active -> grace_period: Payment Failed\n| Quota Exceeded {
  class: transition
}

suspended -> active: Issue Resolved\n& Admin Approval {
  class: transition
}

suspended -> deleted: Permanent Ban\n| Extended Violation {
  class: transition
}

grace_period -> active: Payment Restored\n& Usage Normal {
  class: transition
}

grace_period -> suspended: Grace Period Expired {
  class: transition
}

grace_period -> deleted: Extended Non-Payment {
  class: transition
}

deleted -> archived: Data Retention\nPeriod Expired {
  class: transition
}

triggers: Triggers {
  shape: rectangle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true

  billing: Billing Events {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }

  admin: Admin Actions {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }

  usage: Usage Monitoring {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }

  violations: Policy Violations {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}