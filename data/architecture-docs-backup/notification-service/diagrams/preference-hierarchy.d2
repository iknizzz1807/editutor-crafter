title: Preference Resolution Hierarchy

classes: {
  decision: {
    shape: diamond
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  process: {
    shape: rectangle
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  final: {
    shape: rectangle
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  blocked: {
    shape: rectangle
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    style.bold: true
  }
}

start: Incoming Notification {
  class: process
}

global_check: Global Opt-out? {
  class: decision
}

global_blocked: Blocked\n(Global) {
  class: blocked
}

category_check: Category Opt-out? {
  class: decision
}

category_blocked: Blocked\n(Category) {
  class: blocked
}

channel_check: Channel Opt-out? {
  class: decision
}

channel_blocked: Blocked\n(Channel) {
  class: blocked
}

quiet_check: Quiet Hours? {
  class: decision
}

quiet_blocked: Blocked\n(Quiet Hours) {
  class: blocked
}

rate_check: Rate Limits? {
  class: decision
}

rate_blocked: Blocked\n(Rate Limits) {
  class: blocked
}

deliver: Deliver Notification {
  class: final
}

start -> global_check
global_check -> global_blocked: Yes
global_check -> category_check: No

category_check -> category_blocked: Yes
category_check -> channel_check: No

channel_check -> channel_blocked: Yes
channel_check -> quiet_check: No

quiet_check -> quiet_blocked: Yes
quiet_check -> rate_check: No

rate_check -> rate_blocked: Yes
rate_check -> deliver: No