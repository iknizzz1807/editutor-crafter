shape: sequence_diagram

classes: {
  actor_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  service_style: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

trader: Trader {
  class: actor_style
}

gateway: API Gateway {
  class: service_style
}

orderbook: Order Book {
  class: service_style
}

matching: Matching Engine {
  class: service_style
}

marketdata: Market Data Publisher {
  class: service_style
}

trader -> gateway: Submit Order (BUY 100 AAPL at 150)
gateway -> gateway: Validate Order
gateway -> orderbook: Add Order to Book
orderbook -> orderbook: Update Price Levels
orderbook -> matching: Trigger Match Check
matching -> matching: Find Matching Orders
matching -> matching: Execute Trade (Price-Time Priority)
matching -> orderbook: Update Book (Remove Filled Orders)
matching -> marketdata: Publish Trade Execution
marketdata -> trader: Trade Confirmation
marketdata -> trader: Updated Market Data
orderbook -> gateway: Order Status Update
gateway -> trader: Order Acknowledgment