title: High-Level System Architecture

classes: {
  container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  component: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  external: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

clients: External Clients {
  class: external
  rest_client: REST Client
  websocket_client: WebSocket Client
}

gateway: API Gateway {
  class: component
}

core_system: Order Matching System {
  class: container
  
  order_book: Order Book {
    class: component
  }
  
  matching_engine: Matching Engine {
    class: component
  }
  
  market_data: Market Data Publisher {
    class: component
  }
}

# Client connections to gateway
clients.rest_client -> gateway: REST API\n(Place/Cancel Orders)
clients.websocket_client <-> gateway: WebSocket\n(Real-time Updates)

# Gateway to core system
gateway -> core_system.order_book: Order Requests
gateway -> core_system.matching_engine: Trade Commands

# Core system internal connections
core_system.order_book <-> core_system.matching_engine: Order Management\n& Trade Execution
core_system.matching_engine -> core_system.market_data: Trade Events
core_system.order_book -> core_system.market_data: Order Book Updates

# Market data back to clients
core_system.market_data -> gateway: Market Data\n& Trade Confirmations
gateway -> clients.websocket_client: Real-time\nMarket Feed