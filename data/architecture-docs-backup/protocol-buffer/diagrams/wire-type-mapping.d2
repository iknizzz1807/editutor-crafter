title: Wire Type to Data Type Mapping

classes: {
  wire_type: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  proto_type: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  encoding: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.italic: true
  }
}

wire_types: Wire Types {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  varint: VARINT (0) {
    class: wire_type
  }
  
  fixed64: FIXED64 (1) {
    class: wire_type
  }
  
  length_delimited: LENGTH_DELIMITED (2) {
    class: wire_type
  }
  
  fixed32: FIXED32 (5) {
    class: wire_type
  }
  
  deprecated: DEPRECATED (3,4) {
    class: wire_type
    style.stroke-dash: 3
    style.opacity: 0.6
  }
}

proto_types: Protocol Buffer Types {
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"

  varint_types: Variable Length Integers {
    bool_type: bool {
      class: proto_type
    }
    int32_type: int32 {
      class: proto_type
    }
    int64_type: int64 {
      class: proto_type
    }
    uint32_type: uint32 {
      class: proto_type
    }
    uint64_type: uint64 {
      class: proto_type
    }
    sint32_type: sint32 {
      class: proto_type
    }
    sint64_type: sint64 {
      class: proto_type
    }
    enum_type: enum {
      class: proto_type
    }
  }

  fixed64_types: 64-bit Fixed {
    fixed64_type: fixed64 {
      class: proto_type
    }
    sfixed64_type: sfixed64 {
      class: proto_type
    }
    double_type: double {
      class: proto_type
    }
  }

  length_types: Length-Delimited {
    string_type: string {
      class: proto_type
    }
    bytes_type: bytes {
      class: proto_type
    }
    message_type: message {
      class: proto_type
    }
    repeated_type: repeated {
      class: proto_type
    }
  }

  fixed32_types: 32-bit Fixed {
    fixed32_type: fixed32 {
      class: proto_type
    }
    sfixed32_type: sfixed32 {
      class: proto_type
    }
    float_type: float {
      class: proto_type
    }
  }
}

encoding_strategies: Encoding Strategies {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  varint_encoding: Varint Encoding {
    class: encoding
    label: |md
      **Variable-length encoding**
      - 7 bits per byte
      - Continuation bit
      - Little-endian
    |
  }

  fixed64_encoding: 64-bit Little-Endian {
    class: encoding
    label: |md
      **8-byte fixed encoding**
      - IEEE 754 doubles
      - 64-bit integers
      - Little-endian
    |
  }

  length_encoding: Length-Prefixed {
    class: encoding
    label: |md
      **Length + payload**
      - Varint length prefix
      - Raw bytes follow
      - UTF-8 for strings
    |
  }

  fixed32_encoding: 32-bit Little-Endian {
    class: encoding
    label: |md
      **4-byte fixed encoding**
      - IEEE 754 floats
      - 32-bit integers
      - Little-endian
    |
  }
}

# Wire type to protocol buffer type mappings
wire_types.varint -> proto_types.varint_types: maps to {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

wire_types.fixed64 -> proto_types.fixed64_types: maps to {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

wire_types.length_delimited -> proto_types.length_types: maps to {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

wire_types.fixed32 -> proto_types.fixed32_types: maps to {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

# Wire type to encoding strategy mappings
wire_types.varint -> encoding_strategies.varint_encoding: uses {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

wire_types.fixed64 -> encoding_strategies.fixed64_encoding: uses {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

wire_types.length_delimited -> encoding_strategies.length_encoding: uses {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

wire_types.fixed32 -> encoding_strategies.fixed32_encoding: uses {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

note: |md
  **Key Insight**: Wire types create a many-to-one mapping
  where multiple Protocol Buffer types share the same
  binary encoding strategy. This enables schema evolution
  while maintaining wire format compatibility.
| {
  shape: page
  near: bottom-center
  class: encoding
}