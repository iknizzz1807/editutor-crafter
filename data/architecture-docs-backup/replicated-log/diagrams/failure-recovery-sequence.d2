shape: sequence_diagram

Node1: Node 1 (Leader) {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Node2: Node 2 {
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Node3: Node 3 {
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Node1 -> Node2: Heartbeat
Node1 -> Node3: Heartbeat
Node2 -> Node1: Heartbeat ACK
Node3 -> Node1: Heartbeat ACK

Node1 -> Node2: Heartbeat
Node1 -> Node3: Heartbeat

Node2 -> Node1: Heartbeat ACK

Node1 -> Node2: Heartbeat
Node1 -> Node3: Heartbeat

Node2 -> Node1: Heartbeat ACK

Node2 -> Node3: Node 1 missed heartbeat - start election
Node3 -> Node2: Vote for Node 2 as leader
Node2 -> Node3: I am the new leader

Node1 -> Node2: Reconnect - requesting catch-up
Node2 -> Node1: Send missed log entries
Node1 -> Node2: Acknowledge catch-up complete

Node2 -> Node1: Heartbeat
Node2 -> Node3: Heartbeat
Node1 -> Node2: Heartbeat ACK
Node3 -> Node2: Heartbeat ACK