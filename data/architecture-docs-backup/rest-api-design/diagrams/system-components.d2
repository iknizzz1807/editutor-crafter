title: System Component Architecture

classes: {
  middleware: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  handler: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  database: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

client: Client {
  style.fill: "#2d3748"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

api_gateway: API Gateway {
  router: HTTP Router {
    class: middleware
  }
  
  middleware_chain: Middleware Chain {
    auth: Authentication Middleware {
      class: middleware
    }
    validation: Validation Middleware {
      class: middleware
    }
    rate_limit: Rate Limiting Middleware {
      class: middleware
    }
  }
  
  handlers: CRUD Handlers {
    create: Create Handler {
      class: handler
    }
    read: Read Handler {
      class: handler
    }
    update: Update Handler {
      class: handler
    }
    delete: Delete Handler {
      class: handler
    }
  }
}

database: Database {
  shape: cylinder
  class: database
}

client -> api_gateway.router: HTTP Request {
  style.stroke: "#8b949e"
}

api_gateway.router -> api_gateway.middleware_chain.auth: Route to Middleware {
  style.stroke: "#3fb950"
}

api_gateway.middleware_chain.auth -> api_gateway.middleware_chain.validation: Authenticate {
  style.stroke: "#3fb950"
}

api_gateway.middleware_chain.validation -> api_gateway.middleware_chain.rate_limit: Validate Input {
  style.stroke: "#3fb950"
}

api_gateway.middleware_chain.rate_limit -> api_gateway.handlers.create: Check Limits {
  style.stroke: "#3fb950"
}

api_gateway.middleware_chain.rate_limit -> api_gateway.handlers.read: Check Limits {
  style.stroke: "#3fb950"
}

api_gateway.middleware_chain.rate_limit -> api_gateway.handlers.update: Check Limits {
  style.stroke: "#3fb950"
}

api_gateway.middleware_chain.rate_limit -> api_gateway.handlers.delete: Check Limits {
  style.stroke: "#3fb950"
}

api_gateway.handlers.create -> database: INSERT {
  style.stroke: "#ffa726"
}

api_gateway.handlers.read -> database: SELECT {
  style.stroke: "#66bb6a"
}

api_gateway.handlers.update -> database: UPDATE {
  style.stroke: "#42a5f5"
}

api_gateway.handlers.delete -> database: DELETE {
  style.stroke: "#ef5350"
}

database -> api_gateway.handlers: Query Results {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

api_gateway.handlers -> client: HTTP Response {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}