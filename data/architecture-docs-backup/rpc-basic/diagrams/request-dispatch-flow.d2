direction: down

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  error: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
  }
  success: {
    style.fill: "#00b894"
    style.stroke: "#00a085"
    style.font-color: "#ffffff"
  }
}

start: Request Received {
  shape: circle
  style.fill: "#3fb950"
  style.font-color: "#ffffff"
}

parse: Parse Message {
  class: process
}

parse_valid: Valid Message? {
  shape: diamond
  class: decision
}

parse_error: Send Parse Error {
  class: error
}

lookup: Lookup Method {
  class: process
}

method_exists: Method Exists? {
  shape: diamond
  class: decision
}

method_error: Send Method Not Found {
  class: error
}

validate: Validate Parameters {
  class: process
}

params_valid: Parameters Valid? {
  shape: diamond
  class: decision
}

param_error: Send Parameter Error {
  class: error
}

execute: Execute Method {
  class: process
}

execution_success: Execution Successful? {
  shape: diamond
  class: decision
}

handle_error: Handle Runtime Error {
  class: error
}

send_response: Send Response {
  class: success
}

send_error: Send Error Response {
  class: error
}

end: Request Complete {
  shape: circle
  style.fill: "#00b894"
  style.font-color: "#ffffff"
  style.double-border: true
}

start -> parse
parse -> parse_valid
parse_valid -> parse_error: No
parse_valid -> lookup: Yes
parse_error -> send_error
lookup -> method_exists
method_exists -> method_error: No
method_exists -> validate: Yes
method_error -> send_error
validate -> params_valid
params_valid -> param_error: No
params_valid -> execute: Yes
param_error -> send_error
execute -> execution_success
execution_success -> handle_error: No
execution_success -> send_response: Yes
handle_error -> send_error
send_response -> end
send_error -> end