classes: {
  host_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  sandbox_style: {
    style.fill: "#16213e"
    style.stroke: "#e17055"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  resource_style: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  isolation_arrow: {
    style.stroke: "#d63031"
    style.bold: true
    style.stroke-dash: 3
  }
}

title: Namespace Isolation View {
  near: top-center
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
}

host_view: Host System View {
  class: host_style
  
  pid_ns: PID Namespace {
    class: resource_style
    pid_1: "init (PID 1)"
    pid_234: "systemd (PID 234)"
    pid_1847: "sandbox (PID 1847)"
    pid_2341: "chrome (PID 2341)"
  }
  
  mount_ns: Mount Namespace {
    class: resource_style
    root: "/ (root filesystem)"
    proc: "/proc"
    dev: "/dev"
    tmp: "/tmp"
    home: "/home"
  }
  
  net_ns: Network Namespace {
    class: resource_style
    eth0: "eth0: 192.168.1.100"
    lo: "lo: 127.0.0.1"
    docker0: "docker0: 172.17.0.1"
  }
  
  uts_ns: UTS Namespace {
    class: resource_style
    hostname: "hostname: production-server"
    domain: "domain: company.com"
  }
}

sandbox_view: Sandboxed Process View {
  class: sandbox_style
  
  isolated_pid: PID Namespace {
    class: resource_style
    sandbox_pid_1: "sandbox (PID 1)"
    note_pid: "Only sees itself!"
  }
  
  isolated_mount: Mount Namespace {
    class: resource_style
    chroot: "/ (chrooted view)"
    proc_private: "/proc (filtered)"
    tmp_private: "/tmp (private)"
    note_mount: "Limited filesystem view"
  }
  
  isolated_net: Network Namespace {
    class: resource_style
    lo_only: "lo: 127.0.0.1"
    note_net: "No network access"
  }
  
  isolated_uts: UTS Namespace {
    class: resource_style
    sandbox_hostname: "hostname: sandbox-container"
    sandbox_domain: "domain: isolated.local"
  }
}

kernel_isolation: Kernel Namespace Engine {
  style.fill: "#2d3748"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
  style.double-border: true
}

legend: |md
  **Namespace Types:**
  • **PID**: Process isolation
  • **Mount**: Filesystem isolation  
  • **Network**: Network stack isolation
  • **UTS**: Hostname/domain isolation
| {
  shape: page
  near: bottom-right
  style.fill: "#2d3748"
  style.font-color: "#e6edf3"
}

host_view.pid_ns -> kernel_isolation: "Maps PID 1847"
kernel_isolation -> sandbox_view.isolated_pid: "Shows as PID 1" {
  class: isolation_arrow
}

host_view.mount_ns -> kernel_isolation: "Full filesystem"
kernel_isolation -> sandbox_view.isolated_mount: "Restricted view" {
  class: isolation_arrow
}

host_view.net_ns -> kernel_isolation: "All interfaces"
kernel_isolation -> sandbox_view.isolated_net: "Isolated stack" {
  class: isolation_arrow
}

host_view.uts_ns -> kernel_isolation: "Host identity"
kernel_isolation -> sandbox_view.isolated_uts: "Container identity" {
  class: isolation_arrow
}