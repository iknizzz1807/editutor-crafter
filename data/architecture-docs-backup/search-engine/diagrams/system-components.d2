title: System Component Overview

classes: {
  component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  storage: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  data_flow: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

indexer: Indexer {
  class: component
  shape: rectangle
}

query_parser: Query Parser {
  class: component
  shape: rectangle
}

ranking_engine: Ranking Engine {
  class: component
  shape: rectangle
}

fuzzy_matcher: Fuzzy Matcher {
  class: component
  shape: rectangle
}

storage_layer: Storage Layer {
  class: storage
  shape: cylinder
  
  inverted_index: Inverted Index
  document_store: Document Store
  metadata: Metadata Store
}

# Data ingestion flow
indexer -> storage_layer.inverted_index: writes terms {
  class: data_flow
}
indexer -> storage_layer.document_store: stores documents {
  class: data_flow
}
indexer -> storage_layer.metadata: updates statistics {
  class: data_flow
}

# Query processing flow
query_parser -> ranking_engine: parsed query {
  class: data_flow
}
query_parser -> fuzzy_matcher: term expansion {
  class: data_flow
}

fuzzy_matcher -> storage_layer.inverted_index: fuzzy lookups {
  class: data_flow
}
fuzzy_matcher -> ranking_engine: expanded terms {
  class: data_flow
}

ranking_engine -> storage_layer.inverted_index: term frequencies {
  class: data_flow
}
ranking_engine -> storage_layer.metadata: document stats {
  class: data_flow
}
ranking_engine -> storage_layer.document_store: retrieves results {
  class: data_flow
}