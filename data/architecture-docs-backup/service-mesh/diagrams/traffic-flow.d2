title: Request Processing Flow
shape: sequence_diagram

client: Client
interceptor: Traffic Interceptor
discovery: Service Discovery
balancer: Load Balancer
target: Target Service
proxy: Sidecar Proxy

client.style.fill: "#1a1a2e"
client.style.font-color: "#e6edf3"
client.style.stroke: "#3fb950"

interceptor.style.fill: "#1a1a2e"
interceptor.style.font-color: "#e6edf3"
interceptor.style.stroke: "#3fb950"

discovery.style.fill: "#1a1a2e"
discovery.style.font-color: "#e6edf3"
discovery.style.stroke: "#3fb950"

balancer.style.fill: "#1a1a2e"
balancer.style.font-color: "#e6edf3"
balancer.style.stroke: "#3fb950"

target.style.fill: "#1a1a2e"
target.style.font-color: "#e6edf3"
target.style.stroke: "#3fb950"

proxy.style.fill: "#1a1a2e"
proxy.style.font-color: "#e6edf3"
proxy.style.stroke: "#3fb950"

client -> interceptor: Outbound request
interceptor -> discovery: Lookup service endpoints
discovery -> interceptor: Return available endpoints
interceptor -> balancer: Select target endpoint
balancer -> interceptor: Return chosen endpoint
interceptor -> proxy: Initiate mTLS handshake
proxy -> target: Establish secure connection
target -> proxy: mTLS handshake complete
proxy -> target: Forward request
target -> proxy: Service response
proxy -> interceptor: Encrypted response
interceptor -> client: Response forwarded