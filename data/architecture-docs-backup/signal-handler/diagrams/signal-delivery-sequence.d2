direction: right

classes: {
  actor: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  message: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  async: {
    style.stroke: "#d63031"
    style.font-color: "#d63031"
    style.stroke-dash: 5
  }
  
  important: {
    style.stroke: "#3fb950"
    style.font-color: "#3fb950"
    style.bold: true
  }
}

shape: sequence_diagram

kernel: Kernel Process {
  class: actor
}

handler: Signal Handler {
  class: actor
}

pipe: Self-Pipe {
  class: actor
}

event_loop: Event Loop {
  class: actor
}

app: Application {
  class: actor
}

kernel -> handler: SIGTERM delivery {
  class: async
}

handler -> handler: Execute in restricted context {
  class: important
}

handler -> pipe: write(1 byte) {
  class: important
}

pipe -> event_loop: pipe readable event {
  class: message
}

event_loop -> app: signal_received() callback {
  class: important
}

app -> app: Process graceful shutdown {
  class: message
}