direction: right

classes: {
  state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  final_state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
    style.double-border: true
  }
  start_state: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
  }
}

init: {
  shape: circle
  class: start_state
  label: ""
}

unregistered: Unregistered {
  shape: circle
  class: state
}

registered: Registered {
  shape: circle
  class: state
}

blocked: Blocked {
  shape: circle
  class: state
}

pending: Pending {
  shape: circle
  class: state
}

delivered: Delivered {
  shape: circle
  class: final_state
}

init -> unregistered: Start

unregistered -> registered: sigaction() {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

registered -> blocked: sigprocmask(SIG_BLOCK) {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

blocked -> registered: sigprocmask(SIG_UNBLOCK) {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

registered -> delivered: Signal arrives {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

blocked -> pending: Signal arrives {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

pending -> delivered: sigprocmask(SIG_UNBLOCK) {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

registered -> unregistered: signal(SIG_DFL) {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

delivered -> registered: Handler returns {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

title: Signal Handler State Machine {
  near: top-center
  style.font-color: "#e6edf3"
  style.bold: true
}