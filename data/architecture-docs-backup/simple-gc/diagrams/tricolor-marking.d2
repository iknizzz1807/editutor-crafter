title: Tri-Color Marking Visualization

classes: {
  white_node: {
    style.fill: "#ffffff"
    style.stroke: "#8b949e"
    style.font-color: "#000000"
  }
  gray_node: {
    style.fill: "#6c757d"
    style.stroke: "#495057"
    style.font-color: "#ffffff"
    style.bold: true
  }
  black_node: {
    style.fill: "#212529"
    style.stroke: "#3fb950"
    style.font-color: "#ffffff"
    style.bold: true
  }
  root_node: {
    style.fill: "#e74c3c"
    style.stroke: "#c0392b"
    style.font-color: "#ffffff"
    style.bold: true
    style.double-border: true
  }
  container_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

heap: Heap Memory {
  class: container_style
  
  root1: Root 1 {
    shape: circle
    class: root_node
  }
  
  root2: Root 2 {
    shape: circle
    class: root_node
  }
  
  obj1: Object A {
    shape: circle
    class: black_node
  }
  
  obj2: Object B {
    shape: circle
    class: gray_node
  }
  
  obj3: Object C {
    shape: circle
    class: white_node
  }
  
  obj4: Object D {
    shape: circle
    class: black_node
  }
  
  obj5: Object E {
    shape: circle
    class: white_node
  }
  
  obj6: Object F {
    shape: circle
    class: gray_node
  }
  
  root1 -> obj1: references
  root2 -> obj2: references
  obj1 -> obj4: references
  obj2 -> obj3: references
  obj2 -> obj6: references
  obj6 -> obj4: references
}

worklist: Gray Set (Worklist) {
  class: container_style
  near: bottom-left
  
  gray1: Object B {
    shape: rectangle
    class: gray_node
  }
  
  gray2: Object F {
    shape: rectangle
    class: gray_node
  }
}

legend: Color Legend {
  class: container_style
  near: bottom-right
  
  white_ex: WHITE {
    shape: circle
    class: white_node
  }
  
  gray_ex: GRAY {
    shape: circle
    class: gray_node
  }
  
  black_ex: BLACK {
    shape: circle
    class: black_node
  }
  
  root_ex: ROOT {
    shape: circle
    class: root_node
  }
}

white_note: |md
  **WHITE (Unmarked)**
  - Not yet discovered
  - Potentially unreachable
  - Will be swept if still white
| {
  shape: page
  near: top-left
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

gray_note: |md
  **GRAY (Worklist)**
  - Discovered but not processed
  - References not yet followed
  - In traversal queue
| {
  shape: page
  near: top-center
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

black_note: |md
  **BLACK (Marked)**
  - Fully processed
  - All references followed
  - Guaranteed reachable
| {
  shape: page
  near: top-right
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

heap.obj2 -> worklist.gray1: {
  style.stroke-dash: 3
  style.stroke: "#6c757d"
}

heap.obj6 -> worklist.gray2: {
  style.stroke-dash: 3
  style.stroke: "#6c757d"
}