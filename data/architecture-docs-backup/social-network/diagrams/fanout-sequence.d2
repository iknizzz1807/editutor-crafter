shape: sequence_diagram

User: User
PostService: Post Service
Database: Database
Queue: Job Queue
BackgroundWorker: Background Worker
FollowService: Follow Service
FeedCache: Feed Cache
NotificationService: Notification Service

User -> PostService: Create Post
PostService -> Database: Save Post
Database -> PostService: Post Saved
PostService -> Queue: Queue Fan-out Job
PostService -> User: Post Created (201)
Queue -> BackgroundWorker: Fan-out Job
BackgroundWorker -> FollowService: Get Followers
FollowService -> BackgroundWorker: Followers List
BackgroundWorker -> FeedCache: Write to Follower Feed 1
BackgroundWorker -> FeedCache: Write to Follower Feed 2
BackgroundWorker -> FeedCache: Write to Follower Feed N
BackgroundWorker -> NotificationService: Send Notifications
NotificationService -> BackgroundWorker: Notifications Sent

User.style.fill: "#1a1a2e"
User.style.stroke: "#3fb950"
User.style.font-color: "#e6edf3"

PostService.style.fill: "#1a1a2e"
PostService.style.stroke: "#3fb950"
PostService.style.font-color: "#e6edf3"

Database.style.fill: "#16213e"
Database.style.stroke: "#8b949e"
Database.style.font-color: "#e6edf3"

Queue.style.fill: "#0f3460"
Queue.style.stroke: "#3fb950"
Queue.style.font-color: "#e6edf3"
Queue.style.bold: true

BackgroundWorker.style.fill: "#1a1a2e"
BackgroundWorker.style.stroke: "#3fb950"
BackgroundWorker.style.font-color: "#e6edf3"
BackgroundWorker.style.bold: true

FollowService.style.fill: "#16213e"
FollowService.style.stroke: "#8b949e"
FollowService.style.font-color: "#e6edf3"

FeedCache.style.fill: "#0f3460"
FeedCache.style.stroke: "#3fb950"
FeedCache.style.font-color: "#e6edf3"

NotificationService.style.fill: "#16213e"
NotificationService.style.stroke: "#8b949e"
NotificationService.style.font-color: "#e6edf3"