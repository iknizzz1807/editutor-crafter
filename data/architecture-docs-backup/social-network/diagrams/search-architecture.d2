title: Search and Discovery Components

classes: {
  container_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  service_style: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  engine_style: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  data_style: {
    style.fill: "#2d3748"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

user: User {
  shape: circle
  class: service_style
}

search_discovery: Search & Discovery System {
  class: container_style
  
  search_service: Search Service {
    class: service_style
  }
  
  indexing_pipeline: Indexing Pipeline {
    class: engine_style
    
    content_processor: Content Processor
    hashtag_extractor: Hashtag Extractor
    text_indexer: Text Indexer
  }
  
  trending_engine: Trending Calculation Engine {
    class: engine_style
    
    engagement_analyzer: Engagement Analyzer
    trend_calculator: Trend Calculator
    popularity_scorer: Popularity Scorer
  }
  
  recommendation_engine: Recommendation Engine {
    class: engine_style
    
    user_profiler: User Profiler
    content_matcher: Content Matcher
    ranking_algorithm: Ranking Algorithm
  }
}

data_stores: Data Stores {
  class: container_style
  
  search_index: Search Index {
    shape: cylinder
    class: data_style
  }
  
  trending_cache: Trending Cache {
    shape: cylinder
    class: data_style
  }
  
  user_profiles: User Profiles DB {
    shape: cylinder
    class: data_style
  }
  
  content_db: Content Database {
    shape: cylinder
    class: data_style
  }
}

content_feed: Content Feed {
  shape: queue
  class: engine_style
}

user -> search_discovery.search_service: search query
search_discovery.search_service -> data_stores.search_index: query index

content_feed -> search_discovery.indexing_pipeline.content_processor: new content
search_discovery.indexing_pipeline.content_processor -> search_discovery.indexing_pipeline.hashtag_extractor: extract hashtags
search_discovery.indexing_pipeline.hashtag_extractor -> search_discovery.indexing_pipeline.text_indexer: processed content
search_discovery.indexing_pipeline.text_indexer -> data_stores.search_index: update index

content_feed -> search_discovery.trending_engine.engagement_analyzer: engagement data
search_discovery.trending_engine.engagement_analyzer -> search_discovery.trending_engine.trend_calculator: metrics
search_discovery.trending_engine.trend_calculator -> search_discovery.trending_engine.popularity_scorer: trends
search_discovery.trending_engine.popularity_scorer -> data_stores.trending_cache: trending scores

search_discovery.recommendation_engine.user_profiler -> data_stores.user_profiles: user behavior
search_discovery.recommendation_engine.content_matcher -> data_stores.content_db: content analysis
search_discovery.recommendation_engine.ranking_algorithm -> user: personalized recommendations

data_stores.trending_cache -> search_discovery.search_service: trending topics
search_discovery.search_service -> user: search results