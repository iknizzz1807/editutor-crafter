direction: right
title: Chronos System Component Architecture

# External Systems Group
external: External Systems {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"

  sources: Sources {
    shape: queue
    style.fill: "#2d3436"
  }

  sinks: Sinks {
    shape: cylinder
    style.fill: "#2d3436"
  }

  state_backend: State Backend {
    shape: cylinder
    style.fill: "#2d3436"
  }
}

# Chronos Cluster Group
chronos: Chronos Cluster {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"

  job_manager: JobManager {
    shape: circle
    style.fill: "#2d3436"
    style.bold: true
  }

  task_manager: TaskManager 1 {
    style.fill: "#16213e"
    shape: rectangle

    slots: Slots {
      style.fill: "#0f3460"

      slot1: Slot
      slot2: Slot
      slot3: Slot
      slot4: Slot
    }
  }

  task_manager2: TaskManager 2 {
    style.fill: "#16213e"
    shape: rectangle

    slots2: Slots {
      style.fill: "#0f3460"
      
      slot5: Slot
      slot6: Slot
      slot7: Slot
      slot8: Slot
    }
  }
}

# Client (outside cluster)
client: Job Client {
  shape: rectangle
  style.fill: "#2d3436"
}

# Control Flow
client -> chronos.job_manager: "Submit Job\n(Control Flow)" {
  style.stroke-dash: 2
}
chronos.job_manager -> chronos.task_manager: "Deploy Tasks\n(Control Flow)" {
  style.stroke-dash: 2
}
chronos.job_manager -> chronos.task_manager2: "Deploy Tasks\n(Control Flow)" {
  style.stroke-dash: 2
}

# Data Flow
external.sources -> chronos.task_manager.slots: "Stream Data\n(Data Flow)"
external.sources -> chronos.task_manager2.slots2: "Stream Data\n(Data Flow)"
chronos.task_manager.slots -> external.sinks: "Results\n(Data Flow)"
chronos.task_manager2.slots2 -> external.sinks: "Results\n(Data Flow)"

# State Flow
chronos.task_manager.slots <-> external.state_backend: "State Checkpoints\n(Data Flow)" {
  style.stroke-dash: 3
}
chronos.task_manager2.slots2 <-> external.state_backend: "State Checkpoints\n(Data Flow)" {
  style.stroke-dash: 3
}

# Internal Coordination
chronos.task_manager.slots -> chronos.task_manager2.slots2: "Shuffle Data\n(Data Flow)" {
  style.stroke-dash: 4
}

# Styling
styles: {
  all: {
    style.font-color: "#e6edf3"
  }
  connection: {
    style.font-size: 10
    style.font-color: "#8b949e"
    style.stroke: "#8b949e"
  }
}