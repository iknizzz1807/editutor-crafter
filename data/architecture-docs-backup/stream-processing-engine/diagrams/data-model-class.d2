title: Core Data Model Class Relationships

base: {
  style: {
    stroke: "#8b949e"
    fill: "#1a1a2e"
    font-color: "#e6edf3"
  }
}

StreamElements: {
  style: {
    stroke: "#3fb950"
    bold: true
  }

  Record: {
    shape: class
    timestamp: int64
    getTimestamp(): int64
  }

  StreamRecord: {
    shape: class
    value: any
    timestamp: int64
    getValue(): any
    getTimestamp(): int64
  }

  Watermark: {
    shape: class
    timestamp: int64
    isPeriodic(): bool
    getTimestamp(): int64
  }

  CheckpointBarrier: {
    shape: class
    checkpointId: int64
    timestamp: int64
    getCheckpointId(): int64
  }
}

Windowing: {
  style: {
    stroke: "#3fb950"
    bold: true
  }

  Window: {
    shape: class
    start: int64
    end: int64
    maxTimestamp: int64
    getStart(): int64
    getEnd(): int64
  }
}

StateManagement: {
  style: {
    stroke: "#3fb950"
    bold: true
  }

  ValueState: {
    shape: class
    interface: true
    value: T
    update(value: T): void
    get(): T
    clear(): void
  }

  ListState: {
    shape: class
    interface: true
    values: List<T>
    add(value: T): void
    get(): List<T>
    clear(): void
  }
}

StreamElements.Record -> StreamElements.StreamRecord
StreamElements.Record -> StreamElements.Watermark
StreamElements.Record -> StreamElements.CheckpointBarrier

StreamElements.Watermark -> Windowing.Window: marks time for {
  style: {
    stroke-dash: 3
  }
}

StreamElements.StreamRecord -> Windowing.Window: assigned to {
  style: {
    stroke-dash: 3
  }
}

StateManagement.ValueState -> StreamElements.StreamRecord: stores {
  style: {
    stroke-dash: 3
  }
}

StateManagement.ListState -> StreamElements.StreamRecord: stores {
  style: {
    stroke-dash: 3
  }
}

Note: {
  shape: text
  label: |md
    ## Core Data Model Relationships

    **Record** is the base type for all stream elements.

    **StreamRecord** carries user data payload with timestamp.

    **Watermark** marks event time progress for windowing.

    **CheckpointBarrier** triggers exactly-once checkpoints.

    **Window** defines temporal boundaries for aggregations.

    **ValueState/ListState** interfaces for per-key operator state.
  |
  style: {
    fill: "#0f3460"
    stroke: "#3fb950"
  }
}