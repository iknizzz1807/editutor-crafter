classes: {
  core_class: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  composition: {
    style.stroke: "#3fb950"
    style.stroke-width: 2
    style.font-color: "#e6edf3"
  }
  
  dependency: {
    style.stroke: "#8b949e"
    style.stroke-dash: 3
    style.font-color: "#8b949e"
  }
}

title: Data Model and Type Relationships {
  near: top-center
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
}

GameBoard: {
  shape: class
  class: core_class
  - "grid: Cell[][]"
  - "width: number"
  - "height: number"
  + "isValidPosition(tetromino: Tetromino, x: number, y: number): boolean"
  + "placePiece(tetromino: Tetromino, x: number, y: number): void"
  + "clearLines(): number[]"
  + "getCell(row: number, col: number): Cell"
}

Cell: {
  shape: class
  class: core_class
  - "isEmpty: boolean"
  - "color: Color"
  - "pieceId: string"
  + "clear(): void"
  + "occupy(color: Color, pieceId: string): void"
}

Tetromino: {
  shape: class
  class: core_class
  - "type: TetrominoType"
  - "shape: boolean[][]"
  - "color: Color"
  - "rotationState: number"
  + "rotate(): void"
  + "getRotatedShape(): boolean[][]"
  + "clone(): Tetromino"
}

TetrominoType: {
  shape: class
  class: core_class
  - "I: string"
  - "O: string"
  - "T: string"
  - "S: string"
  - "Z: string"
  - "J: string"
  - "L: string"
}

Position: {
  shape: class
  class: core_class
  - "x: number"
  - "y: number"
  + "add(other: Position): Position"
  + "equals(other: Position): boolean"
}

GameState: {
  shape: class
  class: core_class
  - "board: GameBoard"
  - "currentPiece: Tetromino"
  - "currentPosition: Position"
  - "nextPiece: Tetromino"
  - "score: number"
  - "level: number"
  - "linesCleared: number"
  - "isGameOver: boolean"
  - "dropTimer: number"
  + "update(deltaTime: number): void"
  + "movePiece(direction: Direction): boolean"
  + "rotatePiece(): boolean"
  + "dropPiece(): void"
  + "lockPiece(): void"
}

Color: {
  shape: class
  class: core_class
  - "RED: string"
  - "BLUE: string"
  - "GREEN: string"
  - "YELLOW: string"
  - "ORANGE: string"
  - "PURPLE: string"
  - "CYAN: string"
}

Direction: {
  shape: class
  class: core_class
  - "LEFT: string"
  - "RIGHT: string"
  - "DOWN: string"
}

GameBoard -> Cell: contains 200 {
  class: composition
}

GameState -> GameBoard: owns {
  class: composition
}

GameState -> Tetromino: current and next {
  class: composition
}

GameState -> Position: tracks {
  class: composition
}

Tetromino -> TetrominoType: uses {
  class: dependency
}

Tetromino -> Color: has {
  class: dependency
}

Cell -> Color: stores {
  class: dependency
}

GameState -> Direction: uses for movement {
  class: dependency
}

legend: |md
  **Relationships:**
  ━━━ Composition (owns/contains)
  ┅┅┅ Dependency (uses/references)
| {
  shape: text
  near: bottom-right
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}