Game State Machine: {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

classes: {
  state: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  final_state: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
    style.double-border: true
  }
  
  initial_state: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
  }
  
  transition: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  user_transition: {
    style.stroke: "#ffd700"
    style.font-color: "#ffd700"
  }
  
  game_transition: {
    style.stroke: "#ff6b6b"
    style.font-color: "#ff6b6b"
  }
}

Game State Machine.init: {
  shape: circle
  label: ""
  class: initial_state
}

Game State Machine.Menu: {
  shape: circle
  class: state
}

Game State Machine.Playing: {
  shape: circle
  class: state
}

Game State Machine.Paused: {
  shape: circle
  class: state
}

Game State Machine.Game Over: {
  shape: circle
  class: final_state
}

Game State Machine.init -> Game State Machine.Menu: start {
  class: transition
}

Game State Machine.Menu -> Game State Machine.Playing: start game {
  class: user_transition
}

Game State Machine.Playing -> Game State Machine.Paused: pause key {
  class: user_transition
}

Game State Machine.Paused -> Game State Machine.Playing: resume key {
  class: user_transition
}

Game State Machine.Playing -> Game State Machine.Game Over: no valid moves {
  class: game_transition
}

Game State Machine.Game Over -> Game State Machine.Menu: restart {
  class: user_transition
}

Game State Machine.Paused -> Game State Machine.Menu: quit to menu {
  class: user_transition
}

Game State Machine.Playing -> Game State Machine.Menu: quit to menu {
  class: user_transition
}

Game State Machine.legend: Legend {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  user_legend: User Input {
    style.font-color: "#ffd700"
    style.bold: true
  }
  
  game_legend: Game Event {
    style.font-color: "#ff6b6b"
    style.bold: true
  }
}