shape: sequence_diagram

classes: {
  dark_theme: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  important: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  token: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

scanner: Scanner {
  class: dark_theme
}
input: "Input: let x = 42;" {
  class: dark_theme
}
position: Position Tracker {
  class: dark_theme
}
tokens: Token Stream {
  class: dark_theme
}

scanner -> input: "Read l (pos 0)"
scanner -> scanner: "State: SCANNING_IDENTIFIER"
position -> position: "Update pos=1, col=1"
scanner -> input: "Read e (pos 1)"
scanner -> input: "Read t (pos 2)"
position -> position: "Update pos=3, col=3"
scanner -> input: "Read space (pos 3) - End identifier"
scanner -> tokens: "Emit IDENTIFIER(let) at pos 0-2"
tokens -> tokens: "Store: {type: IDENTIFIER, lexeme: let, line: 1, col: 0-2}"

scanner -> input: "Skip whitespace (pos 3)"
position -> position: "Update pos=4, col=4"
scanner -> input: "Read x (pos 4)"
scanner -> scanner: "State: SCANNING_IDENTIFIER"
position -> position: "Update pos=5, col=5"
scanner -> input: "Read space (pos 5) - End identifier"
scanner -> tokens: "Emit IDENTIFIER(x) at pos 4"
tokens -> tokens: "Store: {type: IDENTIFIER, lexeme: x, line: 1, col: 4}"

scanner -> input: "Skip whitespace (pos 5)"
scanner -> input: "Read = (pos 6)"
scanner -> tokens: "Emit EQUAL(=) at pos 6"
tokens -> tokens: "Store: {type: EQUAL, lexeme: =, line: 1, col: 6}"

scanner -> input: "Skip whitespace (pos 7)"
scanner -> input: "Read 4 (pos 8)"
scanner -> scanner: "State: SCANNING_NUMBER"
position -> position: "Update pos=9, col=9"
scanner -> input: "Read 2 (pos 9)"
position -> position: "Update pos=10, col=10"
scanner -> input: "Read ; (pos 10) - End number"
scanner -> tokens: "Emit NUMBER(42) at pos 8-9"
tokens -> tokens: "Store: {type: NUMBER, lexeme: 42, line: 1, col: 8-9}"

scanner -> input: "Read ; (pos 10)"
scanner -> tokens: "Emit SEMICOLON(;) at pos 10"
tokens -> tokens: "Store: {type: SEMICOLON, lexeme: ;, line: 1, col: 10}"

scanner -> tokens: "Emit EOF at pos 11"
tokens -> tokens: "Final tokens: IDENTIFIER(let), IDENTIFIER(x), EQUAL(=), NUMBER(42), SEMICOLON(;), EOF"