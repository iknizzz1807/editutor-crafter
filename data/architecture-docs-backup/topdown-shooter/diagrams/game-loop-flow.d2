title: Game Loop Execution Flow {
  near: top-center
  style.font-size: 18
  style.bold: true
  style.font-color: "#e6edf3"
}

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  timing: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  decision: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  
  arrow: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

start: Frame Start {
  shape: circle
  class: process
}

input: Input Processing {
  class: process
}

physics: Update Physics {
  class: process
}

ai: Update AI {
  class: process
}

collision: Collision Detection {
  class: process
}

render: Render {
  class: process
}

timing_check: Frame Time\nCheck {
  shape: diamond
  class: decision
}

sleep: Sleep/Wait {
  class: timing
}

next_frame: Next Frame {
  shape: circle
  class: process
}

start -> input: {class: arrow}
input -> physics: {class: arrow}
physics -> ai: {class: arrow}
ai -> collision: {class: arrow}
collision -> render: {class: arrow}
render -> timing_check: {class: arrow}

timing_check -> sleep: Frame time\n< target {class: arrow}
timing_check -> next_frame: Frame time\n>= target {class: arrow}

sleep -> next_frame: {class: arrow}
next_frame -> start: Continue loop {
  class: arrow
  style.stroke-dash: 3
}

note: |md
  **60 FPS Target:** Each frame must complete in ~16.67ms
  
  **Fixed Timestep:** Game logic runs at consistent intervals
  **Variable Rendering:** Graphics adapt to available time
| {
  shape: page
  near: bottom-right
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}