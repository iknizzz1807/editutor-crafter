title: System Component Overview

# Define color scheme using classes
classes: {
  primary_component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
    style.bold: true
  }
  data_component: {
    style.fill: "#16213e"
    style.stroke: "#58a6ff"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
  }
  connection: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

# Core Components
vector_clock: VectorClock {
  shape: rectangle
  class: primary_component
  increment: "increment()"
  merge: "merge(other)"
  compare: "compare(other)"
  copy: "copy()"
}

conflict_detector: ConflictDetector {
  shape: rectangle
  class: primary_component
  detect: "detectConflict()"
  resolve: "resolveConflict()"
  analyze: "analyzeCausality()"
}

version_store: VersionStore {
  shape: cylinder
  class: data_component
  store: "store(version)"
  retrieve: "retrieve(key)"
  prune: "pruneOldVersions()"
}

distributed_node: DistributedNode {
  shape: rectangle
  class: primary_component
  send: "sendMessage()"
  receive: "receiveMessage()"
  sync: "synchronize()"
  getId: "getNodeId()"
}

# Data Flow Connections
distributed_node -> vector_clock: updates local clock {
  class: connection
}

vector_clock -> distributed_node: provides timestamp {
  class: connection
}

distributed_node -> conflict_detector: triggers analysis {
  class: connection
}

conflict_detector -> vector_clock: compares clocks {
  class: connection
}

conflict_detector -> version_store: checks versions {
  class: connection
}

version_store -> conflict_detector: returns history {
  class: connection
}

distributed_node -> version_store: stores/retrieves data {
  class: connection
}

vector_clock -> version_store: timestamps versions {
  class: connection
}

# Message Flow
message_flow: Message Flow {
  class: data_component
  shape: cloud
  near: top-center
}

message_flow -> distributed_node: incoming messages {
  class: connection
}

distributed_node -> message_flow: outgoing messages {
  class: connection
}