direction: down

classes: {
  layer_container: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
  }
  
  hub_node: {
    style.fill: "#3fb950"
    style.stroke: "#ffffff"
    style.font-color: "#000000"
    style.bold: true
  }
  
  regular_node: {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  query_node: {
    style.fill: "#d63031"
    style.stroke: "#ffffff"
    style.font-color: "#ffffff"
    style.bold: true
  }
  
  long_range: {
    style.stroke: "#3fb950"
    style.stroke-width: 3
  }
  
  medium_range: {
    style.stroke: "#74b9ff"
    style.stroke-width: 2
  }
  
  short_range: {
    style.stroke: "#8b949e"
    style.stroke-width: 1
  }
  
  search_path: {
    style.stroke: "#d63031"
    style.stroke-width: 4
    style.stroke-dash: 5
  }
}

title: HNSW Multi-Layer Graph Structure {
  style.font-size: 20
  style.font-color: "#e6edf3"
  style.bold: true
  near: top-center
}

layer_2: Layer 2 (Top) {
  class: layer_container
  
  h1: H1 {
    class: hub_node
  }
  h2: H2 {
    class: hub_node
  }
  
  h1 -> h2: long-range {
    class: long_range
  }
}

layer_1: Layer 1 (Middle) {
  class: layer_container
  
  n1: N1 {
    class: regular_node
  }
  n2: N2 {
    class: regular_node
  }
  n3: N3 {
    class: regular_node
  }
  n4: N4 {
    class: regular_node
  }
  n5: N5 {
    class: regular_node
  }
  
  n1 -> n2 {
    class: medium_range
  }
  n1 -> n4 {
    class: medium_range
  }
  n2 -> n3 {
    class: medium_range
  }
  n3 -> n5 {
    class: medium_range
  }
  n4 -> n5 {
    class: medium_range
  }
}

layer_0: Layer 0 (Base) {
  class: layer_container
  
  v1: V1 {
    class: regular_node
  }
  v2: V2 {
    class: regular_node
  }
  v3: V3 {
    class: regular_node
  }
  v4: V4 {
    class: regular_node
  }
  v5: V5 {
    class: regular_node
  }
  v6: V6 {
    class: regular_node
  }
  v7: V7 {
    class: regular_node
  }
  v8: V8 {
    class: regular_node
  }
  
  v1 -> v2 {
    class: short_range
  }
  v1 -> v3 {
    class: short_range
  }
  v2 -> v4 {
    class: short_range
  }
  v3 -> v5 {
    class: short_range
  }
  v4 -> v6 {
    class: short_range
  }
  v5 -> v7 {
    class: short_range
  }
  v6 -> v8 {
    class: short_range
  }
  v7 -> v8 {
    class: short_range
  }
  v2 -> v3 {
    class: short_range
  }
  v4 -> v5 {
    class: short_range
  }
  v6 -> v7 {
    class: short_range
  }
}

query: Q {
  class: query_node
  near: top-left
}

layer_2 -> layer_1: Hierarchical {
  class: long_range
}

layer_1 -> layer_0: Connections {
  class: medium_range
}

query -> layer_2.h1: 1. Start Search {
  class: search_path
}

layer_2.h1 -> layer_1.n2: 2. Navigate Down {
  class: search_path
}

layer_1.n2 -> layer_0.v4: 3. Find Base Layer {
  class: search_path
}

layer_0.v4 -> layer_0.v6: 4. Local Search {
  class: search_path
}

legend: |md
  **Search Process:**
  1. Start at hub node in top layer
  2. Navigate using long-range connections
  3. Move down layers progressively
  4. Perform local search in base layer
  
  **Connection Types:**
  - Green: Long-range (highways)
  - Blue: Medium-range (roads)
  - Gray: Short-range (streets)
  - Red: Search path
| {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  near: bottom-right
}