shape: sequence_diagram
client: Client
api: API Gateway
validator: Request Validator
storage: Vector Storage
index: HNSW Index
response: Response Handler

client -> api: POST /vectors\n{vector_data, metadata}
api -> validator: Validate request format
validator -> validator: Check dimensions\nValidate data types
validator -> api: Validation result

api -> storage: Store vector data
storage -> storage: Assign vector ID\nPersist to disk
storage -> api: Storage confirmation\n{vector_id, status}

api -> index: Update HNSW index
index -> index: Calculate insertion point\nUpdate graph structure
index -> index: Rebalance connections\nOptimize layers
index -> api: Index update complete

api -> response: Format success response
response -> response: Include vector_id\nAdd metadata
response -> client: 201 Created\n{vector_id, status}

client.style.fill: "#1a1a2e"
client.style.stroke: "#3fb950"
client.style.font-color: "#e6edf3"

api.style.fill: "#1a1a2e"
api.style.stroke: "#3fb950"
api.style.font-color: "#e6edf3"

validator.style.fill: "#16213e"
validator.style.stroke: "#3fb950"
validator.style.font-color: "#e6edf3"

storage.style.fill: "#16213e"
storage.style.stroke: "#3fb950"
storage.style.font-color: "#e6edf3"

index.style.fill: "#0f3460"
index.style.stroke: "#3fb950"
index.style.font-color: "#e6edf3"
index.style.bold: true

response.style.fill: "#16213e"
response.style.stroke: "#3fb950"
response.style.font-color: "#e6edf3"