shape: sequence_diagram

client: Client
upload_service: Upload Service
storage: Storage

client -> upload_service: Initialize upload (filename, size)
upload_service -> storage: Create upload session
storage -> upload_service: Return session ID
upload_service -> client: Upload session created

client -> upload_service: Upload chunk 1
upload_service -> storage: Store chunk 1
storage -> upload_service: Chunk stored
upload_service -> client: Chunk 1 progress

client -> upload_service: Upload chunk 2
upload_service -> storage: Store chunk 2
storage -> upload_service: Chunk stored
upload_service -> client: Chunk 2 progress

client -> upload_service: Connection lost
client -> upload_service: Resume upload request
upload_service -> storage: Query uploaded chunks
storage -> upload_service: Chunks 1-2 complete
upload_service -> client: Resume from chunk 3

client -> upload_service: Upload chunk 3
upload_service -> storage: Store chunk 3
storage -> upload_service: Chunk stored
upload_service -> client: Chunk 3 progress

client -> upload_service: Finalize upload
upload_service -> storage: Validate and merge chunks
storage -> upload_service: File assembled
upload_service -> client: Upload complete

client.style.fill: "#1a1a2e"
client.style.stroke: "#3fb950"
client.style.font-color: "#e6edf3"

upload_service.style.fill: "#16213e"
upload_service.style.stroke: "#3fb950"
upload_service.style.font-color: "#e6edf3"
upload_service.style.bold: true

storage.style.fill: "#1a1a2e"
storage.style.stroke: "#3fb950"
storage.style.font-color: "#e6edf3"