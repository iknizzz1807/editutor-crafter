direction: down

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  error: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    style.bold: true
  }
  success: {
    style.fill: "#00b894"
    style.stroke: "#00a085"
    style.font-color: "#ffffff"
    style.bold: true
  }
}

title: Page Fault Handling Flow {
  shape: text
  style.font-size: 24
  style.font-color: "#e6edf3"
  style.bold: true
  near: top-center
}

start: Start {
  shape: circle
  class: success
}

page_fault: Page Fault\nOccurs {
  class: process
}

check_valid: Valid Virtual\nAddress? {
  shape: diamond
  class: decision
}

segfault: Segmentation\nFault {
  class: error
}

check_permissions: Check Page\nPermissions {
  class: process
}

permission_fault: Permission\nViolation {
  class: error
}

check_present: Page Present\nin Memory? {
  shape: diamond
  class: decision
}

tlb_update: Update TLB\nand Continue {
  class: success
}

check_physical: Physical Memory\nAvailable? {
  shape: diamond
  class: decision
}

page_replacement: Run Page\nReplacement\nAlgorithm {
  class: process
}

load_page: Load Page\nfrom Disk {
  class: process
}

update_tables: Update Page\nTables {
  class: process
}

complete: Page Fault\nHandled {
  shape: circle
  class: success
}

start -> page_fault
page_fault -> check_valid
check_valid -> segfault: No
check_valid -> check_permissions: Yes
check_permissions -> permission_fault: Invalid
check_permissions -> check_present: Valid
check_present -> tlb_update: Yes
check_present -> check_physical: No
check_physical -> load_page: Yes
check_physical -> page_replacement: No
page_replacement -> load_page: Frame freed
load_page -> update_tables
update_tables -> complete
tlb_update -> complete