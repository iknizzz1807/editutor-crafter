direction: right

classes: {
  task_node: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  start_end: {
    style.fill: "#3fb950"
    style.stroke: "#e6edf3"
    style.font-color: "#1a1a2e"
    style.bold: true
  }
  parallel: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

start: Start {
  shape: circle
  class: start_end
}

task_a: Task A\nData Ingestion {
  class: task_node
}

task_b: Task B\nValidation {
  class: task_node
}

parallel_group: Parallel Processing {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.stroke-dash: 3
  
  task_c1: Task C1\nTransform A {
    class: parallel
  }
  
  task_c2: Task C2\nTransform B {
    class: parallel
  }
  
  task_c3: Task C3\nTransform C {
    class: parallel
  }
}

task_d: Task D\nAggregate Results {
  class: task_node
}

decision: Data Quality\nCheck? {
  shape: diamond
  class: task_node
}

task_e1: Task E1\nCleanup {
  class: parallel
}

task_e2: Task E2\nNotification {
  class: parallel
}

task_f: Task F\nFinal Report {
  class: task_node
}

end: Complete {
  shape: circle
  class: start_end
}

start -> task_a: trigger
task_a -> task_b: raw data
task_b -> parallel_group.task_c1: valid data
task_b -> parallel_group.task_c2: valid data  
task_b -> parallel_group.task_c3: valid data
parallel_group.task_c1 -> task_d: results
parallel_group.task_c2 -> task_d: results
parallel_group.task_c3 -> task_d: results
task_d -> decision: aggregated
decision -> task_e1: failed {
  style.stroke: "#d63031"
}
decision -> task_f: passed {
  style.stroke: "#3fb950"
}
task_e1 -> task_e2: cleaned
task_e2 -> end: notified
task_f -> end: success