direction: right

Coordinator: {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

Participant1: {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Participant2: {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Participant3: {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Coordinator.log1: Log PREPARE {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Coordinator -> Coordinator.log1: 1. Write PREPARE to WAL

Coordinator -> Participant1: 2. PREPARE {
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Coordinator -> Participant2: 3. PREPARE {
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Coordinator -> Participant3: 4. PREPARE {
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Participant1.log1: Log VOTE_COMMIT {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant1 -> Participant1.log1: 5. Write VOTE_COMMIT to log

Participant1 -> Coordinator: 6. VOTE_COMMIT {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant2.log1: Log VOTE_COMMIT {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant2 -> Participant2.log1: 7. Write VOTE_COMMIT to log

Participant2 -> Coordinator: 8. VOTE_COMMIT {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant3.log1: Log VOTE_COMMIT {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant3 -> Participant3.log1: 9. Write VOTE_COMMIT to log

Participant3 -> Coordinator: 10. VOTE_COMMIT {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Coordinator.log2: Log COMMIT decision {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Coordinator -> Coordinator.log2: 11. Write COMMIT to WAL

Coordinator -> Participant1: 12. COMMIT {
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Coordinator -> Participant2: 13. COMMIT {
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Coordinator -> Participant3: 14. COMMIT {
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Participant1.log2: Log COMMIT {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant1 -> Participant1.log2: 15. Write COMMIT to log

Participant1 -> Coordinator: 16. ACK {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant2.log2: Log COMMIT {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant2 -> Participant2.log2: 17. Write COMMIT to log

Participant2 -> Coordinator: 18. ACK {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant3.log2: Log COMMIT {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Participant3 -> Participant3.log2: 19. Write COMMIT to log

Participant3 -> Coordinator: 20. ACK {
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}