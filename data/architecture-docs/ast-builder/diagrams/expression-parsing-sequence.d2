shape: sequence_diagram

# Title and description
title: Expression Parsing Sequence Diagram: "1 + 2 * 3"
description: Shows interaction sequence for parsing '1 + 2 * 3': TokenStream → ExpressionParser method calls → AST node construction. Demonstrates precedence climbing call stack.

# Actors/participants
token_stream: TokenStream {
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}
expression_parser: ExpressionParser {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}
ast_nodes: AST Nodes {
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

# Main parsing flow
token_stream -> expression_parser: nextToken(): NUMBER(1)
expression_parser -> ast_nodes: create NumberNode(1)
ast_nodes -> expression_parser: return number1

token_stream -> expression_parser: nextToken(): PLUS(+)
expression_parser -> expression_parser: parseExpression(minPrec=2)
  token_stream -> expression_parser: nextToken(): NUMBER(2)
  expression_parser -> ast_nodes: create NumberNode(2)
  ast_nodes -> expression_parser: return number2
  
  token_stream -> expression_parser: nextToken(): STAR(*)
  expression_parser -> expression_parser: parseExpression(minPrec=3)
    token_stream -> expression_parser: nextToken(): NUMBER(3)
    expression_parser -> ast_nodes: create NumberNode(3)
    ast_nodes -> expression_parser: return number3
    
    token_stream -> expression_parser: nextToken(): EOF
  expression_parser -> ast_nodes: create BinaryOpNode(*, number2, number3)
  ast_nodes -> expression_parser: return multiply_node
expression_parser -> ast_nodes: create BinaryOpNode(+, number1, multiply_node)
ast_nodes -> expression_parser: return final_ast