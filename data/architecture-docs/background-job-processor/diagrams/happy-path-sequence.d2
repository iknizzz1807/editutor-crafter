shape: sequence_diagram

title: Happy Path Job Execution Sequence
description: "Sequence diagram showing: Producer → Queue Manager → Redis → Worker → Job Handler → Result storage. Include all component interactions."

producer: Producer {
  label: "Job Producer"
  style.font-color: "#e6edf3"
}
queue_manager: Queue Manager {
  label: "Queue Manager\n(Mail Clerk)"
  style.font-color: "#e6edf3"
}
redis: Redis {
  label: "Redis Queue\n(Sorting Bins)"
  style.font-color: "#e6edf3"
}
worker: Worker {
  label: "Worker Process\n(Factory Worker)"
  style.font-color: "#e6edf3"
}
job_handler: Job Handler {
  label: "Job Handler\n(Specialized Tool)"
  style.font-color: "#e6edf3"
}
result_storage: Result Storage {
  label: "Result Storage\n(Finished Pile)"
  style.font-color: "#e6edf3"
}

producer -> queue_manager: "enqueue(job_definition)"
queue_manager -> producer: "returns job_id"
queue_manager -> redis: "validate_and_store(job_id, payload, queue_name, priority)"
redis -> queue_manager: "acknowledge"
worker -> redis: "poll_queues(queues, priority_weights)"
redis -> worker: "returns job_data (job_id, payload)"
worker -> job_handler: "execute(payload)"
job_handler -> result_storage: "store_result(job_id, result)"
job_handler -> worker: "returns success"
worker -> redis: "delete(job_id)"
worker -> result_storage: "mark_complete(job_id)"