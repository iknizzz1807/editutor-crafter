title: B-tree System Components

direction: right
spacing: 100

classes: {
  component_container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.border-radius: 5
  }
  component: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  operation: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

btree_container: BTree {
  class: component_container
  shape: rectangle
  
  btree: BTree {
    class: component
    shape: rectangle
    label: "BTree"
    
    fields: "• root: Node"
    fields2: "• t: int (minimum degree)"
    fields3: "• height: int"
    
    methods: "• get_root(): Node"
    methods2: "• set_root(node: Node)"
    methods3: "• traverse()"
  }
}

node_container: Node {
  class: component_container
  shape: rectangle
  
  node: Node {
    class: component
    shape: rectangle
    label: "Node"
    
    fields: "• keys: int[]"
    fields2: "• children: Node[]"
    fields3: "• n: int (key count)"
    fields4: "• leaf: boolean"
    
    methods: "• search(k: int): Result"
    methods2: "• split_child(i: int)"
    methods3: "• insert_non_full(k: int)"
    methods4: "• remove(k: int)"
  }
}

operations_container: Operations {
  class: component_container
  shape: rectangle
  
  operations: Operations {
    class: component
    shape: rectangle
    label: "Operations"
    direction: down
    
    search: Search {
      class: operation
      shape: rectangle
      label: "Search"

      step1: "• Traverse from root"
      step2: "• Binary search in node"
      step3: "• Recursively follow children"
    }

    insert: Insert {
      class: operation
      shape: rectangle
      label: "Insert"

      step1: "• Find appropriate leaf"
      step2: "• Split full nodes"
      step3: "• Propagate splits upward"
    }

    delete: Delete {
      class: operation
      shape: rectangle
      label: "Delete"

      step1: "• Locate key"
      step2: "• Handle leaf/internal cases"
      step3: "• Merge/borrow if needed"
    }
  }
}

# Relationships
btree_container.btree -> node_container.node: "contains (root)"
btree_container.btree -> operations_container.operations: "orchestrates"
operations_container.operations.search -> node_container.node: "traverses"
operations_container.operations.insert -> node_container.node: "modifies"
operations_container.operations.delete -> node_container.node: "removes from"