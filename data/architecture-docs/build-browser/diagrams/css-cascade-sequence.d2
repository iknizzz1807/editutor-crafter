shape: sequence_diagram

DOM_Element: DOM Element {
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
}

CSS_Parser: CSS Parser {
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
}

Style_Engine: Style Engine {
  style.fill: "#16213e"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
  style.bold: true
}

Cascade_Resolver: Cascade Resolver {
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
}

Computed_Styles: Computed Styles {
  style.fill: "#0f3460"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
  style.bold: true
}

DOM_Element -> Style_Engine: Request styles for element
Style_Engine -> CSS_Parser: Get all CSS rules
CSS_Parser -> Style_Engine: Return parsed rules
Style_Engine -> Style_Engine: Match selectors to element
Style_Engine -> Style_Engine: Filter applicable rules
Style_Engine -> Cascade_Resolver: Send matched rules
Cascade_Resolver -> Cascade_Resolver: Calculate specificity scores
Cascade_Resolver -> Cascade_Resolver: Apply source order priority
Cascade_Resolver -> Cascade_Resolver: Handle !important declarations
Cascade_Resolver -> Cascade_Resolver: Resolve inheritance
Cascade_Resolver -> Computed_Styles: Generate final styles
Computed_Styles -> DOM_Element: Apply computed styles

notes: |md
  ## CSS Cascade Resolution Process
  
  1. **Rule Matching**: Find all CSS rules whose selectors match the element
  2. **Specificity**: Calculate specificity scores (inline, IDs, classes, elements)
  3. **Source Order**: Later rules override earlier ones with same specificity
  4. **Importance**: !important declarations take precedence
  5. **Inheritance**: Properties inherit from parent elements where applicable
| {
  shape: page
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#8b949e"
}