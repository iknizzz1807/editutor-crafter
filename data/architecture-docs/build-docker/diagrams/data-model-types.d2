title: "Data Model Type Relationships"

# Core enumeration
ContainerState: {
  shape: class
  +Created
  +Running
  +Paused
  +Stopped
  +Exited
}

# Image-related types
Image: {
  shape: class
  +ID: string
  +Name: string
  +Tag: string
  +Digest: string
  +Size: int64
  +CreatedAt: time.Time
}

ImageLayer: {
  shape: class
  +ID: string
  +Digest: string
  +Size: int64
  +MediaType: string
  +Compression: string
  +DiffID: string
}

# Network configuration
NetworkConfig: {
  shape: class
  +NetworkMode: string
  +IPAddress: string
  +Gateway: string
  +Subnet: string
  +PortMappings: "[]string"
  +DNS: "[]string"
}

# Container configuration
ContainerConfig: {
  shape: class
  +ID: string
  +Name: string
  +ImageID: string
  +Command: "[]string"
  +Args: "[]string"
  +Env: "[]string"
  +WorkingDir: string
  +User: string
  +Hostname: string
  +Labels: "Map<string, string>"
  +ResourceLimits: ResourceLimits
}

# Resource limits structure
ResourceLimits: {
  shape: class
  +CPUShares: int64
  +MemoryMB: int64
  +MemorySwapMB: int64
  +CPUSetCPUs: string
  +BlkIOWeight: int64
  +PidsLimit: int64
}

# Runtime container
Container: {
  shape: class
  +ID: string
  +Name: string
  +State: ContainerState
  +Pid: int
  +ExitCode: int
  +CreatedAt: time.Time
  +StartedAt: time.Time
  +FinishedAt: time.Time
  +BundlePath: string
}

# Relationships - Composition
ImageLayer -> Image: "composed of *" {
  style.stroke: "#3fb950"
  style.font-color: "#3fb950"
  style.bold: true
}

ResourceLimits -> ContainerConfig: "contains 1" {
  style.stroke: "#3fb950"
  style.font-color: "#3fb950"
  style.bold: true
}

NetworkConfig -> ContainerConfig: "contains 1" {
  style.stroke: "#3fb950"
  style.font-color: "#3fb950"
  style.bold: true
}

# Relationships - Reference
Container -> ContainerConfig: "configured by 1"
Container -> Image: "based on 1"
Container -> ContainerState: "has state 1"
ContainerConfig -> Image: "references 1"

# Grouping for clarity
images: {
  Image
  ImageLayer
  style.stroke: "#3fb950"
}

config: {
  ContainerConfig
  ResourceLimits
  NetworkConfig
  style.stroke: "#3fb950"
}

runtime: {
  Container
  ContainerState
  style.stroke: "#3fb950"
}

# Connections between groups
images -> config
config -> runtime
