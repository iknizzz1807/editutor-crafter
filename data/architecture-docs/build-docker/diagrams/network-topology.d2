direction: right

host_namespace: Host Network Namespace {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  docker0: docker0 (bridge) {
    style.fill: "#1a1a2e"
    shape: circle
    style.bold: true
  }

  eth0: eth0 (physical) {
    shape: cylinder
    style.fill: "#1a1a2e"
  }

  veth0_host: veth0 {
    shape: oval
  }
  veth1_host: veth1 {
    shape: oval
  }

  iptables: iptables NAT {
    style.fill: "#16213e"
    shape: page
    iptables_nat: |-
      **NAT Rules:**
      - `-A POSTROUTING -s 172.17.0.0/16 -j MASQUERADE`
      - `-A FORWARD -i docker0 -j ACCEPT`
      - `-A FORWARD -o docker0 -j ACCEPT`
    -|
  }

  docker0 -> veth0_host
  docker0 -> veth1_host
  docker0 -> eth0: routed
  docker0 -> iptables: applies
}

container1_ns: Container 1 Network Namespace {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  container1_eth0: eth0 {
    shape: oval
  }
  container1_process: Container Process {
    shape: rectangle
  }

  container1_eth0 -> container1_process: network
}

container2_ns: Container 2 Network Namespace {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  container2_eth0: eth0 {
    shape: oval
  }
  container2_process: Container Process {
    shape: rectangle
  }

  container2_eth0 -> container2_process: network
}

external_network: External Network/Internet {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  shape: cloud
}

veth0_host <-> container1_eth0: veth pair
veth1_host <-> container2_eth0: veth pair
eth0 -> external_network: default route