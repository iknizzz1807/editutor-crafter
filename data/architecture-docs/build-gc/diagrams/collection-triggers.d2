direction: down

# Decision start
start: Check Collection Triggers {
  shape: circle
  style.fill: "#3fb950"
  style.font-color: "#000000"
}

# Main decision points
heap_check: Heap Occupancy > Threshold? {
  shape: diamond
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

nursery_check: Nursery Full? {
  shape: diamond
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

allocation_rate: High Allocation Rate? {
  shape: diamond
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

old_gen_check: Old Generation > 85%? {
  shape: diamond
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

# Collection actions
minor_gc: Minor GC\n(Young Generation Only) {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

major_gc: Major GC\n(Full Heap Collection) {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

no_gc: No Collection Needed {
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

concurrent_gc: Concurrent GC\n(Background Collection) {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.bold: true
}

# Flow connections
start -> heap_check

heap_check -> nursery_check: Yes
heap_check -> no_gc: No

nursery_check -> allocation_rate: Yes
nursery_check -> old_gen_check: No

allocation_rate -> minor_gc: Yes
allocation_rate -> concurrent_gc: No

old_gen_check -> major_gc: Yes
old_gen_check -> minor_gc: No

# Edge labels styling
heap_check.style.stroke-width: 2
nursery_check.style.stroke-width: 2
allocation_rate.style.stroke-width: 2
old_gen_check.style.stroke-width: 2