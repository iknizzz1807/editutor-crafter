title: Memory Heap Layout {
  style.font-size: 24
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
}

heap: Heap Memory {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"

  young_gen: Young Generation {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    
    eden: Eden Space {
      style.fill: "#0f3460"
      style.stroke: "#8b949e"
      style.font-color: "#e6edf3"
      
      alloc_ptr: Allocation Pointer {
        shape: diamond
        style.fill: "#3fb950"
        style.font-color: "#1a1a2e"
        style.bold: true
      }
    }
    
    survivor0: Survivor Space 0 (S0) {
      style.fill: "#0f3460"
      style.stroke: "#8b949e"
      style.font-color: "#e6edf3"
    }
    
    survivor1: Survivor Space 1 (S1) {
      style.fill: "#0f3460"
      style.stroke: "#8b949e"
      style.font-color: "#e6edf3"
    }
  }
  
  old_gen: Old Generation {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    
    tenured: Tenured Space {
      style.fill: "#0f3460"
      style.stroke: "#8b949e"
      style.font-color: "#e6edf3"
      
      old_alloc_ptr: Allocation Pointer {
        shape: diamond
        style.fill: "#3fb950"
        style.font-color: "#1a1a2e"
        style.bold: true
      }
    }
  }
  
  metadata: Metadata Area {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    
    free_lists: Free Lists {
      style.fill: "#0f3460"
      style.stroke: "#8b949e"
    }
    
    remembered_set: Remembered Set {
      style.fill: "#0f3460"
      style.stroke: "#8b949e"
    }
    
    mark_bitmap: Mark Bitmap {
      style.fill: "#0f3460"
      style.stroke: "#8b949e"
    }
  }
}

boundaries: Generation Boundaries {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  young_boundary: Young → Old {
    shape: oval
    style.stroke: "#3fb950"
    style.bold: true
  }
}

young_gen.eden -> young_gen.survivor0: Minor GC Copy {
  style.stroke: "#8b949e"
}

young_gen.survivor0 -> young_gen.survivor1: Survivor Copy {
  style.stroke: "#8b949e"
}

young_gen.survivor1 -> old_gen.tenured: Promotion {
  style.stroke: "#3fb950"
  style.bold: true
}

boundaries.young_boundary -> old_gen.tenured: Age Threshold {
  style.stroke: "#3fb950"
  style.bold: true
}

metadata.remembered_set -> old_gen.tenured: Cross-Gen References {
  style.stroke: "#8b949e"
}

metadata.mark_bitmap -> old_gen.tenured: GC Marks {
  style.stroke: "#8b949e"
}

allocation_flow: |md
  **Allocation Flow:**
  1. New objects → Eden Space
  2. Eden full → Minor GC
  3. Survivors copy between S0/S1
  4. Aged objects promote to Old Gen
| {
  shape: page
  style.fill: "#16213e"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
}