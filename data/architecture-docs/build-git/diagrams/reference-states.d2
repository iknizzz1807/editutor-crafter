direction: right

# Initial state
initial: {
  shape: circle
  style.fill: "#3fb950"
  style.stroke: "#3fb950"
  width: 20
  height: 20
}

# States
normal_branch: Normal Branch {
  shape: oval
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

detached_head: Detached HEAD {
  shape: oval
  style.fill: "#1a1a2e"
  style.stroke: "#d63031"
  style.font-color: "#e6edf3"
}

# Transitions
initial -> normal_branch: git init

normal_branch -> detached_head: git checkout <commit-hash> {
  style.stroke: "#8b949e"
}

normal_branch -> detached_head: git checkout <tag> {
  style.stroke: "#8b949e"
}

detached_head -> normal_branch: git checkout <branch-name> {
  style.stroke: "#8b949e"
}

detached_head -> normal_branch: git switch -c <new-branch> {
  style.stroke: "#8b949e"
}

normal_branch -> normal_branch: git checkout <other-branch> {
  style.stroke: "#8b949e"
}

# Warning state for detached HEAD
warning_note: |md
  **DETACHED HEAD**
  - HEAD points directly to commit
  - New commits may be lost
  - Switch to branch to keep changes
| {
  shape: page
  style.fill: "#d63031"
  style.font-color: "#ffffff"
  style.stroke: "#e17055"
}

detached_head -- warning_note: {
  style.stroke-dash: 3
  style.stroke: "#d63031"
}

# Branch state info
branch_note: |md
  **NORMAL BRANCH**
  - HEAD points to branch reference  
  - Branch reference points to commit
  - New commits advance branch
| {
  shape: page
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
}

normal_branch -- branch_note: {
  style.stroke-dash: 3
  style.stroke: "#3fb950"
}