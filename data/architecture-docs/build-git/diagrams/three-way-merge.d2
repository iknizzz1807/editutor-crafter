direction: down

title: Three-Way Merge Process {
  style.font-size: 20
  style.bold: true
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
}

start: Start Merge {
  shape: circle
  style.fill: "#3fb950"
  style.font-color: "#000000"
}

find_base: Find Merge Base {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

base_calc: |md
  **Calculate Common Ancestor**
  - Traverse commit history
  - Find lowest common ancestor
  - Use as merge base
| {
  shape: page
  style.fill: "#0f3460"
  style.font-color: "#e6edf3"
}

file_compare: Compare Files {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

conflict_check: Conflicting Changes? {
  shape: diamond
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

clean_merge: Clean Merge {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

conflict_markers: Add Conflict Markers {
  style.fill: "#d63031"
  style.font-color: "#ffffff"
  style.stroke: "#e17055"
  style.bold: true
}

merge_result: Generate Merge Result {
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

success: Merge Complete {
  shape: circle
  style.fill: "#3fb950"
  style.font-color: "#000000"
}

manual_resolve: Manual Resolution Required {
  shape: circle
  style.fill: "#d63031"
  style.font-color: "#ffffff"
}

start -> find_base
find_base -> base_calc
base_calc -> file_compare
file_compare -> conflict_check

conflict_check -> clean_merge: No conflicts {
  style.stroke: "#3fb950"
}

conflict_check -> conflict_markers: Yes, conflicts detected {
  style.stroke: "#d63031"
}

clean_merge -> merge_result
conflict_markers -> manual_resolve

merge_result -> success

comparison_details: |md
  **Three-Way Comparison:**
  - Base version (common ancestor)
  - Current branch version  
  - Incoming branch version
  - Detect overlapping changes
| {
  shape: page
  style.fill: "#0f3460"
  style.font-color: "#e6edf3"
}

file_compare -- comparison_details