# AST Node Class Diagram

ast_classes: {
  shape: class
  style: {
    fill: "#0f3460"
    stroke: "#3fb950"
    bold: true
  }
}

ast_node: ASTNode {
  shape: class
  style: {
    fill: "#16213e"
    stroke: "#8b949e"
    bold: false
  }
  loc: SourceLocation
  kind: ASTNodeKind
}

document: Document {
  shape: class
  style: {
    fill: "#16213e"
    stroke: "#8b949e"
  }
  definitions: "OperationDefinition[] | FragmentDefinition[]"
}

operation_definition: OperationDefinition {
  shape: class
  style: {
    fill: "#16213e"
    stroke: "#8b949e"
  }
  operation: OperationType
  name?: string
  variable_definitions?: "VariableDefinition[]"
  selection_set: SelectionSet
}

selection_set: SelectionSet {
  shape: class
  style: {
    fill: "#16213e"
    stroke: "#8b949e"
  }
  selections: "Selection[]"
  parent?: ASTNode
}

field: Field {
  shape: class
  style: {
    fill: "#16213e"
    stroke: "#8b949e"
  }
  name: string
  alias?: string
  arguments?: "Argument[]"
  selection_set?: SelectionSet
  parent: SelectionSet
}

argument: Argument {
  shape: class
  style: {
    fill: "#16213e"
    stroke: "#8b949e"
  }
  name: string
  value: Value
  parent: Field
}

fragment_definition: FragmentDefinition {
  shape: class
  style: {
    fill: "#16213e"
    stroke: "#8b949e"
  }
  name: string
  type_condition: NamedType
  selection_set: SelectionSet
}

fragment_spread: FragmentSpread {
  shape: class
  style: {
    fill: "#16213e"
    stroke: "#8b949e"
  }
  name: string
  parent: SelectionSet
}

value_types: {
  shape: class
  style: {
    fill: "#1a1a2e"
    stroke: "#8b949e"
    font-color: "#8b949e"
  }
}

string_value: StringValue {
  shape: class
}
int_value: IntValue {
  shape: class
}
float_value: FloatValue {
  shape: class
}
boolean_value: BooleanValue {
  shape: class
}
null_value: NullValue {
  shape: class
}
enum_value: EnumValue {
  shape: class
}
list_value: ListValue {
  shape: class
}
object_value: ObjectValue {
  shape: class
}
variable: Variable {
  shape: class
}

operation_types: {
  shape: class
  style: {
    fill: "#1a1a2e"
    stroke: "#8b949e"
    font-color: "#8b949e"
  }
}

query: QUERY {
  shape: class
}
mutation: MUTATION {
  shape: class
}
subscription: SUBSCRIPTION {
  shape: class
}

type_references: {
  shape: class
  style: {
    fill: "#1a1a2e"
    stroke: "#8b949e"
    font-color: "#8b949e"
  }
}

named_type: NamedType {
  shape: class
}
list_type: ListType {
  shape: class
}
non_null_type: NonNullType {
  shape: class
}

ast_node -> document: extends
ast_node -> operation_definition: extends
ast_node -> selection_set: extends
ast_node -> field: extends
ast_node -> argument: extends
ast_node -> fragment_definition: extends
ast_node -> fragment_spread: extends

document -> operation_definition: contains 1..*
document -> fragment_definition: contains 0..*
operation_definition -> selection_set: has one
selection_set -> field: contains 0..*
selection_set -> fragment_spread: contains 0..*
field -> argument: has 0..*
field -> selection_set: optional
fragment_definition -> selection_set: has one

argument.value -> value_types: references
operation_definition.operation -> operation_types: references
fragment_definition.type_condition -> named_type: references

type_references -> ast_node: "reference types"

note: {
  shape: page
  style: {
    fill: "#1a1a2e"
    stroke: "#3fb950"
    font-color: "#e6edf3"
  }
  text: |md
    **AST Node Hierarchy**

    The AST represents GraphQL queries as a tree structure:
    - **Document**: Root node containing all operations/fragments
    - **OperationDefinition**: Query, Mutation, or Subscription
    - **SelectionSet**: Group of fields to fetch
    - **Field**: Individual data field with arguments
    - **Argument**: Key-value pair for field parameters

    **Fragments**: Reusable sub-queries
  |
}