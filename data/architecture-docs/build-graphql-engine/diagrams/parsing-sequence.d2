shape: sequence_diagram

title: Query Parsing Sequence Diagram

client: Client {
  style.fill: "#16213e"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
}
api_server: API Server {
  style.fill: "#16213e"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
}
lexer: Lexer {
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#8b949e"
}
parser: Parser {
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#8b949e"
}
ast: AST {
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#8b949e"
}
validator: Validator {
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#8b949e"
}

client -> api_server: HTTP Request (GraphQL Query)
api_server -> lexer: Query String
lexer -> parser: Token Stream {
  style.stroke-dash: 3
}
parser -> ast: Create AST Nodes {
  style.stroke-dash: 3
}
parser -> ast: Build Document Node
parser -> ast: Build Operation Node
parser -> ast: Build Field Nodes
parser -> ast: Build Argument Nodes
ast -> validator: Abstract Syntax Tree
validator -> validator: Type Validation
validator -> validator: Field Existence Check
validator -> validator: Argument Validation
validator -> api_server: Validated AST (or Errors)
api_server -> client: HTTP Response