direction: down

title: Parser Expression Precedence Flowchart

# Main parsing flow
expression_parser: {
  expression: expression() {
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      font-color: "#e6edf3"
      bold: true
    }
  }
  
  equality: equality() {
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      font-color: "#e6edf3"
    }
  }
  
  comparison: comparison() {
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      font-color: "#e6edf3"
    }
  }
  
  term: term() {
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      font-color: "#e6edf3"
    }
  }
  
  factor: factor() {
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      font-color: "#e6edf3"
    }
  }
  
  unary: unary() {
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      font-color: "#e6edf3"
    }
  }
  
  primary: primary() {
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      font-color: "#e6edf3"
      bold: true
    }
  }
}

# Flow arrows
expression -> equality: "calls\n(lowest precedence)"
equality -> comparison: "calls\n(handles ==, !=)"
comparison -> term: "calls\n(handles <, >, <=, >=)"
term -> factor: "calls\n(handles +, -)"
factor -> unary: "calls\n(handles *, /)"
unary -> primary: "calls\n(handles !, -)"

# Return flow (dashed lines)
primary -> unary: "returns value" {
  style.stroke-dash: 3
}
unary -> factor: "returns value" {
  style.stroke-dash: 3
}
factor -> term: "returns value" {
  style.stroke-dash: 3
}
term -> comparison: "returns value" {
  style.stroke-dash: 3
}
comparison -> equality: "returns value" {
  style.stroke-dash: 3
}
equality -> expression: "returns value\n(final result)" {
  style.stroke-dash: 3
}

# Precedence explanation
note: |md
  ## Precedence Hierarchy
  - **Lowest**: `expression()` - entry point
  - `equality()`: `==`, `!=`
  - `comparison()`: `<`, `>`, `<=`, `>=`
  - `term()`: `+`, `-`
  - `factor()`: `*`, `/`
  - `unary()`: `!`, `-`
  - **Highest**: `primary()`: literals, grouping
| {
  shape: page
  style: {
    fill: "#0f3460"
    stroke: "#3fb950"
    font-color: "#e6edf3"
  }
}