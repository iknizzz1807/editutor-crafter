title: Context Switch Sequence Diagram

shape: sequence_diagram

# Participants
timer: Timer Interrupt
scheduler: Scheduler
process_a: Process A (Running)
process_b: Process B (Ready)

# Sequence of events
timer -> scheduler: Interrupt (IRQ)
scheduler -> process_a: save-registers (push CPU state)
scheduler -> scheduler: choose-next (select Process B)
scheduler -> scheduler: switch-page-tables (update CR3/MMU)
scheduler -> process_b: restore-registers (pop CPU state)
scheduler -> process_b: return-from-interrupt (iret/sret)
note: Process B is now running until next timer interrupt

# Styling
style: {
  fill: "#0f172a"
  stroke: "#3fb950"
  font-color: "#e6edf3"
  stroke-width: 1
}

timer: {
  style: {
    stroke: "#f87171"
    bold: true
  }
}

scheduler: {
  style: {
    stroke: "#3fb950"
    bold: true
    font-color: "#3fb950"
  }
}

process_a: {
  style: {
    stroke: "#60a5fa"
    font-color: "#60a5fa"
  }
}

process_b: {
  style: {
    stroke: "#a78bfa"
    font-color: "#a78bfa"
  }
}