vars: {
  d2-config: {
    layout-engine: elk
    theme-id: 200
  }
}

direction: right

title: |md
  # Page Directory/Table Entry (32-bit)
  sizeof=4 bytes
|
title.near: top-center

entry: {
  label: ""
  
  bit0_present: {
    label: "P\nPresent"
    width: 40
    style.fill: "#9B59B6"
    style.font-color: white
  }
  
  bit1_writable: {
    label: "R/W\nWritable"
    width: 40
    style.fill: "#9B59B6"
    style.font-color: white
  }
  
  bit2_user: {
    label: "U/S\nUser"
    width: 40
    style.fill: "#9B59B6"
    style.font-color: white
  }
  
  bit3_writethrough: {
    label: "PWT\nWrite-Through"
    width: 50
    style.fill: "#9B59B6"
    style.font-color: white
  }
  
  bit4_cachedisable: {
    label: "PCD\nCache\nDisable"
    width: 50
    style.fill: "#9B59B6"
    style.font-color: white
  }
  
  bit5_accessed: {
    label: "A\nAccessed"
    width: 40
    style.fill: "#9B59B6"
    style.font-color: white
  }
  
  bit6_dirty: {
    label: "D\nDirty"
    width: 40
    style.fill: "#9B59B6"
    style.font-color: white
  }
  
  bit7_pat: {
    label: "PS/PAT\nPage Size\n/Attribute"
    width: 55
    style.fill: "#7F8C8D"
    style.font-color: white
  }
  
  bit8_global: {
    label: "G\nGlobal"
    width: 40
    style.fill: "#7F8C8D"
    style.font-color: white
  }
  
  bits9_11_avail: {
    label: "Avail\n9-11"
    width: 45
    style.fill: "#95A5A6"
    style.font-color: white
  }
  
  bits12_31_frame: {
    label: "Frame Address [31:12]\n(Physical Page Number)"
    width: 200
    style.fill: "#3498DB"
    style.font-color: white
  }
}

offset_0: |md
  **Byte 0**
  
  Offset: 0x00
|
offset_0.near: top-left

offset_3: |md
  **Byte 3**
  
  Offset: 0x03
|
offset_3.near: top-right

bit_positions: ||md
  **Bit Positions:**
  
  | Bits | Field | Description |
  |------|-------|-------------|
  | 0 | P | Present (1=page in memory) |
  | 1 | R/W | Read/Write (1=writable) |
  | 2 | U/S | User/Supervisor (1=user accessible) |
  | 3 | PWT | Write-Through caching |
  | 4 | PCD | Cache Disable |
  | 5 | A | Accessed (CPU sets on read) |
  | 6 | D | Dirty (CPU sets on write) |
  | 7 | PS/PAT | Page Size (PDE) or PAT (PTE) |
  | 8 | G | Global (not flushed on CR3 reload) |
  | 9-11 | Avail | Available for OS use |
  | 12-31 | Frame | Physical address >> 12 |
||
bit_positions.near: bottom-center

legend: {
  near: bottom-right
  label: ""
  
  header: {label: "Legend"; style.bold: true}
  
  purple: {
    label: "Control Bits"
    style.fill: "#9B59B6"
    style.font-color: white
  }
  
  gray_legend: {
    label: "Extended Flags"
    style.fill: "#7F8C8D"
    style.font-color: white
  }
  
  lightgray: {
    label: "OS Available"
    style.fill: "#95A5A6"
    style.font-color: white
  }
  
  blue: {
    label: "Frame Address"
    style.fill: "#3498DB"
    style.font-color: white
  }
}

size_note: ||md
  **Total Size: 32 bits (4 bytes)**

  • Page-aligned frame address stored in bits [31:12]
  • Lower 12 bits reserved for flags
  • For 4KB pages: frame = address >> 12
  • PDE at CR3: points to page table
  • PTE in page table: points to physical page
||
size_note.near: bottom-left