raft_node: Raft Node {
  shape: rectangle
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.bold: true

  consensus_module: Consensus Module {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }

  log_store: Log Store {
    shape: cylinder
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }

  state_machine: State Machine {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }

  transport: Transport {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }

  persistence: Persistence {
    shape: page
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }

  consensus_module <-> log_store: "appendEntries\nreadLog\ngetLastLogIndex"
  consensus_module <-> state_machine: "applyCommittedEntries\nreadState"
  consensus_module <-> transport: "sendRPC\nreceiveRPC"
  consensus_module <-> persistence: "saveState\nrestoreState"
  persistence -> log_store: "persistLog"
  persistence -> state_machine: "snapshot"
}

other_nodes: Other Raft Nodes {
  shape: cloud
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

raft_node.transport -> other_nodes: "RPC (RequestVote,\nAppendEntries)" {
  style.stroke-dash: 3
}
other_nodes -> raft_node.transport: "RPC Response" {
  style.stroke-dash: 3
}