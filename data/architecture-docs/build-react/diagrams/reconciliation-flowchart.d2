title: Reconciliation Diffing Algorithm
shape: rectangle

base_style: {
  style.fill: "#0f3460"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

flowchart {
  start_fiber: Start Fiber Reconciliation {
    style: {
      fill: "#1a1a2e"
    }
  }
  
  type_changed: Type changed? {
    shape: diamond
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      bold: true
    }
  }
  
  replace_node: Replace node {
    style: {
      fill: "#1a1a2e"
    }
  }
  
  props_changed: Props changed? {
    shape: diamond
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      bold: true
    }
  }
  
  update_props: Update props {
    style: {
      fill: "#1a1a2e"
    }
  }
  
  has_keys: Has keys? {
    shape: diamond
    style: {
      fill: "#16213e"
      stroke: "#3fb950"
      bold: true
    }
  }
  
  reconcile_children_array: Reconcile children array {
    style: {
      fill: "#1a1a2e"
    }
  }
  
  end: End {
    style: {
      fill: "#1a1a2e"
    }
  }
}

# Connections
start_fiber -> type_changed

type_changed -> replace_node: Yes
replace_node -> end

type_changed -> props_changed: No

props_changed -> update_props: Yes
update_props -> has_keys

props_changed -> has_keys: No

has_keys -> reconcile_children_array: Yes
reconcile_children_array -> end

has_keys -> reconcile_children_array: No {
  style.stroke-dash: 2
}
reconcile_children_array -> end