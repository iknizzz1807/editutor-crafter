vars: {
  d2-config: {
    layout-engine: elk
  }
}

classes: {
  statement: {
    style: {
      fill: "#E8F5E9"
      stroke: "#4CAF50"
      stroke-width: 2
      font-color: "#1B5E20"
      bold: true
    }
  }
  clause: {
    style: {
      fill: "#E3F2FD"
      stroke: "#2196F3"
      stroke-width: 2
      font-color: "#0D47A1"
    }
  }
  expression: {
    style: {
      fill: "#FFF3E0"
      stroke: "#FF9800"
      stroke-width: 2
      font-color: "#E65100"
    }
  }
  operator: {
    style: {
      fill: "#FCE4EC"
      stroke: "#E91E63"
      stroke-width: 2
      font-color: "#880E4F"
      bold: true
    }
  }
  leaf: {
    style: {
      fill: "#F3E5F5"
      stroke: "#9C27B0"
      stroke-width: 1
      font-color: "#4A148C"
    }
  }
}

direction: down

title: |md
  # AST Structure: SELECT Statement Tree
  `SELECT name, age FROM users WHERE age > 18 AND active = true`
| {near: top-center}

SelectStatement: "SELECT Statement" {
  class: statement
  
  SelectList: "SelectList\n[name, age]" {
    class: clause
    
    col1: "ColumnRef: name" {
      class: leaf
    }
    col2: "ColumnRef: age" {
      class: leaf
    }
  }
  
  FromClause: "FromClause\nTable: users" {
    class: clause
    
    table: "TableRef: users" {
      class: leaf
    }
  }
  
  WhereClause: "WhereClause" {
    class: clause
    
    AndOp: "BinaryOp: AND" {
      class: operator
      
      left_gt: "Comparison: >" {
        class: expression
        
        left_col: "ColumnRef: age" {
          class: leaf
        }
        literal_18: "Literal: 18 (INT)" {
          class: leaf
        }
      }
      
      right_eq: "Comparison: =" {
        class: expression
        
        col_active: "ColumnRef: active" {
          class: leaf
        }
        literal_true: "Literal: true (BOOL)" {
          class: leaf
        }
      }
    }
  }
}

legend: {
  near: bottom-right
  style.fill: "#FAFAFA"
  style.stroke: "#BDBDBD"
  
  title: "Legend"
  
  stmt_node: "Statement" {class: statement}
  clause_node: "Clause" {class: clause}
  expr_node: "Expression" {class: expression}
  op_node: "Operator" {class: operator}
  leaf_node: "Leaf Node" {class: leaf}
}