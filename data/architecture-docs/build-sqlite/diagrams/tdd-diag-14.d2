vars: {
  d2-config: {
    layout-engine: elk
    theme-id: 200
  }
}

title: |md
  # FrameMetadata Structure
  **sizeof=37 bytes**
| {near: top-center}

FrameMetadata_Structure: {
  class: {
    shape: class
    +PageID: uint64
    +PinCount: int32
    +Dirty: bool
    +LastAccess: time.Time
  }
  
  class_annotation: |md
    
    sizeof(FrameMetadata) = 37 bytes
    - PageID:     8 bytes  (offset 0-7)
    - PinCount:   4 bytes  (offset 8-11)
    - Dirty:      1 byte   (offset 12)
    - LastAccess: 24 bytes (offset 13-36)
    
  |
  
  memory_layout: {
    label: Memory Layout
    shape: rectangle
    style.fill: "#f5f5f5"
    
    block_0_8: {
      label: "PageID\n(0-7)"
      shape: rectangle
      width: 120
      height: 40
      style.fill: "#e3f2fd"
    }
    
    block_8_12: {
      label: "PinCount\n(8-11)"
      shape: rectangle
      width: 60
      height: 40
      style.fill: "#fff3e0"
    }
    
    block_12_13: {
      label: "Dirty\n(12)"
      shape: rectangle
      width: 30
      height: 40
      style.fill: "#e8f5e9"
    }
    
    block_13_37: {
      label: "LastAccess\n(13-36)"
      shape: rectangle
      width: 100
      height: 40
      style.fill: "#fce4ec"
    }
  }
  
  memory_layout.block_0_8 -> memory_layout.block_8_12: {style.stroke-width: 0}
  memory_layout.block_8_12 -> memory_layout.block_12_13: {style.stroke-width: 0}
  memory_layout.block_12_13 -> memory_layout.block_13_37: {style.stroke-width: 0}
  
  offsets: {
    offset_0: "0"
    offset_8: "8"
    offset_12: "12"
    offset_13: "13"
    offset_37: "37"
  }
  
  offsets.offset_0 -> memory_layout.block_0_8: {style.stroke-dash: 3}
  offsets.offset_8 -> memory_layout.block_8_12: {style.stroke-dash: 3}
  offsets.offset_12 -> memory_layout.block_12_13: {style.stroke-dash: 3}
  offsets.offset_13 -> memory_layout.block_13_37: {style.stroke-dash: 3}
  offsets.offset_37 -> memory_layout.block_13_37: {style.stroke-dash: 3}
  
  legend: {
    shape: rectangle
    style.fill: "#ffffff"
    label: "Field Purpose:\n\n• PageID - Unique page identifier\n• PinCount - Active references count\n• Dirty - Modified flag for write-back\n• LastAccess - Timestamp for LRU eviction"
  }
}