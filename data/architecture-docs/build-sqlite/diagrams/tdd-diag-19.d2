Record Serialization Format: {
  shape: rectangle
  
  Record Layout: {
    shape: sequence_diagram
    
    start: Start
    
    "Header Size": {
      shape: rectangle
      label: "Header Size\n(varint)"
    }
    
    "Serial Type 1": {
      shape: rectangle
      label: "Serial Type 1\n(varint)"
    }
    
    "Serial Type N": {
      shape: rectangle
      label: "Serial Type N\n(varint)"
    }
    
    "Value 1": {
      shape: rectangle
      label: "Value 1\n(encoded bytes)"
    }
    
    "Value N": {
      shape: rectangle
      label: "Value N\n(encoded bytes)"
    }
    
    end: End
    
    start -> "Header Size": "Record Start"
    "Header Size" -> "Serial Type 1": "Header"
    "Serial Type 1" -> "Serial Type N": "..."
    "Serial Type N" -> "Value 1": "Body"
    "Value 1" -> "Value N": "..."
    "Value N" -> end: "Record End"
  }
  
  Serial Type Table: {
    shape: sql_table
    Serial Type: Type
    Size: Size
    "0": "NULL"
    "0 size": ""
    "1": "8-bit signed int"
    "1 byte": ""
    "2": "16-bit BE int"
    "2 bytes": ""
    "3": "24-bit BE int"
    "3 bytes": ""
    "4": "32-bit BE int"
    "4 bytes": ""
    "5": "48-bit BE int"
    "6 bytes": ""
    "6": "64-bit BE int"
    "8 bytes": ""
    "7": "IEEE 754 float"
    "8 bytes": ""
    "8": "Integer 0"
    "0 bytes": ""
    "9": "Integer 1"
    "0 bytes": ""
    "10-11": "Reserved"
    "-"
    "N >= 12 (even)": "BLOB"
    "(N-12)/2 bytes": ""
    "N >= 13 (odd)": "TEXT (UTF-8)"
    "(N-13)/2 bytes": ""
  }
  
  Header: {
    shape: rectangle
    label: "HEADER\n───────────────\n• Header Size (varint)\n• Serial Type per column (varint)\n• Total header bytes = Header Size"
  }
  
  Body: {
    shape: rectangle
    label: "BODY\n───────────────\n• Values in column order\n• Each value size from serial type\n• NULL = 0 bytes\n• Integers = 0-8 bytes\n• Float = 8 bytes\n• BLOB/TEXT = variable"
  }
  
  Example: {
    shape: rectangle
    label: "Example Record\n{'id': 1, 'name': 'Alice', 'active': NULL}"
    
    Example Layout: {
      shape: sql_table
      Field: Value
      Bytes
      "Header Size": "05"
      "1 byte": ""
      "Serial Type (id)": "01 (8-bit int)"
      "1 byte": ""
      "Serial Type (name)": "13 + 2*5 = 23 (TEXT len 5)"
      "1 byte": ""
      "Serial Type (active)": "00 (NULL)"
      "1 byte": ""
      "id value": "01"
      "1 byte": ""
      "name value": "41 6C 69 63 65 (Alice)"
      "5 bytes": ""
      "active value": "(empty)"
      "0 bytes": ""
    }
  }
  
  Header -> Body: "Header describes\nbody structure"
  Serial Type Table -> Header: "Encodes types"
  Serial Type Table -> Body: "Determines sizes"
  Example -> Header: "Uses"
  Example -> Body: "Uses"
}