vars: {
  d2-config: {
    layout-engine: elk
    theme-id: 200
  }
}

direction: right

title: |md
  # Three-Valued Logic Truth Tables (SQL NULL Semantics)
| {near: top-center}

and_table: {
  label: "AND Truth Table"
  
  and_header: {
    shape: sql_table
    "": ""
    TRUE: ""
    FALSE: ""
    NULL: ""
  }
  
  and_true: {
    shape: sql_table
    TRUE: ""
    "T": "TRUE"
    "F": "FALSE"
    "N": "NULL"
  }
  
  and_false: {
    shape: sql_table
    FALSE: ""
    "T": "FALSE"
    "F": "FALSE"
    "N": "FALSE"
  }
  
  and_null: {
    shape: sql_table
    NULL: ""
    "T": "NULL"
    "F": "FALSE"
    "N": "NULL"
  }
}

or_table: {
  label: "OR Truth Table"
  
  or_header: {
    shape: sql_table
    "": ""
    TRUE: ""
    FALSE: ""
    NULL: ""
  }
  
  or_true: {
    shape: sql_table
    TRUE: ""
    "T": "TRUE"
    "F": "TRUE"
    "N": "TRUE"
  }
  
  or_false: {
    shape: sql_table
    FALSE: ""
    "T": "TRUE"
    "F": "FALSE"
    "N": "NULL"
  }
  
  or_null: {
    shape: sql_table
    NULL: ""
    "T": "TRUE"
    "F": "NULL"
    "N": "NULL"
  }
}

not_table: {
  label: "NOT Truth Table"
  
  NOT: {
    shape: sql_table
    Input: ""
    Result: ""
    r1: ""
    r2: ""
    r3: ""
  }
}

comparison_table: {
  label: "Comparisons with NULL"
  
  Comparisons: {
    shape: sql_table
    Expression: ""
    Result: ""
    r1: ""
    r2: ""
    r3: ""
    r4: ""
    r5: ""
    r6: ""
  }
}

key_rules: {
  label: "Key Rules"
  
  rules_list: |md
    - **FALSE dominates AND**: `NULL AND FALSE = FALSE`
    - **TRUE dominates OR**: `NULL OR TRUE = TRUE`
    - **NOT NULL = NULL** (unknown remains unknown)
    - **Any comparison with NULL yields NULL**
    - Use `IS NULL` / `IS NOT NULL` for NULL checks
|
  
  style: {
    fill: "#E3F2FD"
    stroke: "#1976D2"
  }
}

dominance: {
  label: |md
    ## Dominance Rules
    
    - **AND**: FALSE wins (absorbing element)
    - **OR**: TRUE wins (absorbing element)
    - **NULL propagates** when no dominance
|
  
  style: {
    fill: "#FFF3E0"
    stroke: "#E65100"
  }
}

and_table -- or_table -- not_table -- comparison_table: {style.stroke: "transparent"}

key_rules -- dominance: {style.stroke: "transparent"}