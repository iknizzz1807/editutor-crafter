direction: right
shape: sequence_diagram

Query: {
  shape: circle
  label: "Query\nSQL: SELECT * FROM users WHERE email = ?"
}

IndexBTree: {
  shape: rectangle
  label: "Index B+Tree\n(email_idx)"
}

RowidExtraction: {
  shape: diamond
  label: "Extract\nrowid"
}

TableBTree: {
  shape: rectangle
  label: "Table B+Tree\n(users table)"
}

RowFetch: {
  shape: rectangle
  label: "Row Fetch\n(Decode Record)"
}

Projection: {
  shape: circle
  label: "Result\nProject Columns"
}

Query -> IndexBTree: {
  label: "1. Index Seek\nO(log n)"
}

IndexBTree -> RowidExtraction: {
  label: "2. Found index entry\n(email, rowid)"
}

RowidExtraction -> TableBTree: {
  label: "3. Table Seek by rowid\nO(log n)"
}

TableBTree -> RowFetch: {
  label: "4. Leaf page reached\nCell located"
}

RowFetch -> Projection: {
  label: "5. Decode payload\nExtract columns"
}