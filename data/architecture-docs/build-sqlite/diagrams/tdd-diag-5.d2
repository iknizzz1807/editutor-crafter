direction: down

title: AST Node Hierarchy {
  near: top-center
  shape: text
  style: {
    font-size: 24
    bold: true
  }
}

# Statement Hierarchy
Statement: {
  shape: class
  style: {
    fill: "#E3F2FD"
    stroke: "#1976D2"
  }
  "lt;lt;interface>": string
  "Parse()": error
  "String()": string
}

SelectStatement: {
  shape: class
  style: {
    fill: "#BBDEFB"
    stroke: "#1976D2"
  }
  Table: string
  Columns: "[]string"
  WhereClause: Expression
  GroupBy: "[]string"
  OrderBy: "[]OrderByClause"
  "Parse()": error
  "String()": string
}

InsertStatement: {
  shape: class
  style: {
    fill: "#BBDEFB"
    stroke: "#1976D2"
  }
  Table: string
  Columns: "[]string"
  Values: "[]Expression"
  "Parse()": error
  "String()": string
}

CreateTableStatement: {
  shape: class
  style: {
    fill: "#BBDEFB"
    stroke: "#1976D2"
  }
  TableName: string
  Columns: "[]ColumnDef"
  Constraints: "[]Constraint"
  "Parse()": error
  "String()": string
}

# Expression Hierarchy
Expression: {
  shape: class
  style: {
    fill: "#E8F5E9"
    stroke: "#388E3C"
  }
  "lt;lt;interface>": string
  "Evaluate()": "(Value, error)"
  "String()": string
}

BinaryExpression: {
  shape: class
  style: {
    fill: "#C8E6C9"
    stroke: "#388E3C"
  }
  Left: Expression
  Operator: string
  Right: Expression
  "Evaluate()": "(Value, error)"
  "String()": string
}

UnaryExpression: {
  shape: class
  style: {
    fill: "#C8E6C9"
    stroke: "#388E3C"
  }
  Operator: string
  Operand: Expression
  "Evaluate()": "(Value, error)"
  "String()": string
}

LiteralExpression: {
  shape: class
  style: {
    fill: "#C8E6C9"
    stroke: "#388E3C"
  }
  Value: "interface{}"
  Type: DataType
  "Evaluate()": "(Value, error)"
  "String()": string
}

IdentifierExpression: {
  shape: class
  style: {
    fill: "#C8E6C9"
    stroke: "#388E3C"
  }
  Name: string
  Table: string
  "Evaluate()": "(Value, error)"
  "String()": string
}

# Inheritance arrows (implementations)
Statement -> SelectStatement: implements {
  style: {
    stroke: "#1976D2"
    stroke-dash: 3
  }
}

Statement -> InsertStatement: implements {
  style: {
    stroke: "#1976D2"
    stroke-dash: 3
  }
}

Statement -> CreateTableStatement: implements {
  style: {
    stroke: "#1976D2"
    stroke-dash: 3
  }
}

Expression -> BinaryExpression: implements {
  style: {
    stroke: "#388E3C"
    stroke-dash: 3
  }
}

Expression -> UnaryExpression: implements {
  style: {
    stroke: "#388E3C"
    stroke-dash: 3
  }
}

Expression -> LiteralExpression: implements {
  style: {
    stroke: "#388E3C"
    stroke-dash: 3
  }
}

Expression -> IdentifierExpression: implements {
  style: {
    stroke: "#388E3C"
    stroke-dash: 3
  }
}

# Legend
legend: {
  shape: rectangle
  style: {
    fill: "#FAFAFA"
    stroke: "#9E9E9E"
  }
  
  interface_legend: "Interface" {
    shape: text
    style: {
      fill: "#E3F2FD"
    }
  }
  
  impl_legend: "Implementation" {
    shape: text
    style: {
      fill: "#BBDEFB"
    }
  }
  
  arrow_legend: "- - - implements" {
    shape: text
  }
}