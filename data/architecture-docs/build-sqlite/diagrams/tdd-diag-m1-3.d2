direction: right
title: Keyword Lookup Table - Binary Search with Case-Insensitive Matching
# Input token
input_token: {
    label: "Input Token"
    shape: text
    style: {
        font-size: 24
        bold: true
    }
}
example_tokens: {
    label: "Examples\n\"select\"\n\"FROM\"\n\"wHeRe\""
    shape: text
    style: {
        font-size: 14
        fill: "#E8F4FD"
    }
}
# Case normalization step
normalize: {
    label: "Normalize to Uppercase"
    shape: rectangle
    style: {
        fill: "#FFF3E0"
        stroke: "#FF9800"
    }
}
normalized_example: {
    label: "\"select\" → \"SELECT\""
    shape: text
    style: {
        font-size: 12
        italic: true
    }
}
# Sorted keyword array
keyword_array: {
    label: "Sorted Keyword Array"
    shape: rectangle
    style: {
        fill: "#E8F5E9"
        stroke: "#4CAF50"
        stroke-width: 2
    }
    index_0: { label: "[0]"; shape: text; style.font-size: 10 }
    index_1: { label: "[1]"; shape: text; style.font-size: 10 }
    index_2: { label: "[2]"; shape: text; style.font-size: 10 }
    index_3: { label: "[3]"; shape: text; style.font-size: 10 }
    index_4: { label: "[4]"; shape: text; style.font-size: 10 }
    index_5: { label: "[5]"; shape: text; style.font-size: 10 }
    index_6: { label: "[6]"; shape: text; style.font-size: 10 }
    index_7: { label: "[7]"; shape: text; style.font-size: 10 }
    index_8: { label: "[8]"; shape: text; style.font-size: 10 }
    index_9: { label: "[9]"; shape: text; style.font-size: 10 }
    index_10: { label: "[10]"; shape: text; style.font-size: 10 }
    index_11: { label: "[11]"; shape: text; style.font-size: 10 }
    index_12: { label: "[12]"; shape: text; style.font-size: 10 }
    kw_0: { label: "ADD"; shape: rectangle; style.fill: "#FFEBEE" }
    kw_1: { label: "ALL"; shape: rectangle; style.fill: "#FFEBEE" }
    kw_2: { label: "ALTER"; shape: rectangle; style.fill: "#FFEBEE" }
    kw_3: { label: "AND"; shape: rectangle; style.fill: "#FFEBEE" }
    kw_4: { label: "AS"; shape: rectangle; style.fill: "#FFEBEE" }
    kw_5: { label: "ASC"; shape: rectangle; style.fill: "#FFEBEE" }
    kw_6: { label: "BETWEEN"; shape: rectangle; style.fill: "#E3F2FD" }
    kw_7: { label: "BY"; shape: rectangle; style.fill: "#E3F2FD" }
    kw_8: { label: "CREATE"; shape: rectangle; style.fill: "#E3F2FD" }
    kw_9: { label: "DELETE"; shape: rectangle; style.fill: "#E3F2FD" }
    kw_10: { label: "FROM"; shape: rectangle; style.fill: "#E3F2FD" }
    kw_11: { label: "INSERT"; shape: rectangle; style.fill: "#E3F2FD" }
    kw_12: { label: "SELECT"; shape: rectangle; style.fill: "#E3F2FD" }
    index_0 -> kw_0: { style.opacity: 0 }
    index_1 -> kw_1: { style.opacity: 0 }
    index_2 -> kw_2: { style.opacity: 0 }
    index_3 -> kw_3: { style.opacity: 0 }
    index_4 -> kw_4: { style.opacity: 0 }
    index_5 -> kw_5: { style.opacity: 0 }
    index_6 -> kw_6: { style.opacity: 0 }
    index_7 -> kw_7: { style.opacity: 0 }
    index_8 -> kw_8: { style.opacity: 0 }
    index_9 -> kw_9: { style.opacity: 0 }
    index_10 -> kw_10: { style.opacity: 0 }
    index_11 -> kw_11: { style.opacity: 0 }
    index_12 -> kw_12: { style.opacity: 0 }
}
# Binary search algorithm
binary_search: {
    label: "Binary Search Algorithm"
    shape: rectangle
    style: {
        fill: "#F3E5F5"
        stroke: "#9C27B0"
        stroke-width: 2
    }
    init: {
        label: "Initialize\nlow = 0\nhigh = n-1"
        shape: rectangle
    }
    calc_mid: {
        label: "Calculate Mid\nmid = (low + high) / 2"
        shape: rectangle
    }
    compare: {
        label: "Compare\nstrcasecmp(input, keywords[mid])"
        shape: diamond
        style: {
            fill: "#FFF9C4"
        }
    }
    result_cmp: {
        label: "Result"
        shape: text
    }
    init -> calc_mid -> compare
    less: {
        label: "< 0\n(input < mid)"
        shape: text
        style: {
            fill: "#FFCDD2"
        }
    }
    equal: {
        label: "= 0\nMATCH!"
        shape: text
        style: {
            fill: "#C8E6C9"
        }
    }
    greater: {
        label: "> 0\n(input > mid)"
        shape: text
        style: {
            fill: "#BBDEFB"
        }
    }
    compare -> less
    compare -> equal
    compare -> greater
    less -> calc_mid: {
        label: "high = mid - 1"
        style: {
            stroke: "#F44336"
            stroke-dash: 3
        }
    }
    greater -> calc_mid: {
        label: "low = mid + 1"
        style: {
            stroke: "#2196F3"
            stroke-dash: 3
        }
    }
}
# Search trace example
search_trace: {
    label: "Example: Search for \"SELECT\""
    shape: rectangle
    style: {
        fill: "#FFF8E1"
        stroke: "#FFC107"
    }
    step1: {
        label: "Step 1: low=0, high=12\nmid=6 → \"BETWEEN\"\n\"SELECT\" > \"BETWEEN\" → low=7"
        shape: text
        style: {
            fill: "#FFECB3"
        }
    }
    step2: {
        label: "Step 2: low=7, high=12\nmid=9 → \"DELETE\"\n\"SELECT\" > \"DELETE\" → low=10"
        shape: text
        style: {
            fill: "#FFE0B2"
        }
    }
    step3: {
        label: "Step 3: low=10, high=12\nmid=11 → \"INSERT\"\n\"SELECT\" > \"INSERT\" → low=12"
        shape: text
        style: {
            fill: "#FFCC80"
        }
    }
    step4: {
        label: "Step 4: low=12, high=12\nmid=12 → \"SELECT\"\nMATCH! ✓"
        shape: text
        style: {
            fill: "#C8E6C9"
            bold: true
        }
    }
    step1 -> step2 -> step3 -> step4
}
# Output
output_match: {
    label: "Return Keyword Token\n(TK_Select)"
    shape: rectangle
    style: {
        fill: "#C8E6C9"
        stroke: "#4CAF50"
        stroke-width: 2
    }
}
output_not_found: {
    label: "Return Identifier Token\n(TK_ID)"
    shape: rectangle
    style: {
        fill: "#FFCDD2"
        stroke: "#F44336"
    }
}
# Connections
input_token -> normalize: {
    label: "raw token"
}
normalize -> keyword_array: {
    label: "uppercase"
}
keyword_array -> binary_search: {
    label: "search in array"
}
binary_search -> output_match: {
    label: "found"
}
binary_search -> output_not_found: {
    label: "not found"
}
search_trace -> binary_search: {
    style: {
        stroke-dash: 3
        opacity: 0.5
    }
}
# Legend
legend: {
    label: "Legend"
    shape: rectangle
    comparison: {
        label: "Case-Insensitive Comparison\nstrcasecmp(a, b)"
        shape: text
    }
    complexity: {
        label: "Time Complexity: O(log n)\nwhere n = keyword count"
        shape: text
    }
    sorted: {
        label: "Array must be sorted\nalphabetically"
        shape: text
    }
}
example_tokens -> input_token
normalized_example -> normalize