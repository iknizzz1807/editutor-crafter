direction: right
Parser_Error_Recovery_Sequence: {
  shape: sequence_diagram
  user: User {
    shape: person
  }
  cli: CLI {
    shape: rectangle
  }
  parser: Parser {
    shape: rectangle
  }
  tokenizer: Tokenizer {
    shape: rectangle
  }
  error_handler: Error_Handler {
    shape: rectangle
  }
  ast_builder: AST_Builder {
    shape: rectangle
  }
  user -> cli: "SELECT * FROM"
  cli -> parser: parse(sql_string)
  parser -> tokenizer: tokenize(sql_string)
  tokenizer -> parser: "tokens: [SELECT, *, FROM]"
  parser -> parser: parse_select_statement()
  parser -> parser: expect_table_name()
  parser -> error_handler: "ERROR: Unexpected EOF"
  error_handler -> parser: set_error_state(MISSING_TABLE)
  error_handler.label: "Error Detected!\nMissing table name after FROM"
  error_handler -> parser: begin_recovery()
  parser -> tokenizer: advance_to_sync_point()
  parser.label: "Searching for\nsynchronization point..."
  tokenizer -> tokenizer: scan_next_token()
  tokenizer -> tokenizer: scan_next_token()
  tokenizer -> tokenizer: scan_next_token()
  tokenizer -> parser: "found: ; (semicolon)"
  parser -> error_handler: sync_point_found
  error_handler -> parser: clear_partial_ast()
  parser -> parser: reset_parser_state()
  parser -> cli: "return error + position"
  cli -> user: "Error: expected table name\nnear FROM at position 14"
  user -> cli: "INSERT INTO users VALUES(1);"
  cli -> parser: parse(next_sql)
  parser -> tokenizer: tokenize(next_sql)
  tokenizer -> parser: "tokens: [INSERT, INTO, users, ...]"
  parser -> ast_builder: build_insert_ast()
  ast_builder -> parser: InsertStmt
  parser -> cli: "success: InsertStmt"
  cli -> user: "Statement parsed successfully"
}
note_sync: "Synchronization Points:\n• Semicolon (;)\n• Statement keywords:\n  - SELECT\n  - INSERT\n  - UPDATE\n  - DELETE\n  - CREATE\n  - DROP\n  - BEGIN\n  - COMMIT" {
  shape: rectangle
  style.multiple: true
  style.font-size: 12
}
parser -> note_sync: recovery rules