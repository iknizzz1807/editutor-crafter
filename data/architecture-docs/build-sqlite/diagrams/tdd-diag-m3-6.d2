direction: right
FETCH: {
  shape: rectangle
  label: "FETCH\n───────────\nRead instruction\nat PC++"
}
DECODE: {
  shape: rectangle
  label: "DECODE\n───────────\nParse opcode\np1, p2, p3, p4, p5"
}
EXECUTE: {
  shape: rectangle
  label: "EXECUTE\n───────────\nDispatch to\nopcode handler"
}
HALT: {
  shape: rectangle
  style.fill: "#90EE90"
  label: "HALT\n───────────\nClean up\nReturn result"
}
ERROR: {
  shape: rectangle
  style.fill: "#FFB6C1"
  label: "ERROR\n───────────\nUnknown opcode\nor invalid state"
}
# Normal flow
FETCH -> DECODE: {
  label: "instruction\nfetched"
}
DECODE -> EXECUTE: {
  label: "opcode\nrecognized"
}
# Loop back for normal instructions
EXECUTE -> FETCH: {
  label: "Continue\n(Goto, Next,\nSeek*, Eq, etc.)"
  style.stroke-dash: 3
}
# Terminal transitions
EXECUTE -> HALT: {
  label: "Halt opcode\n(reset=0)"
  style.stroke: "#228B22"
  style.stroke-width: 3
}
# Error transitions
DECODE -> ERROR: {
  label: "Unknown\nopcode"
  style.stroke: "#DC143C"
}
EXECUTE -> ERROR: {
  label: "Runtime\nerror"
  style.stroke: "#DC143C"
}
# Halt with error
EXECUTE -> HALT: {
  label: "Halt opcode\n(reset=1,\nerror msg)"
  style.stroke: "#FF6347"
}
# Legend
legend: {
  label: "Legend\n───────────\n→ Normal flow\n⇢ Jump/Branch\n─ Error path"
  shape: rectangle
  style.stroke: "#666"
}