direction: right
title: B-tree vs B+tree Structure Comparison {
  near: top-center
  shape: text
  style.font-size: 28
  style.bold: true
  style.underline: true
}
btree_table: {
  label: Table B-tree\n(Primary Key Storage)
  style.fill: "#E3F2FD"
  style.stroke: "#1976D2"
  title_btree: {
    label: "Data in ALL Nodes"
    shape: text
    style.font-size: 14
    style.bold: true
    style.fill: "#BBDEFB"
  }
  root_btree: {
    label: "Root\n[rowid: 50]\n[Data: row50]"
    shape: rectangle
    style.fill: "#90CAF9"
    style.stroke: "#1976D2"
  }
  internal_left: {
    label: "Internal\n[rowid: 25]\n[Data: row25]"
    shape: rectangle
    style.fill: "#90CAF9"
    style.stroke: "#1976D2"
  }
  internal_right: {
    label: "Internal\n[rowid: 75]\n[Data: row75]"
    shape: rectangle
    style.fill: "#90CAF9"
    style.stroke: "#1976D2"
  }
  leaf1: {
    label: "Leaf\n[rowid: 10]\n[Data: row10]"
    shape: rectangle
    style.fill: "#64B5F6"
    style.stroke: "#1976D2"
  }
  leaf2: {
    label: "Leaf\n[rowid: 30]\n[Data: row30]"
    shape: rectangle
    style.fill: "#64B5F6"
    style.stroke: "#1976D2"
  }
  leaf3: {
    label: "Leaf\n[rowid: 60]\n[Data: row60]"
    shape: rectangle
    style.fill: "#64B5F6"
    style.stroke: "#1976D2"
  }
  leaf4: {
    label: "Leaf\n[rowid: 90]\n[Data: row90]"
    shape: rectangle
    style.fill: "#64B5F6"
    style.stroke: "#1976D2"
  }
  root_btree -> internal_left: {
    label: "ptr"
    style.stroke: "#1976D2"
  }
  root_btree -> internal_right: {
    label: "ptr"
    style.stroke: "#1976D2"
  }
  internal_left -> leaf1: {
    label: "ptr"
    style.stroke: "#1976D2"
  }
  internal_left -> leaf2: {
    label: "ptr"
    style.stroke: "#1976D2"
  }
  internal_right -> leaf3: {
    label: "ptr"
    style.stroke: "#1976D2"
  }
  internal_right -> leaf4: {
    label: "ptr"
    style.stroke: "#1976D2"
  }
}
bplustree_index: {
  label: Index B+tree\n(Secondary Index Storage)
  style.fill: "#E8F5E9"
  style.stroke: "#388E3C"
  title_bplus: {
    label: "Data ONLY in Leaves\n(Separator Keys in Internal Nodes)"
    shape: text
    style.font-size: 14
    style.bold: true
    style.fill: "#C8E6C9"
  }
  root_bplus: {
    label: "Root\n[sep: 50]\n[ptr | ptr]"
    shape: rectangle
    style.fill: "#A5D6A7"
    style.stroke: "#388E3C"
  }
  internal_left_b: {
    label: "Internal\n[sep: 25]\n[ptr | ptr]"
    shape: rectangle
    style.fill: "#A5D6A7"
    style.stroke: "#388E3C"
  }
  internal_right_b: {
    label: "Internal\n[sep: 75]\n[ptr | ptr]"
    shape: rectangle
    style.fill: "#A5D6A7"
    style.stroke: "#388E3C"
  }
  leaf1_b: {
    label: "Leaf\n[key: 'abc']\n[rowid: 10]"
    shape: rectangle
    style.fill: "#66BB6A"
    style.stroke: "#388E3C"
  }
  leaf2_b: {
    label: "Leaf\n[key: 'def']\n[rowid: 30]"
    shape: rectangle
    style.fill: "#66BB6A"
    style.stroke: "#388E3C"
  }
  leaf3_b: {
    label: "Leaf\n[key: 'ghi']\n[rowid: 60]"
    shape: rectangle
    style.fill: "#66BB6A"
    style.stroke: "#388E3C"
  }
  leaf4_b: {
    label: "Leaf\n[key: 'jkl']\n[rowid: 90]"
    shape: rectangle
    style.fill: "#66BB6A"
    style.stroke: "#388E3C"
  }
  root_bplus -> internal_left_b: {
    label: "ptr"
    style.stroke: "#388E3C"
  }
  root_bplus -> internal_right_b: {
    label: "ptr"
    style.stroke: "#388E3C"
  }
  internal_left_b -> leaf1_b: {
    label: "ptr"
    style.stroke: "#388E3C"
  }
  internal_left_b -> leaf2_b: {
    label: "ptr"
    style.stroke: "#388E3C"
  }
  internal_right_b -> leaf3_b: {
    label: "ptr"
    style.stroke: "#388E3C"
  }
  internal_right_b -> leaf4_b: {
    label: "ptr"
    style.stroke: "#388E3C"
  }
  leaf1_b -> leaf2_b: {
    label: "sibling"
    style.stroke: "#388E3C"
    style.stroke-dash: 3
  }
  leaf2_b -> leaf3_b: {
    label: "sibling"
    style.stroke: "#388E3C"
    style.stroke-dash: 3
  }
  leaf3_b -> leaf4_b: {
    label: "sibling"
    style.stroke: "#388E3C"
    style.stroke-dash: 3
  }
}
legend: {
  label: Key Differences
  style.fill: "#FFF8E1"
  style.stroke: "#FFA000"
  diff1: {
    label: "• B-tree: Data stored in ALL nodes\n  (internal + leaf)"
    shape: text
    style.font-size: 12
  }
  diff2: {
    label: "• B+tree: Data stored ONLY in leaves\n  Internal nodes: separator keys only"
    shape: text
    style.font-size: 12
  }
  diff3: {
    label: "• B+tree: Higher fanout (keys only)\n  → Shallower trees → Fewer disk reads"
    shape: text
    style.font-size: 12
  }
  diff4: {
    label: "• B+tree: Linked leaves enable\n  efficient range scans"
    shape: text
    style.font-size: 12
  }
  diff5: {
    label: "• SQLite: Tables → B-tree\n  Indexes → B+tree"
    shape: text
    style.font-size: 12
    style.bold: true
  }
  diff1 -> diff2 -> diff3 -> diff4 -> diff5
}