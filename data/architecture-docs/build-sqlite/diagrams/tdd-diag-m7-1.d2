direction: down
title: Index B+tree Structure {
  shape: text
  near: top-center
}
# Level labels
level_root: "Root Level" {
  shape: text
  style.font-size: 12
  style.fill: "#E8F4FD"
}
level_internal: "Internal Level" {
  shape: text
  style.font-size: 12
  style.fill: "#FEF3E2"
}
level_leaf: "Leaf Level (linked via right_sibling)" {
  shape: text
  style.font-size: 12
  style.fill: "#E8F8E8"
}
# Root node
root: {
  shape: rectangle
  label: "Root Page\n(Separators)"
  style.fill: "#DBEAFE"
  style.stroke: "#3B82F6"
  sep_m: {
    shape: rectangle
    label: "'m'"
    style.fill: "#BFDBFE"
  }
}
# Internal nodes
internal_left: {
  shape: rectangle
  label: "Internal Page\n(Separators)"
  style.fill: "#FEF3C7"
  style.stroke: "#F59E0B"
  sep_d: {
    shape: rectangle
    label: "'d'"
    style.fill: "#FDE68A"
  }
}
internal_right: {
  shape: rectangle
  label: "Internal Page\n(Separators)"
  style.fill: "#FEF3C7"
  style.stroke: "#F59E0B"
  sep_t: {
    shape: rectangle
    label: "'t'"
    style.fill: "#FDE68A"
  }
}
# Leaf nodes
leaf_1: {
  shape: rectangle
  label: "Leaf Page 1"
  style.fill: "#D1FAE5"
  style.stroke: "#10B981"
  cell_1: {
    shape: rectangle
    label: "(alice@..., 1)"
    style.fill: "#A7F3D0"
  }
}
leaf_2: {
  shape: rectangle
  label: "Leaf Page 2"
  style.fill: "#D1FAE5"
  style.stroke: "#10B981"
  cell_2: {
    shape: rectangle
    label: "(bob@..., 2)"
    style.fill: "#A7F3D0"
  }
}
leaf_3: {
  shape: rectangle
  label: "Leaf Page 3"
  style.fill: "#D1FAE5"
  style.stroke: "#10B981"
  cell_3: {
    shape: rectangle
    label: "(sam@..., 4)"
    style.fill: "#A7F3D0"
  }
}
leaf_4: {
  shape: rectangle
  label: "Leaf Page 4"
  style.fill: "#D1FAE5"
  style.stroke: "#10B981"
  cell_4: {
    shape: rectangle
    label: "(zoe@..., 5)"
    style.fill: "#A7F3D0"
  }
}
# Root to internal connections
root -> internal_left: {
  label: "< 'm'"
  style.stroke: "#3B82F6"
}
root -> internal_right: {
  label: "≥ 'm'"
  style.stroke: "#3B82F6"
}
# Internal to leaf connections
internal_left -> leaf_1: {
  label: "< 'd'"
  style.stroke: "#F59E0B"
}
internal_left -> leaf_2: {
  label: "≥ 'd'"
  style.stroke: "#F59E0B"
}
internal_right -> leaf_3: {
  label: "< 't'"
  style.stroke: "#F59E0B"
}
internal_right -> leaf_4: {
  label: "≥ 't'"
  style.stroke: "#F59E0B"
}
# Leaf linking via right_sibling
leaf_1 -> leaf_2: {
  label: "right_sibling"
  style.stroke: "#10B981"
  style.stroke-dash: 3
}
leaf_2 -> leaf_3: {
  label: "right_sibling"
  style.stroke: "#10B981"
  style.stroke-dash: 3
}
leaf_3 -> leaf_4: {
  label: "right_sibling"
  style.stroke: "#10B981"
  style.stroke-dash: 3
}
# Legend
legend: {
  shape: rectangle
  label: "Legend"
  style.fill: "#F9FAFB"
  style.stroke: "#9CA3AF"
  legend_1: "• Index leaves contain (key, rowid) pairs"
  legend_2: "• Leaves linked for range scans"
  legend_3: "• Internal nodes store separator keys"
  legend_4: "• Data only in leaves (B+tree property)"
}
# Key distribution note
key_dist: {
  shape: rectangle
  label: "Key Distribution:\nalice < bob < d < sam < t < zoe"
  style.fill: "#F3F4F6"
  style.stroke: "#6B7280"
}
# Positioning
level_root -> root: {style.opacity: 0}
root -> internal_left: {style.opacity: 0}
internal_left -> leaf_1: {style.opacity: 0}
leaf_1 -> legend: {style.opacity: 0}
legend -> key_dist: {style.opacity: 0}