direction: down
start: {
  shape: oval
  label: "BEGIN CREATE INDEX"
}
step1: {
  shape: rectangle
  label: "1. Allocate Root Page\nfor Index B+tree"
}
step2: {
  shape: rectangle
  label: "2. Scan Table\n(full table scan)"
}
step3: {
  shape: diamond
  label: "More\nrows?"
}
step4: {
  shape: rectangle
  label: "3. Extract Indexed\nColumn Value"
}
step5: {
  shape: rectangle
  label: "4. Insert (key, rowid)\ninto Index B+tree"
}
step6: {
  shape: rectangle
  label: "5. Record Index Metadata\nin sqlite_master"
}
end: {
  shape: oval
  label: "INDEX CREATED"
}
start -> step1: "Init"
step1 -> step2: "Page allocated"
step2 -> step3: "Begin scan"
step3 -> step4: "Yes - next row" {
  style.stroke-dash: 3
}
step3 -> step6: "No - done"
step4 -> step5: "key extracted"
step5 -> step3: "Continue"
step6 -> end: "Commit"
step1.style.fill: "#E3F2FD"
step2.style.fill: "#FFF3E0"
step3.style.fill: "#FCE4EC"
step4.style.fill: "#E8F5E9"
step5.style.fill: "#E8F5E9"
step6.style.fill: "#F3E5F5"
start.style.fill: "#C8E6C9"
end.style.fill: "#C8E6C9"