direction: down
title: EXPLAIN Output Format
# Input query plan from optimizer
input: {
  shape: rectangle
  label: "Query Plan\n(from Optimizer)"
  style.fill: "#E8F5E9"
}
# Plan Tree Structure
tree: {
  shape: rectangle
  label: ""
  style.fill: "#FAFAFA"
  style.stroke: "#E0E0E0"
  root: {
    shape: rectangle
    label: "COMPOSITE\n└─ SCAN/SEARCH nodes"
    style.fill: "#E3F2FD"
    style.stroke: "#1976D2"
  }
  scan_node: {
    shape: rectangle
    label: "SCAN Node\n─────────────────\n• Table: users\n• Type: FULL TABLE SCAN\n• Est. Rows: 10,000\n• Cost: 850.0"
    style.fill: "#FFF3E0"
    style.stroke: "#F57C00"
  }
  search_node: {
    shape: rectangle
    label: "SEARCH Node\n─────────────────\n• Table: orders\n• Index: idx_user_id\n• Type: INDEX SEEK\n• Est. Rows: 50\n• Cost: 12.5"
    style.fill: "#E8F5E9"
    style.stroke: "#388E3C"
  }
  join_node: {
    shape: rectangle
    label: "JOIN Node\n─────────────────\n• Type: NESTED LOOP\n• Outer: users (SCAN)\n• Inner: orders (SEARCH)\n• Est. Rows: 5,000"
    style.fill: "#F3E5F5"
    style.stroke: "#7B1FA2"
  }
  root -> join_node: {
    label: "children"
    style.stroke-dash: 3
  }
  join_node -> scan_node: "outer"
  join_node -> search_node: "inner"
}
# Output Formatting
formatter: {
  shape: rectangle
  label: "Plan Formatter"
  style.fill: "#E0F7FA"
  style.stroke: "#00838F"
}
# Text Output
text_output: {
  shape: rectangle
  label: "EXPLAIN QUERY PLAN Output\n─────────────────────────────\nQUERY PLAN\n`--SCAN users (~10000 rows)\n`--SEARCH orders USING INDEX\n   idx_user_id (~50 rows)\n─────────────────────────────\nEstimated Total Cost: 862.5"
  style.fill: "#263238"
  style.font-color: "#E0E0E0"
  style.stroke: "#37474F"
}
# Visual Output
visual_output: {
  shape: rectangle
  label: ""
  style.fill: "#FAFAFA"
  style.stroke: "#BDBDBD"
  title: "Visual Plan View"
  v_root: {
    shape: circle
    label: "SELECT"
    style.fill: "#2196F3"
    style.font-color: "#FFFFFF"
  }
  v_join: {
    shape: diamond
    label: "JOIN"
    style.fill: "#9C27B0"
    style.font-color: "#FFFFFF"
  }
  v_scan: {
    shape: hexagon
    label: "SCAN\nusers\n10K rows"
    style.fill: "#FF9800"
    style.font-color: "#FFFFFF"
  }
  v_search: {
    shape: hexagon
    label: "SEARCH\nidx_user_id\n50 rows"
    style.fill: "#4CAF50"
    style.font-color: "#FFFFFF"
  }
  v_root -> v_join
  v_join -> v_scan: "outer"
  v_join -> v_search: "inner"
}
# Node Types Legend
legend: {
  shape: rectangle
  label: ""
  style.fill: "#FAFAFA"
  style.stroke: "#E0E0E0"
  title: {
    shape: text
    label: "Node Types"
    style.bold: true
  }
  scan_type: {
    shape: rectangle
    label: "SCAN\n─────────\nFull table scan\nO(n) rows"
    style.fill: "#FFF3E0"
    style.stroke: "#F57C00"
  }
  search_type: {
    shape: rectangle
    label: "SEARCH\n─────────\nIndex lookup\nO(log n) rows"
    style.fill: "#E8F5E9"
    style.stroke: "#388E3C"
  }
  composite_type: {
    shape: rectangle
    label: "COMPOSITE\n─────────\nJOIN/SUBQUERY\nMultiple children"
    style.fill: "#E3F2FD"
    style.stroke: "#1976D2"
  }
}
# Metrics Box
metrics: {
  shape: rectangle
  label: "Plan Metrics\n─────────────────────\n• est_rows: Cardinality estimate\n• cost: CPU + I/O cost model\n• index_name: Index used (or NULL)\n• scan_type: SCAN|SEARCH|COMPOSITE"
  style.fill: "#ECEFF1"
  style.stroke: "#607D8B"
}
# Connections
input -> tree: "plan tree"
tree -> formatter: "serialize"
formatter -> text_output: "text"
formatter -> visual_output: "render"
tree -> legend: "node types"
tree -> metrics: "estimates"