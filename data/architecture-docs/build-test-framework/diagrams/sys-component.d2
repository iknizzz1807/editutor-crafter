title: System Component Diagram

classes: {
  component_style: {
    style.stroke: "#3fb950"
    style.stroke-width: 2
    style.fill: "#1a1a2e"
    style.font-color: "#e6edf3"
  }
  container_style: {
    style.stroke: "#8b949e"
    style.stroke-width: 1
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
    style.double-border: false
  }
  arrow_style: {
    style.stroke: "#8b949e"
    style.stroke-dash: 0
  }
}

system: System Component Diagram {
  style.fill: "#0f3460"
  style.stroke: "#0f3460"

  cli_container: CLI Parser {
    class: container_style
    cli_parser: CLI Parser {
      class: component_style
      label: |md
        **CLI Parser**
        - parse_cli_args()
        - create_configuration()
      |
    }
  }

  discoverer_container: Discoverer {
    class: container_style
    discoverer: Discoverer {
      class: component_style
      label: |md
        **Discoverer**
        - find_test_files()
        - collect_test_cases()
        - build_test_suite()
      |
    }
  }

  runner_container: Runner {
    class: container_style
    runner: Runner {
      class: component_style
      label: |md
        **Runner**
        - execute_test()
        - manage_fixtures()
        - handle_exceptions()
      |
    }
  }

  assertion_container: Assertion Engine {
    class: container_style
    assertion_engine: Assertion Engine {
      class: component_style
      label: |md
        **Assertion Engine**
        - evaluate_assert()
        - compare_values()
        - generate_assertion_result()
      |
    }
  }

  reporter_container: Reporter {
    class: container_style
    reporter: Reporter {
      class: component_style
      label: |md
        **Reporter**
        - format_results()
        - generate_summary()
        - output_to_console()
      |
    }
  }

  user: User {
    shape: circle
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }

  user -> cli_parser: "apollo tests/ --verbose" {
    class: arrow_style
    target-arrowhead.label: "User Command"
    target-arrowhead.shape: diamond
  }

  cli_parser -> discoverer: "Configuration" {
    class: arrow_style
    target-arrowhead.label: ""
    source-arrowhead.label: "1"
    style.stroke: "#3fb950"
    style.stroke-width: 2
  }

  discoverer -> runner: "TestSuite" {
    class: arrow_style
    target-arrowhead.label: ""
    source-arrowhead.label: "2"
    style.stroke: "#3fb950"
    style.stroke-width: 2
  }

  runner -> assertion_engine: "Assertion Request" {
    class: arrow_style
    target-arrowhead.label: ""
    source-arrowhead.label: "3"
    style.stroke: "#8b949e"
    style.stroke-width: 1
  }

  assertion_engine -> runner: "Assertion Result" {
    class: arrow_style
    target-arrowhead.label: ""
    source-arrowhead.label: "3"
    style.stroke: "#8b949e"
    style.stroke-width: 1
  }

  runner -> reporter: "TestResult" {
    class: arrow_style
    target-arrowhead.label: ""
    source-arrowhead.label: "4"
    style.stroke: "#3fb950"
    style.stroke-width: 2
  }

  reporter -> user: "Test Report" {
    class: arrow_style
    target-arrowhead.label: ""
    source-arrowhead.label: "5"
    style.stroke: "#3fb950"
    style.stroke-width: 2
  }
}