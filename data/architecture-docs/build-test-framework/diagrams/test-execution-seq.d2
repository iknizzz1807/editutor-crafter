title: Test Execution Sequence
description: Sequence diagram for running a single test with a fixture

shape: sequence_diagram

# Actors
user: User
cli: CLI
discoverer: Discoverer
runner: Runner
fixture_registry: Fixture Registry
assertion_engine: Assertion Engine
reporter: Reporter

# Style
user.style.font-color: "#e6edf3"
cli.style.font-color: "#e6edf3"
discoverer.style.font-color: "#e6edf3"
runner.style.font-color: "#e6edf3"
fixture_registry.style.font-color: "#e6edf3"
assertion_engine.style.font-color: "#e6edf3"
reporter.style.font-color: "#e6edf3"

# Execution sequence
user -> cli: "apollo tests/ --verbose"
cli -> discoverer: "discover_tests(path)"
discoverer -> cli: "return [test_info]"
cli -> runner: "run_test(test_info)"
runner -> fixture_registry: "setup_fixtures(test_info)"
fixture_registry -> runner: "fixtures_ready"
runner -> runner: "execute_test_code"
runner -> assertion_engine: "evaluate_assertions(test_result)"
assertion_engine -> runner: "assertion_outcome"
runner -> reporter: "record_result(test_id, outcome)"
runner -> fixture_registry: "teardown_fixtures"
fixture_registry -> runner: "fixtures_removed"
runner -> cli: "test_completed"
cli -> reporter: "generate_report"
reporter -> user: "display_report"