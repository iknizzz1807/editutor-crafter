title: Routing Table Configuration {
  near: top-center
}

original_config: Original Network Configuration {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  default_route: Default Route {
    label: "0.0.0.0/0 via 192.168.1.1"
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
  
  local_routes: Local Routes {
    label: "192.168.1.0/24 dev eth0"
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
}

network_interfaces: Network Interfaces {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  eth0: eth0 {
    label: "Physical Interface\n192.168.1.100"
    shape: hexagon
    style.fill: "#0f3460"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  tun0: tun0 {
    label: "VPN Interface\n10.8.0.2"
    shape: hexagon
    style.fill: "#0f3460"
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

vpn_config: VPN Configuration Changes {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  vpn_routes: VPN Routes {
    label: "10.8.0.0/24 dev tun0\nVPN Server via eth0"
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
  
  nat_rules: NAT Rules {
    label: "MASQUERADE\nPort Forwarding"
    shape: diamond
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
  
  route_override: Route Override {
    label: "Redirect traffic\nthrough VPN"
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
}

external: External Network {
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
  
  default_gateway: Default Gateway {
    label: "192.168.1.1"
    shape: cloud
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
  }
  
  vpn_server: VPN Server {
    label: "203.0.113.1:1194"
    shape: cloud
    style.fill: "#16213e"
    style.font-color: "#e6edf3"
    style.bold: true
    style.stroke: "#3fb950"
  }
}

# Original configuration connections
original_config.default_route -> network_interfaces.eth0: "Default traffic" {
  style.stroke: "#8b949e"
}
network_interfaces.eth0 -> external.default_gateway: "Internet access" {
  style.stroke: "#8b949e"
}

# VPN establishment
network_interfaces.eth0 -> external.vpn_server: "VPN connection" {
  style.stroke: "#3fb950"
  style.bold: true
}

# VPN routing changes
vpn_config.vpn_routes -> network_interfaces.tun0: "VPN traffic routing" {
  style.stroke: "#3fb950"
}
vpn_config.route_override -> original_config.default_route: "Override default" {
  style.stroke: "#d63031"
  style.stroke-dash: 5
}

# NAT processing
vpn_config.nat_rules <-> network_interfaces.eth0: "NAT processing" {
  style.stroke: "#f39c12"
}
vpn_config.nat_rules <-> network_interfaces.tun0: "VPN NAT" {
  style.stroke: "#f39c12"
}

# New traffic flow
network_interfaces.tun0 -> external.vpn_server: "Encrypted tunnel" {
  style.stroke: "#3fb950"
  style.bold: true
}