title: "Template Engine: Inheritance Block Flow"
direction: right

# Base Template
base_template: Base Template {
  shape: page
  style.fill: "#16213e"
  style.font-color: "#e6edf3"

  base_blocks: {
    header_block: Header Block {
      style.fill: "#0f3460"
    }
    content_block: Content Block {
      style.fill: "#0f3460"
    }
    sidebar_block: Sidebar Block {
      style.fill: "#0f3460"
    }
    footer_block: Footer Block {
      style.fill: "#0f3460"
    }
  }
}

# Child Template
child_template: Child Template {
  shape: page
  style.fill: "#16213e"
  style.font-color: "#e6edf3"

  child_blocks: {
    overridden_content: Overridden Content {
      style.fill: "#0f3460"
      style.stroke: "#3fb950"
      style.bold: true
    }
    new_block: New Block {
      style.fill: "#0f3460"
    }
  }
}

# Merge Process
merge_process: Merge Process {
  shape: diamond
  style.fill: "#1a1a2e"
  style.font-color: "#e6edf3"
  style.stroke: "#8b949e"

  decisions: {
    inherit: Inherit Parent Block? {
      shape: diamond
      style.fill: "#1a1a2e"
    }
    override: Override Parent Block? {
      shape: diamond
      style.fill: "#1a1a2e"
    }
  }
}

# Final Assembly
final_assembly: Final HTML Assembly {
  shape: rectangle
  style.fill: "#16213e"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"
  style.bold: true
}

# Final Output
rendered_html: Rendered HTML {
  shape: page
  style.fill: "#0f3460"
  style.font-color: "#e6edf3"
  style.stroke: "#3fb950"

  final_blocks: {
    final_header: Header Block
    final_content: Overridden Content
    final_sidebar: Sidebar Block
    final_new_block: New Block
    final_footer: Footer Block
  }
}

# Flow Connections
base_template -> merge_process: "Extends"
child_template -> merge_process: "Provides Blocks"

merge_process.decisions.inherit -> final_assembly: "Yes"
merge_process.decisions.override -> final_assembly: "No"

final_assembly -> rendered_html: "Assemble"

# Block Flow
base_template.base_blocks.header_block -> merge_process.decisions.inherit: "Header"
base_template.base_blocks.content_block -> merge_process.decisions.override: "Content"
base_template.base_blocks.sidebar_block -> merge_process.decisions.inherit: "Sidebar"
base_template.base_blocks.footer_block -> merge_process.decisions.inherit: "Footer"

child_template.child_blocks.overridden_content -> merge_process.decisions.override: "Override Content"
child_template.child_blocks.new_block -> merge_process.decisions.inherit: "New Block"