title: System Component Diagram

# Define a dark theme style class for containers
classes: {
  container_style: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
    style.font-size: 16
  }
  component_style: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  arrow_style: {
    style.stroke: "#8b949e"
    style.stroke-width: 1
    style.font-size: 12
  }
}

# Main layers
benchmarking: Benchmarking Infrastructure {
  class: container_style
  shape: rectangle
  
  cache_detector: Cache Detector {
    class: component_style
  }
  perf_counter: Perf Counter Reader {
    class: component_style
  }
  harness: Harness {
    class: component_style
  }
  
  # Internal connections
  harness -> cache_detector: uses
  harness -> perf_counter: uses
}

core_structures: Core Data Structures {
  class: container_style
  shape: rectangle
  
  aos_soa: AoS/SoA {
    class: component_style
  }
  hash_table: Hash Table {
    class: component_style
  }
  veb_tree: vEB Tree {
    class: component_style
  }
  blocked_matrix: Blocked Matrix {
    class: component_style
  }
}

analysis: Analysis Tools {
  class: container_style
  shape: rectangle
  
  reporter: Reporter {
    class: component_style
  }
  visualizer: Visualizer {
    class: component_style
  }
  
  # Internal connection
  reporter -> visualizer: provides data for
}

# Data flow connections
benchmarking.harness -> core_structures: measures performance {
  class: arrow_style
  label: "executes benchmarks"
}

benchmarking.harness -> analysis.reporter: sends results {
  class: arrow_style
  label: "benchmark data"
}

benchmarking.harness -> analysis.visualizer: provides metrics {
  class: arrow_style
  label: "performance counters"
}