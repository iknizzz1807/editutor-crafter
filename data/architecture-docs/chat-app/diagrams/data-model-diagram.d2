title: Core Data Relationships
label: Class diagram showing relationships between User, ClientSession, Room, and ChatMessage
direction: right

classes: {
  core_class: {
    shape: class
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.stroke-width: 2
  }
  primary_node: {
    style.stroke: "#3fb950"
    style.bold: true
  }
  relationship: {
    style.stroke: "#8b949e"
    style.font-color: "#8b949e"
  }
}

user: User {
  class: core_class
  class: primary_node
  - "username: string"
  - "session_list: List<ClientSession>"
  - "room_list: List<Room>"
}

client_session: ClientSession {
  class: core_class
  - "session_id: string"
  - "device_info: string"
  - "connected_at: Date"
  - "last_active: Date"
}

room: Room {
  class: core_class
  class: primary_node
  - "room_id: string"
  - "name: string"
  - "member_list: List<User>"
  - "message_history: List<ChatMessage>"
}

chat_message: ChatMessage {
  class: core_class
  - "message_id: string"
  - "sender: string"
  - "content: string"
  - "timestamp: Date"
  - "room_id: string"
}

user -> client_session: "has-many (multiple devices)" {
  class: relationship
  target-arrowhead.label: "1..*"
}

room -> user: "has-many (members)" {
  class: relationship
  target-arrowhead.label: "1..*"
}

room -> chat_message: "has-many (messages)" {
  class: relationship
  target-arrowhead.label: "1..*"
}

chat_message -> user: "belongs to (sender)" {
  class: relationship
  source-arrowhead.label: "1"
}

chat_message -> room: "belongs to (room)" {
  class: relationship
  source-arrowhead.label: "1"
}