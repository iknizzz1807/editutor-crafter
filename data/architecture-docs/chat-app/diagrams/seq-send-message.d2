shape: sequence_diagram

title: "Sequence: Broadcasting a Chat Message"

client_a: Client A
server: WebSocket Server
room_manager: Room Manager
persistence: Persistence
client_b: Client B

client_a -> server: chat message
server -> room_manager: validate & forward
room_manager -> persistence: store message
persistence -> room_manager: ack
room_manager -> room_manager: get room members (excl. sender)
room_manager -> server: send to members
server -> client_b: chat message