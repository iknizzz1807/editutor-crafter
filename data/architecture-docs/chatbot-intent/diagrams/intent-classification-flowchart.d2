title: Intent Classification and Fallback Flowchart

direction: right

classes: {
  process: {
    shape: rectangle
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  decision: {
    shape: diamond
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  start_end: {
    shape: oval
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

start: Receive User Text {
  class: start_end
}

vectorize: Vectorize Input {
  class: process
}

predict: Predict with Probabilities {
  class: process
}

check: Check Max Confidence Against Threshold {
  class: decision
}

unknown: Return 'unknown' {
  class: process
}

return: Return Intent with Highest Confidence {
  class: process
}

end: Output Intent Label {
  class: start_end
}

start -> vectorize: "Text input"
vectorize -> predict: "Feature vector"
predict -> check: "Confidence scores"
check -> unknown: "Below threshold"
check -> return: "At or above threshold"
unknown -> end: "Label: unknown"
return -> end: "Label: intent"