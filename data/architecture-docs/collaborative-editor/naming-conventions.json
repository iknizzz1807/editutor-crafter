{
  "types": {
    "CRDTOperation": "fields: type string, siteId string, logicalClock number, data object",
    "InsertOperation": "extends CRDTOperation, positionId PositionId, character string",
    "DeleteOperation": "extends CRDTOperation, positionId PositionId",
    "Operation": "fields: type string, position number, content string, length number",
    "WebSocketClient": "fields: url string, messageHandler object, connectionHandler object",
    "DocumentServer": "fields: port number, wss WebSocket.Server, documents Map, connections Map",
    "PositionId": "unique identifier for character positions in sequence CRDT",
    "DocumentState": "fields: content string, operations array, users Map",
    "CRDTCharacter": "fields: positionId PositionId, character string, siteId string, logicalClock number",
    "OperationId": "fields: siteId string, logicalClock number",
    "CursorPosition": "fields: userId string, position number, selectionStart number, selectionEnd number, timestamp number, siteId string, displayName string, color string",
    "CursorManager": "fields: cursors Map, userColors Map, colorPalette array, nextColorIndex number, updateThrottler Map, THROTTLE_MS number",
    "CursorRenderer": "fields: editorElement HTMLElement, cursorElements Map, animationFrame number",
    "CursorTransformer": "static class for cursor position transformation",
    "UserOperationHistory": "fields: userId string, maxHistorySize number, operations array, undoStack array, redoStack array, operationIdCounter number",
    "OperationHistoryManager": "fields: userHistories Map, globalOperationSequence array, dependencyGraph Map",
    "UndoSafetyValidator": "fields: historyManager OperationHistoryManager",
    "CollaborativeUndoManager": "fields: syncEngine object, historyManager OperationHistoryManager, safetyValidator UndoSafetyValidator, inverseGenerator InverseOperationGenerator",
    "InverseOperationGenerator": "fields: none",
    "OperationEntry": "fields: id string, originalOperation object, currentState object, timestamp number, canUndo boolean, dependencies array",
    "WebSocketManager": "fields: url string, messageHandler function, reconnectDelay number, maxReconnectDelay number, reconnectAttempts number, isConnected boolean, pendingMessages array",
    "OperationValidator": "static class for operation validation",
    "NetworkErrorHandler": "fields: webSocketManager WebSocketManager, documentState DocumentState, offlineOperations array, isOffline boolean",
    "StateRecoveryManager": "fields: documentState DocumentState, webSocketManager WebSocketManager, recoveryInProgress boolean",
    "MESSAGE_TYPES": "operation, acknowledgment, error, cursor, user-join, user-leave",
    "CollaborativeTestFramework": "fields: replicas Map, networkSimulator NetworkSimulator, operationGenerator OperationGenerator",
    "NetworkSimulator": "fields: latencyRange array, packetLossProbability number, reorderProbability number",
    "OperationGenerator": "fields: maxDocumentLength number, operationCounter number, siteIds array",
    "CollaborativeLogger": "fields: level string, levels object",
    "StateInspector": "static class for state comparison",
    "ConvergenceTester": "fields: replicas Map, operationHistory array",
    "PerformanceProfiler": "fields: metrics Map, samples Map",
    "RichTextCharacter": "fields: positionId PositionId, character string, attributes AttributeMap, siteId string, logicalClock number",
    "FormatOperation": "fields: type string, startPos PositionId, endPos PositionId, attributes Map, siteId string, logicalClock number",
    "AttributeMap": "fields: bold boolean, italic boolean, color string, fontSize number, custom Map",
    "FormatRange": "fields: start number, end number, attributes AttributeMap, operationId string",
    "RichTextDocument": "fields: characters Array, formatOperations Array, renderedRanges Array",
    "DocumentStore": "fields: db object, snapshotManager SnapshotManager, operationLog OperationLog",
    "OperationLog": "fields: db object, retentionWindow number",
    "SnapshotManager": "fields: db object",
    "ConsistentHash": "fields: virtualNodeCount number, ring Map, servers Set, sortedHashes Array",
    "DocumentMigrator": "fields: documentStore DocumentStore, webSocketManager WebSocketManager, activeMigrations Map"
  },
  "methods": {
    "compareTo(other)": "compares operation ordering for causal consistency",
    "toJSON()": "serializes operation for network transport",
    "fromJSON(json)": "deserializes operation from network message",
    "transform(op1, op2, priority)": "transforms concurrent operations to preserve intent",
    "apply(document)": "applies operation to document string",
    "invert(document)": "creates inverse operation for undo",
    "connect()": "establishes WebSocket connection with reconnection",
    "send(message)": "sends message if connection is open",
    "broadcast(documentId, message, excludeWs)": "sends message to all users in document",
    "handleMessage(ws, message)": "processes incoming WebSocket message",
    "applyOperation(operation)": "applies operation to document state",
    "getContentString()": "renders current document text",
    "addUser(userId, displayName, color)": "adds user to presence tracking",
    "updateCursor(userId, position)": "updates user cursor position",
    "insertCharacter(character, position)": "creates and applies insert operation",
    "deleteCharacter(position)": "creates and applies delete operation",
    "addUser(userId, displayName, color) returns boolean": "adds new user to cursor tracking system",
    "removeUser(userId) returns boolean": "removes user and cleans up cursor state",
    "updateCursor(userId, position, selectionStart, selectionEnd) returns void": "updates cursor position for specific user",
    "getCursor(userId) returns CursorPosition": "retrieves current cursor state for user",
    "getAllCursors() returns Map": "returns cursor positions for all users",
    "transformCursors(operation) returns void": "transforms all cursor positions after document edit",
    "transformCursorInsert(cursorPos, insertPos, insertLength) returns number": "transforms cursor position for insert operation",
    "transformCursorDelete(cursorPos, deletePos, deleteLength) returns number": "transforms cursor position for delete operation",
    "createCursorElement(userId, color, displayName) returns HTMLElement": "creates visual cursor element for user",
    "updateCursorPosition(userId, position) returns void": "updates cursor visual position in editor",
    "renderSelection(userId, selectionStart, selectionEnd) returns void": "renders text selection highlight for user",
    "addOperation(operation)": "adds operation to user history and undo stack",
    "getUndoableOperation()": "returns most recent undoable operation or null",
    "markAsUndone(operationId)": "moves operation from undo to redo stack",
    "getRedoableOperation()": "returns most recent redoable operation or null",
    "markAsRedone(operationId)": "moves operation from redo to undo stack",
    "transformOperation(operationId, transformingOperation)": "applies transformation to specified operation",
    "recordOperation(userId, operation)": "records operation in user history and global sequence",
    "validateUndo(userId, operationId)": "checks if undo operation is safe to execute",
    "generateInverse(operationEntry, documentState)": "creates inverse operation for undo",
    "requestUndo(userId)": "processes undo request with safety validation",
    "requestRedo(userId)": "processes redo request",
    "checkDependencies(targetOperation)": "validates operation dependencies for undo safety",
    "checkContentConflicts(targetOperation)": "detects content conflicts that would block undo",
    "checkCausalityPreservation(targetOperation)": "ensures undo preserves happened-before relationships",
    "transformCursors(operation)": "transforms all cursor positions after document edit",
    "enqueueOperation(operation, callback)": "adds operation to pending queue with acknowledgment tracking",
    "handleAcknowledgment(operationId)": "processes acknowledgment and removes from pending queue",
    "connect() returns void": "establishes WebSocket connection with reconnection logic",
    "send(message) returns boolean": "sends message if connection open, queues if offline",
    "handleNetworkFailure() returns void": "transitions to offline mode and begins operation queuing",
    "queueOfflineOperation(operation) returns void": "stores operation locally during offline period",
    "handleReconnection() returns void": "synchronizes offline changes with server state",
    "validateSynchronization(serverState, localState) returns boolean": "verifies successful state synchronization",
    "recoverClientState() returns void": "restores client state after crash or refresh",
    "handleServerRestart() returns void": "re-establishes session after server restart",
    "performThreeWayMerge(baseState, localState, serverState) returns object": "merges conflicting states using common ancestor",
    "validateOperation(operation) returns object": "checks operation validity and returns errors",
    "sanitizeContent(content) returns string": "normalizes and filters text content",
    "createReplica(replicaId) returns": "creates isolated replica for testing",
    "deliverOperation(fromReplica, toReplica, operation, delay) returns": "applies operation with simulated network delay",
    "verifyConvergence() returns": "checks if all replicas have identical state",
    "delay(baseDelay) returns": "simulates network latency with jitter",
    "shouldDropPacket() returns": "determines if packet should be lost",
    "generateInsertOperation(currentDocLength) returns": "creates random insert operation",
    "generateDeleteOperation(currentDocLength) returns": "creates random delete operation",
    "log(level, event, data)": "structured logging with correlation",
    "captureDocumentState(documentState, cursors, users)": "snapshot current state",
    "compareStates(state1, state2)": "identify state differences",
    "createReplicas(count)": "initialize test replicas",
    "testOperationOrdering(operations)": "verify convergence across orderings",
    "generateRandomOperations(count, documentLength)": "create test operations",
    "verifyConvergence()": "check replica consistency",
    "timeOperation(operationName, correlationId, fn)": "measure operation performance",
    "trackMemoryUsage(context)": "monitor memory patterns",
    "recordNetworkMetric(messageType, size, latency)": "track network performance",
    "generateReport()": "create performance analysis",
    "transformAgainstTextOp(textOperation) returns FormatOperation": "transforms formatting operation against concurrent text operation",
    "mergeWith(otherOperation) returns FormatOperation": "merges overlapping formatting operations",
    "toCSSStyles() returns object": "converts attribute map to CSS style object",
    "loadDocument(documentId) returns object": "loads document snapshot and recent operations",
    "saveDocument(documentId, documentState, operations) returns void": "persists document state and operation log",
    "handleClientReconnection(documentId, clientState) returns object": "synchronizes reconnecting client with server state",
    "appendOperation(documentId, operation, transaction) returns void": "adds operation to persistent log",
    "getOperationsSince(documentId, sequenceNumber) returns Array": "retrieves operations after sequence number",
    "addServer(serverId) returns Array": "adds server to hash ring and returns affected documents",
    "removeServer(serverId) returns Array": "removes server and returns documents needing reassignment",
    "getServerForDocument(documentId) returns string": "finds server assignment for document",
    "migrateDocument(documentId, sourceServer, destinationServer) returns void": "transfers document between servers",
    "applyFormatting(startIndex, endIndex, attributes) returns FormatOperation": "applies formatting to text range",
    "integrateFormatOperation(formatOperation) returns void": "applies remote formatting operation",
    "renderToHTML() returns string": "generates formatted HTML output"
  },
  "constants": {
    "OPERATION_TYPES": "insert, delete for basic text operations",
    "MESSAGE_TYPES": "operation, acknowledgment, error, cursor, user-join, user-leave",
    "TRANSFORM_PROPERTIES": "TP1 and TP2 correctness properties for OT",
    "THROTTLE_MS": "50ms frequency limit for cursor updates",
    "colorPalette": "array of hex color codes for user assignment",
    "maxHistorySize": "100 default limit for operation history per user",
    "maxReconnectDelay": "30000ms maximum delay between reconnection attempts",
    "virtualNodeCount": "150 default virtual nodes per server for load distribution",
    "retentionWindow": "1000 operations kept in log for conflict resolution",
    "SNAPSHOT_INTERVAL": "100 operations between automatic snapshots",
    "MIGRATION_TIMEOUT": "30000ms maximum time for document migration"
  },
  "terms": {
    "CRDT": "Conflict-free Replicated Data Type for distributed consistency",
    "Operational Transformation": "technique for transforming concurrent operations to preserve intent",
    "position identifier": "stable identifier for character positions in sequence CRDT",
    "tombstone": "marker for deleted content that preserves position references",
    "causal ordering": "partial order based on happened-before relationships",
    "logical clock": "Lamport timestamp for ordering concurrent events",
    "convergence": "guarantee that all replicas reach same final state",
    "intention preservation": "maintaining user's intended effect despite concurrent changes",
    "cursor presence": "real-time synchronization and visualization of user cursor positions",
    "position transformation": "updating operation positions when concurrent edits change document structure",
    "selection highlighting": "visual indication of text ranges selected by remote users",
    "cursor throttling": "limiting update frequency to prevent flickering and improve performance",
    "boundary clamping": "ensuring cursor positions remain within valid document ranges",
    "transform function": "mathematical operation that modifies concurrent operations for consistency",
    "operation buffering": "client-side queuing of operations awaiting server acknowledgment",
    "optimistic application": "immediately applying operations locally while awaiting server confirmation",
    "selective undo": "ability to undo only specific user's operations while preserving others' work",
    "inverse operation": "operation that exactly reverses the effect of another operation",
    "operation history": "chronological record of operations performed by each user",
    "undo safety": "validation that undo operation won't violate consistency or cause conflicts",
    "dependency tracking": "recording relationships between operations for conflict detection",
    "content preservation": "storing deleted content in operation metadata for restoration during undo",
    "causality preservation": "maintaining happened-before relationships during undo operations",
    "hard dependency": "operation dependency that cannot be automatically resolved",
    "conflict resolution": "automatic or interactive handling of undo conflicts with concurrent edits",
    "network partition": "communication failure between distributed system components",
    "offline mode": "client operation while disconnected from server",
    "operation queuing": "local buffering of operations during network failures",
    "state-based synchronization": "merging based on complete state rather than operations",
    "three-way merge": "conflict resolution using common ancestor state",
    "exponential backoff": "progressively longer delays between retry attempts",
    "validation pipeline": "multi-layer checking of operation correctness",
    "content sanitization": "filtering and normalizing text input",
    "state reconstruction": "rebuilding system state after failures",
    "optimistic reconnection": "assuming success and handling conflicts afterward",
    "property-based testing": "automated testing using generated inputs with invariant checking",
    "operation reordering": "applying same operations in different sequences to test consistency",
    "network partition simulation": "testing behavior when replicas cannot communicate",
    "rich text formatting": "styled text with attributes like bold, italic, and color",
    "attribute map": "collection of formatting properties applied to text",
    "format range": "text span with consistent formatting attributes",
    "document persistence": "permanent storage of collaborative document state",
    "operation log": "chronological record of document operations for conflict resolution",
    "document snapshot": "point-in-time complete document state for fast loading",
    "horizontal scaling": "distributing load across multiple servers",
    "consistent hashing": "algorithm for stable document-to-server assignment",
    "document migration": "moving document between servers while preserving state",
    "virtual nodes": "multiple hash ring positions per server for load distribution",
    "service registry": "directory service for document location discovery"
  }
}