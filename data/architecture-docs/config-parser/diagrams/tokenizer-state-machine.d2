direction: right

classes: {
  state_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  final_state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
    style.double-border: true
  }
  transition_style: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

init: {
  shape: circle
  style.fill: "#3fb950"
  label: ""
}

normal: Normal Text {
  shape: circle
  class: state_style
}

quote_start: Quote Start {
  shape: circle
  class: state_style
}

in_quote: In Quoted String {
  shape: circle
  class: state_style
}

escape_seq: Escape Sequence {
  shape: circle
  class: state_style
}

multiline_start: Multiline Start {
  shape: circle
  class: state_style
}

in_multiline: In Multiline {
  shape: circle
  class: state_style
}

multiline_escape: Multiline Escape {
  shape: circle
  class: state_style
}

token_complete: Token Complete {
  shape: circle
  class: final_state
}

error: Error {
  shape: circle
  style.fill: "#d63031"
  style.stroke: "#e17055"
  style.font-color: "#ffffff"
  style.bold: true
}

init -> normal: start {
  class: transition_style
}

normal -> quote_start: '"' {
  class: transition_style
}

normal -> multiline_start: '"""' {
  class: transition_style
}

normal -> token_complete: whitespace/delimiter {
  class: transition_style
}

normal -> normal: regular char {
  class: transition_style
}

quote_start -> in_quote: any char {
  class: transition_style
}

in_quote -> in_quote: regular char {
  class: transition_style
}

in_quote -> escape_seq: '\\' {
  class: transition_style
}

in_quote -> token_complete: '"' {
  class: transition_style
}

in_quote -> error: newline {
  class: transition_style
}

escape_seq -> in_quote: valid escape {
  class: transition_style
}

escape_seq -> error: invalid escape {
  class: transition_style
}

multiline_start -> in_multiline: any char {
  class: transition_style
}

in_multiline -> in_multiline: regular char/newline {
  class: transition_style
}

in_multiline -> multiline_escape: '\\' {
  class: transition_style
}

in_multiline -> token_complete: '"""' {
  class: transition_style
}

multiline_escape -> in_multiline: valid escape {
  class: transition_style
}

multiline_escape -> error: invalid escape {
  class: transition_style
}

token_complete -> normal: next token {
  class: transition_style
}