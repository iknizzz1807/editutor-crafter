shape: sequence_diagram

system_manager: System Manager {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

physics_system: Physics System {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

component_storage: Component Storage {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

entity_manager: Entity Manager {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

system_manager -> physics_system: execute()
physics_system -> component_storage: query(Position, Velocity)
component_storage -> physics_system: ComponentQuery<Position, Velocity>
physics_system -> entity_manager: get_entities()
entity_manager -> physics_system: entity_list
physics_system -> physics_system: for each entity
physics_system -> component_storage: get<Position>(entity)
component_storage -> physics_system: position_ref
physics_system -> component_storage: get<Velocity>(entity)
component_storage -> physics_system: velocity_ref
physics_system -> physics_system: update_position(position, velocity)
physics_system -> component_storage: set<Position>(entity, new_pos)
physics_system -> system_manager: execution_complete