title: System Component Overview {
  style.font-size: 20
  style.bold: true
  near: top-center
}

classes: {
  component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  subcomponent: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  datastore: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  interface: {
    style.fill: "#2d3748"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.font-size: 12
  }
}

dag_engine: DAG Engine {
  class: component
  parser: DAG Parser {
    class: subcomponent
  }
  validator: Dependency Validator {
    class: subcomponent
  }
  optimizer: Execution Planner {
    class: subcomponent
  }
  parser -> validator: parsed DAG
  validator -> optimizer: validated DAG
}

scheduler: Scheduler {
  class: component
  cron: Cron Manager {
    class: subcomponent
  }
  queue: Task Queue {
    class: subcomponent
    shape: queue
  }
  resource: Resource Manager {
    class: subcomponent
  }
  cron -> queue: scheduled tasks
  resource -> queue: resource allocation
}

executor: Executor {
  class: component
  worker: Worker Pool {
    class: subcomponent
  }
  runtime: Task Runtime {
    class: subcomponent
  }
  state: State Manager {
    class: subcomponent
  }
  worker -> runtime: execute task
  runtime -> state: update status
}

connectors: Connectors {
  class: component
  db_conn: Database Connectors {
    class: subcomponent
  }
  api_conn: API Connectors {
    class: subcomponent
  }
  file_conn: File System Connectors {
    class: subcomponent
  }
}

monitoring: Monitoring {
  class: component
  metrics: Metrics Collector {
    class: subcomponent
  }
  alerts: Alert Manager {
    class: subcomponent
  }
  ui: Dashboard UI {
    class: subcomponent
  }
  metrics -> alerts: threshold breaches
  metrics -> ui: real-time data
}

metadata_store: Metadata Store {
  class: datastore
  shape: cylinder
}

config_store: Configuration Store {
  class: datastore
  shape: cylinder
}

# Main data flow
dag_engine.optimizer -> scheduler.queue: execution plan {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

scheduler.queue -> executor.worker: task assignments {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

executor.runtime -> connectors: data operations {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

# State and metadata flows
executor.state -> monitoring.metrics: execution metrics {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

scheduler -> monitoring.metrics: scheduling metrics {
  style.stroke: "#8b949e"
  style.stroke-dash: 3
}

dag_engine -> metadata_store: DAG definitions {
  style.stroke: "#8b949e"
}

scheduler -> config_store: schedule configs {
  style.stroke: "#8b949e"
}

executor -> metadata_store: execution history {
  style.stroke: "#8b949e"
}

# Key interfaces
rest_api: REST API {
  class: interface
  shape: rectangle
}

grpc_api: gRPC API {
  class: interface
  shape: rectangle
}

web_ui: Web Interface {
  class: interface
  shape: rectangle
}

rest_api -> dag_engine: submit DAGs
rest_api -> scheduler: trigger jobs
rest_api -> monitoring: query metrics

grpc_api -> executor: task control
grpc_api -> scheduler: resource updates

web_ui -> monitoring.ui: dashboard
web_ui -> rest_api: management operations

rest_api.near: top-left
grpc_api.near: top-right
web_ui.near: bottom-left