shape: sequence_diagram

Command: Command
Handler: Command Handler  
Aggregate: Aggregate
EventStore: Event Store
Projection: Projection Updates

Command -> Handler: Submit Command
Handler -> Aggregate: Load Current State
Aggregate -> EventStore: Get Events
EventStore -> Aggregate: Historical Events
Aggregate -> Handler: Current State
Handler -> Aggregate: Execute Business Logic
Aggregate -> Handler: New Events
Handler -> EventStore: Persist Events
EventStore -> Handler: Confirmation
Handler -> Projection: Publish Events
Projection -> Projection: Update Read Models
Handler -> Command: Success Response

Command.style.fill: "#1a1a2e"
Command.style.font-color: "#e6edf3"
Command.style.stroke: "#3fb950"

Handler.style.fill: "#16213e"
Handler.style.font-color: "#e6edf3"
Handler.style.stroke: "#3fb950"
Handler.style.bold: true

Aggregate.style.fill: "#0f3460"
Aggregate.style.font-color: "#e6edf3"
Aggregate.style.stroke: "#3fb950"

EventStore.style.fill: "#1a1a2e"
EventStore.style.font-color: "#e6edf3"
EventStore.style.stroke: "#3fb950"
EventStore.style.bold: true

Projection.style.fill: "#16213e"
Projection.style.font-color: "#e6edf3"
Projection.style.stroke: "#3fb950"