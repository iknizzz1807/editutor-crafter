classes: {
  component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  store: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  flow_arrow: {
    style.stroke: "#3fb950"
    style.stroke-width: 2
    style.font-color: "#e6edf3"
  }
  data_arrow: {
    style.stroke: "#8b949e"
    style.stroke-width: 1
    style.font-color: "#8b949e"
  }
}

title: System Architecture Overview {
  near: top-center
  style.font-size: 18
  style.font-color: "#e6edf3"
  style.bold: true
}

write_side: Write Side {
  class: component
  
  commands: Command Handlers {
    class: component
  }
}

event_store: Event Store {
  shape: cylinder
  class: store
}

read_side: Read Side {
  class: component
  
  projections: Projections {
    class: component
  }
  
  read_models: Read Models {
    shape: cylinder
    class: store
  }
  
  queries: Query Handlers {
    class: component
  }
  
  projections -> read_models: update {
    class: data_arrow
  }
  
  queries -> read_models: read {
    class: data_arrow
  }
}

commands -> event_store: append events {
  class: flow_arrow
}

event_store -> projections: event stream {
  class: flow_arrow
}

external_input: External Input {
  shape: cloud
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

external_output: Query Results {
  shape: cloud
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

external_input -> commands: commands {
  class: flow_arrow
}

queries -> external_output: results {
  class: flow_arrow
}