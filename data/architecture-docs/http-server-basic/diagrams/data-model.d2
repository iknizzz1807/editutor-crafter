title: HTTP Data Structures

classes: {
  struct_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  arrow_style: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

HTTPRequest: {
  shape: class
  class: struct_style
  "- method: string"
  "- path: string"
  "- version: string"
  "- headers: Map<string, string>"
  "- body: char[]"
  "- content_length: size_t"
  "+ get_header(name: string): string"
  "+ is_valid(): bool"
}

HTTPResponse: {
  shape: class
  class: struct_style
  "- status_code: int"
  "- status_message: string"
  "- headers: Map<string, string>"
  "- body: char[]"
  "- content_length: size_t"
  "+ set_header(name: string, value: string): void"
  "+ set_status(code: int, message: string): void"
  "+ serialize(): string"
}

ServerConfig: {
  shape: class
  class: struct_style
  "- port: int"
  "- root_directory: string"
  "- max_connections: int"
  "- buffer_size: size_t"
  "- timeout_seconds: int"
  "- allowed_methods: string[]"
  "+ load_from_file(path: string): bool"
  "+ validate(): bool"
}

ConnectionContext: {
  shape: class
  class: struct_style
  "- socket_fd: int"
  "- client_addr: string"
  "- buffer: char[]"
  "- buffer_pos: size_t"
  "- state: ConnectionState"
  "- timestamp: time_t"
  "+ read_data(): ssize_t"
  "+ write_data(data: string): ssize_t"
  "+ close_connection(): void"
}

ConnectionContext -> HTTPRequest: processes {
  class: arrow_style
}

HTTPRequest -> HTTPResponse: generates {
  class: arrow_style
}

ConnectionContext -> HTTPResponse: sends {
  class: arrow_style
}

ServerConfig -> ConnectionContext: configures {
  class: arrow_style
}