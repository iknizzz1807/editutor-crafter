title: System Component Overview
description: Shows the high-level components of the server: the main event loop with the io_uring engine at the center, interacting with the Connection Manager, Buffer Pool, File I/O Handler, and Network I/O Handler. External entities are Clients and the Filesystem.

direction: right

environment: {
  theme: {
    canvas: "#0d1117"
    node: {
      style.fill: "#0d1117"
      style.stroke: "#30363d"
    }
    cluster: {
      style.fill: "#0d1117"
      style.stroke: "#3fb950"
    }
    text: {
      style.fill: "#e6edf3"
    }
    edge: {
      style.stroke: "#8b949e"
    }
  }
}

clients: Clients {
  shape: cloud
  style.fill: "#161b22"
}

filesystem: Filesystem {
  shape: cylinder
  style.fill: "#161b22"
}

server: Server System {
  shape: rectangle
  style.stroke-width: 3
  style.stroke: "#3fb950"
  style.fill: "#0d1117"

  main_loop: Main Event Loop {
    io_uring: io_uring Engine {
      style.bold: true
      style.stroke: "#3fb950"
      style.stroke-width: 2
    }
  }

  connection_manager: Connection Manager {
    style.fill: "#1a1a2e"
  }

  buffer_pool: Buffer Pool {
    style.fill: "#1a1a2e"
  }

  file_handler: File I/O Handler {
    style.fill: "#1a1a2e"
  }

  network_handler: Network I/O Handler {
    style.fill: "#1a1a2e"
  }

  # Internal interactions
  io_uring -> connection_manager: manages connections
  io_uring -> buffer_pool: allocates/recycles buffers
  io_uring -> file_handler: submits file ops
  io_uring -> network_handler: submits network ops

  # Completion flow
  connection_manager <- io_uring: connection events
  buffer_pool <- io_uring: buffer ready
  file_handler <- io_uring: I/O completion
  network_handler <- io_uring: I/O completion
}

# External interactions
clients -> connection_manager: connections/requests
connection_manager -> network_handler: I/O operations
network_handler -> clients: responses
file_handler -> filesystem: read/write ops
filesystem -> file_handler: data
network_handler -> buffer_pool: network data
file_handler -> buffer_pool: file data
buffer_pool -> network_handler: response data
buffer_pool -> file_handler: file data

# Legend note
note: |md
  **Legend:**
  - Solid arrows: data/control flow
  - io_uring Engine: Central async I/O coordinator
  - Handlers: Perform actual I/O operations
| {
  shape: page
  style.fill: "#161b22"
  style.stroke: "#3fb950"
}