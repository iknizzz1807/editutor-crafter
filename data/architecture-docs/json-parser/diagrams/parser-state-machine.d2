title: Parser State Machine {
  style.font-size: 18
  style.bold: true
  style.font-color: "#e6edf3"
}

classes: {
  state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  initial: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    style.font-color: "#1a1a2e"
  }
  
  transition: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

init: {
  shape: circle
  class: initial
  label: ""
  width: 20
  height: 20
}

expect_key: Expecting Key {
  shape: circle
  class: state
}

expect_colon: Expecting Colon {
  shape: circle
  class: state
}

expect_obj_value: Expecting Object Value {
  shape: circle
  class: state
}

obj_complete: Object Complete {
  shape: circle
  class: state
  style.double-border: true
}

expect_arr_value: Expecting Array Value {
  shape: circle
  class: state
}

expect_comma: Expecting Comma {
  shape: circle
  class: state
}

arr_complete: Array Complete {
  shape: circle
  class: state
  style.double-border: true
}

init -> expect_key: "'{' found" {
  class: transition
}

init -> expect_arr_value: "'[' found" {
  class: transition
}

expect_key -> expect_colon: string token {
  class: transition
}

expect_colon -> expect_obj_value: "':' found" {
  class: transition
}

expect_obj_value -> expect_comma: value parsed {
  class: transition
}

expect_obj_value -> obj_complete: "'}' found" {
  class: transition
}

expect_comma -> expect_key: "',' found" {
  class: transition
}

expect_comma -> obj_complete: "'}' found" {
  class: transition
}

expect_arr_value -> expect_comma: value parsed {
  class: transition
}

expect_arr_value -> arr_complete: "']' found" {
  class: transition
}

expect_comma -> expect_arr_value: "',' found" {
  class: transition
}

expect_comma -> arr_complete: "']' found" {
  class: transition
}

expect_obj_value -> expect_key: "'{' found (nested object)" {
  class: transition
  style.stroke-dash: 3
}

expect_obj_value -> expect_arr_value: "'[' found (nested array)" {
  class: transition
  style.stroke-dash: 3
}

expect_arr_value -> expect_key: "'{' found (nested object)" {
  class: transition
  style.stroke-dash: 3
}

expect_arr_value -> expect_arr_value: "'[' found (nested array)" {
  class: transition
  style.stroke-dash: 3
}