shape: sequence_diagram

query_point: Query Point
distance_calc: Distance Calculator
neighbor_finder: Neighbor Finder
voting_system: Voting System
prediction: Final Prediction

query_point -> distance_calc: Submit query features
distance_calc -> distance_calc: Calculate distances to all training points
distance_calc -> neighbor_finder: Return distance matrix
neighbor_finder -> neighbor_finder: Sort by distance ascending
neighbor_finder -> neighbor_finder: Select top K neighbors
neighbor_finder -> voting_system: Pass K nearest neighbors with labels
voting_system -> voting_system: Count votes by class
voting_system -> voting_system: Apply weighting (if configured)
voting_system -> prediction: Return majority class
prediction -> query_point: Classification result

classes: {
  sequence_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

query_point: {
  class: sequence_style
}

distance_calc: {
  class: sequence_style
}

neighbor_finder: {
  class: sequence_style
}

voting_system: {
  class: sequence_style
}

prediction: {
  class: sequence_style
}