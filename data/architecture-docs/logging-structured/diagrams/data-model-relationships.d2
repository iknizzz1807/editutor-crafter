direction: down

title: Data Model Relationships {
  near: top-center
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
}

# Core Data Types
LogRecord: LogRecord {
  shape: class
  - "timestamp: DateTime"
  - "level: LogLevel"
  - "message: string"
  - "logger_name: string"
  - "thread_id: int"
  - "process_id: int"
  - "module: string"
  - "function: string"
  - "line_number: int"
  - "context: Context"
  - "structured_data: Dict"
  + "format(): string"
  + "to_json(): string"
  + "with_context(ctx: Context): LogRecord"
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

LogLevel: LogLevel {
  shape: class
  - "name: string"
  - "value: int"
  - "color: string"
  + "DEBUG: LogLevel"
  + "INFO: LogLevel"
  + "WARNING: LogLevel"
  + "ERROR: LogLevel"
  + "CRITICAL: LogLevel"
  + "is_enabled(level: LogLevel): bool"
  + "compare(other: LogLevel): int"
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Context: Context {
  shape: class
  - "correlation_id: string"
  - "session_id: string"
  - "user_id: string"
  - "request_id: string"
  - "custom_fields: Dict"
  + "create(correlation_id: string): Context"
  + "merge(other: Context): Context"
  + "with_field(key: string, value: any): Context"
  + "to_dict(): Dict"
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

# Context Inheritance Hierarchy
RequestContext: RequestContext {
  shape: class
  - "http_method: string"
  - "url_path: string"
  - "client_ip: string"
  - "user_agent: string"
  + "from_request(request: HttpRequest): RequestContext"
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

TaskContext: TaskContext {
  shape: class
  - "task_id: string"
  - "task_name: string"
  - "worker_id: string"
  - "retry_count: int"
  + "from_task(task: Task): TaskContext"
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

DatabaseContext: DatabaseContext {
  shape: class
  - "connection_id: string"
  - "query_hash: string"
  - "table_names: string[]"
  - "operation_type: string"
  + "from_query(query: string): DatabaseContext"
  style.fill: "#16213e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

# LogLevel Hierarchy
LevelHierarchy: Log Level Hierarchy {
  shape: rectangle
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

LevelHierarchy.CRITICAL: CRITICAL (50) {
  style.fill: "#d63031"
  style.font-color: "#ffffff"
}

LevelHierarchy.ERROR: ERROR (40) {
  style.fill: "#e17055"
  style.font-color: "#ffffff"
}

LevelHierarchy.WARNING: WARNING (30) {
  style.fill: "#fdcb6e"
  style.font-color: "#2d3436"
}

LevelHierarchy.INFO: INFO (20) {
  style.fill: "#74b9ff"
  style.font-color: "#ffffff"
}

LevelHierarchy.DEBUG: DEBUG (10) {
  style.fill: "#a29bfe"
  style.font-color: "#ffffff"
}

LevelHierarchy.CRITICAL -> LevelHierarchy.ERROR: priority > {
  style.stroke: "#8b949e"
}
LevelHierarchy.ERROR -> LevelHierarchy.WARNING: priority > {
  style.stroke: "#8b949e"
}
LevelHierarchy.WARNING -> LevelHierarchy.INFO: priority > {
  style.stroke: "#8b949e"
}
LevelHierarchy.INFO -> LevelHierarchy.DEBUG: priority > {
  style.stroke: "#8b949e"
}

# Supporting Types
StructuredData: StructuredData {
  shape: class
  - "fields: Dict"
  - "metadata: Dict"
  + "add_field(key: string, value: any): void"
  + "get_field(key: string): any"
  + "serialize(): string"
  style.fill: "#1a1a2e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

# Relationships
LogRecord -> LogLevel: has {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

LogRecord -> Context: contains {
  style.stroke: "#3fb950"
  style.stroke-width: 2
}

LogRecord -> StructuredData: includes {
  style.stroke: "#8b949e"
}

Context -> RequestContext: inherits {
  style.stroke: "#74b9ff"
  style.stroke-dash: 3
}

Context -> TaskContext: inherits {
  style.stroke: "#74b9ff"
  style.stroke-dash: 3
}

Context -> DatabaseContext: inherits {
  style.stroke: "#74b9ff"
  style.stroke-dash: 3
}

LogLevel -> LevelHierarchy.CRITICAL: enum value {
  style.stroke: "#8b949e"
  style.stroke-dash: 5
}

LogLevel -> LevelHierarchy.ERROR: enum value {
  style.stroke: "#8b949e"
  style.stroke-dash: 5
}

LogLevel -> LevelHierarchy.WARNING: enum value {
  style.stroke: "#8b949e"
  style.stroke-dash: 5
}

LogLevel -> LevelHierarchy.INFO: enum value {
  style.stroke: "#8b949e"
  style.stroke-dash: 5
}

LogLevel -> LevelHierarchy.DEBUG: enum value {
  style.stroke: "#8b949e"
  style.stroke-dash: 5
}