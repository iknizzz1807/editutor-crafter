direction: right

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  handler: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  data: {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

log_message: Log Message {
  class: data
}

level_filter: Level Filter\n(DEBUG/INFO/WARN/ERROR) {
  shape: diamond
  class: decision
}

context_enrichment: Context Enrichment {
  class: process
}

formatter: Formatter {
  class: process
}

handler_dispatch: Handler Dispatch {
  class: process
}

console_handler: Console Handler {
  class: handler
}

file_handler: File Handler {
  class: handler
}

remote_handler: Remote Handler\n(Syslog/ELK) {
  class: handler
}

filtered_out: Filtered Out {
  shape: circle
  class: data
}

enriched_record: Enriched LogRecord {
  class: data
}

formatted_output: Formatted Output\n(JSON/Pretty) {
  class: data
}

log_message -> level_filter
level_filter -> filtered_out: Below Threshold
level_filter -> context_enrichment: Passes Filter

context_enrichment -> enriched_record
enriched_record -> formatter
formatter -> formatted_output
formatted_output -> handler_dispatch

handler_dispatch -> console_handler
handler_dispatch -> file_handler
handler_dispatch -> remote_handler

context_note: |md
  **Context Enrichment Adds:**
  - Timestamp
  - Thread ID
  - Logger name
  - Caller info
  - Custom fields
| {
  shape: page
  near: context_enrichment
  class: data
}