title: System Architecture Overview

classes: {
  component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  storage: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  queue: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  arrow: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

client: Client Applications {
  class: component
}

api_gateway: API Gateway {
  class: component
}

job_queue: Job Queue (Redis/RabbitMQ) {
  shape: queue
  class: queue
}

workers: Worker Processes {
  class: component
  image_worker: Image Processor
  video_worker: Video Transcoder
  thumb_worker: Thumbnail Generator
}

storage: Storage Layer {
  class: storage
  input_storage: Input Files {
    shape: cylinder
  }
  output_storage: Processed Files {
    shape: cylinder
  }
  metadata_db: Metadata DB {
    shape: cylinder
  }
}

progress_tracker: Progress Tracker {
  class: component
}

client -> api_gateway: Submit Job {
  class: arrow
}

api_gateway -> job_queue: Enqueue Job {
  class: arrow
}

api_gateway -> storage.metadata_db: Store Job Info {
  class: arrow
}

job_queue -> workers.image_worker: Image Jobs {
  class: arrow
}

job_queue -> workers.video_worker: Video Jobs {
  class: arrow
}

job_queue -> workers.thumb_worker: Thumbnail Jobs {
  class: arrow
}

workers.image_worker -> storage.input_storage: Read Source {
  class: arrow
}

workers.video_worker -> storage.input_storage: Read Source {
  class: arrow
}

workers.thumb_worker -> storage.input_storage: Read Source {
  class: arrow
}

workers.image_worker -> storage.output_storage: Write Result {
  class: arrow
}

workers.video_worker -> storage.output_storage: Write Result {
  class: arrow
}

workers.thumb_worker -> storage.output_storage: Write Result {
  class: arrow
}

workers.image_worker -> progress_tracker: Update Status {
  class: arrow
}

workers.video_worker -> progress_tracker: Update Status {
  class: arrow
}

workers.thumb_worker -> progress_tracker: Update Status {
  class: arrow
}

progress_tracker -> storage.metadata_db: Store Progress {
  class: arrow
}

client -> api_gateway: Check Status {
  class: arrow
}

api_gateway -> progress_tracker: Get Progress {
  class: arrow
}

client -> api_gateway: Retrieve Results {
  class: arrow
}

api_gateway -> storage.output_storage: Fetch Files {
  class: arrow
}