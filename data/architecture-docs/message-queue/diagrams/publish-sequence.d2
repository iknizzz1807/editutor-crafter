shape: sequence_diagram

classes: {
  actor_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  message_style: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

Producer: Producer {
  class: actor_style
}

Protocol_Handler: Protocol Handler {
  class: actor_style
}

Topic_Manager: Topic Manager {
  class: actor_style
}

Persistence: Persistence Layer {
  class: actor_style
}

Subscriber_A: Subscriber A {
  class: actor_style
}

Subscriber_B: Subscriber B {
  class: actor_style
}

Producer -> Protocol_Handler: PUBLISH command
Protocol_Handler -> Topic_Manager: validate & route message
Topic_Manager -> Persistence: store message
Persistence -> Topic_Manager: confirm storage
Topic_Manager -> Protocol_Handler: message accepted
Protocol_Handler -> Producer: PUBLISH ACK
Topic_Manager -> Subscriber_A: fanout message
Topic_Manager -> Subscriber_B: fanout message
Subscriber_A -> Protocol_Handler: message received
Subscriber_B -> Protocol_Handler: message received