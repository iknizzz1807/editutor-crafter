shape: sequence_diagram

scraper: Scrape Engine {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

discovery: Service Discovery {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

target: Target Service {
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

parser: Metrics Parser {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

storage: Storage Engine {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

scraper -> discovery: Get targets list
discovery -> scraper: Return active targets

scraper -> target: HTTP GET /metrics
target -> scraper: Prometheus format metrics

scraper -> parser: Parse raw metrics
parser -> parser: Extract labels & values
parser -> scraper: Structured samples

scraper -> storage: Ingest samples batch
storage -> scraper: Acknowledge write

scraper -> scraper: Schedule next scrape