classes: {
  container: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  storage: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  pipeline: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  important: {
    style.stroke: "#3fb950"
    style.bold: true
    style.font-color: "#e6edf3"
  }
}

title: Monitoring and Alerting Architecture {
  class: important
  near: top-center
}

metrics_collection: Metrics Collection {
  class: container
  
  model_metrics: Model Metrics {
    class: pipeline
  }
  
  system_metrics: System Metrics {
    class: pipeline
  }
  
  custom_metrics: Custom Metrics {
    class: pipeline
  }
  
  prometheus_client: Prometheus Client {
    class: pipeline
  }
}

prometheus: Prometheus Storage {
  shape: cylinder
  class: storage
}

grafana: Grafana Dashboards {
  class: container
  
  model_dashboard: Model Performance {
    class: pipeline
  }
  
  system_dashboard: System Health {
    class: pipeline
  }
  
  alerts_dashboard: Alerts Overview {
    class: pipeline
  }
}

alertmanager: Alert Manager {
  class: container
  
  alert_rules: Alert Rules {
    class: pipeline
  }
  
  notification: Notification Router {
    class: pipeline
  }
  
  silence: Silence Manager {
    class: pipeline
  }
}

drift_detection: Drift Detection Pipeline {
  class: container
  
  data_collector: Data Collector {
    class: pipeline
  }
  
  drift_analyzer: Drift Analyzer {
    class: pipeline
  }
  
  threshold_monitor: Threshold Monitor {
    class: pipeline
  }
}

external: External Integrations {
  class: container
  
  slack: Slack {
    shape: cloud
    class: important
  }
  
  email: Email {
    shape: cloud
    class: important
  }
  
  pagerduty: PagerDuty {
    shape: cloud
    class: important
  }
}

metrics_collection.prometheus_client -> prometheus: scrape metrics
prometheus -> grafana: query data
prometheus -> alertmanager.alert_rules: evaluate rules
alertmanager.notification -> external.slack: alerts
alertmanager.notification -> external.email: notifications
alertmanager.notification -> external.pagerduty: incidents

drift_detection.data_collector -> drift_detection.drift_analyzer: raw data
drift_detection.drift_analyzer -> drift_detection.threshold_monitor: drift scores
drift_detection.threshold_monitor -> prometheus: drift metrics
drift_detection.threshold_monitor -> alertmanager.alert_rules: trigger alerts