title: Feedback Loop Architecture

classes: {
  detector: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  evaluator: {
    style.fill: "#16213e"
    style.stroke: "#ffd700"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#0f3460"
    style.stroke: "#ff6b6b"
    style.font-color: "#e6edf3"
  }
  action: {
    style.fill: "#2d3748"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

production: Production Inference {
  class: detector
  shape: rectangle
}

metrics: Metrics Collection {
  class: detector
  shape: cylinder
}

drift_detector: Drift Detection {
  class: detector
  shape: rectangle
}

performance_monitor: Performance Monitor {
  class: detector
  shape: rectangle
}

analysis_engine: Analysis Engine {
  class: evaluator
  shape: rectangle
}

threshold_check: Performance Below Threshold? {
  class: decision
  shape: diamond
}

retrain_trigger: Retrain Trigger {
  class: action
  shape: rectangle
}

model_eval: Model Evaluation {
  class: evaluator
  shape: rectangle
}

improvement_check: Improvement Sufficient? {
  class: decision
  shape: diamond
}

deploy_decision: Deploy New Model {
  class: action
  shape: rectangle
}

rollback: Rollback to Previous {
  class: action
  shape: rectangle
}

feedback_store: Feedback Store {
  class: detector
  shape: cylinder
}

production -> metrics: inference data
metrics -> drift_detector: data distribution
metrics -> performance_monitor: accuracy metrics
drift_detector -> analysis_engine: drift signals
performance_monitor -> analysis_engine: performance data
analysis_engine -> threshold_check: analysis results

threshold_check -> retrain_trigger: Yes {
  style.stroke: "#ff6b6b"
}
threshold_check -> feedback_store: No {
  style.stroke: "#3fb950"
}

retrain_trigger -> model_eval: initiate retraining
model_eval -> improvement_check: evaluation results

improvement_check -> deploy_decision: Yes {
  style.stroke: "#3fb950"
}
improvement_check -> rollback: No {
  style.stroke: "#ff6b6b"
}

deploy_decision -> production: deploy new model
rollback -> production: restore previous
deploy_decision -> feedback_store: deployment log
rollback -> feedback_store: rollback log

feedback_store -> analysis_engine: historical patterns {
  style.stroke-dash: 3
}