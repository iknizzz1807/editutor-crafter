classes: {
  platform_component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  data_store: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  external_system: {
    style.fill: "#0f3460"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

title: MLOps Platform System Architecture {
  near: top-center
  style.font-size: 18
  style.bold: true
  style.font-color: "#e6edf3"
}

# Core MLOps Platform Components
platform: MLOps Platform {
  class: platform_component
  
  # Experiment Tracking Component
  experiment_tracking: Experiment Tracking {
    class: platform_component
    exp_api: Tracking API
    exp_ui: Web UI
    
    exp_db: Experiment DB {
      shape: cylinder
      class: data_store
    }
    
    exp_api -> exp_db: store metrics
    exp_ui -> exp_api: query experiments
  }
  
  # Model Registry Component
  model_registry: Model Registry {
    class: platform_component
    registry_api: Registry API
    model_store: Model Store
    
    registry_db: Registry DB {
      shape: cylinder
      class: data_store
    }
    
    registry_api -> registry_db: metadata
    registry_api -> model_store: artifacts
  }
  
  # Training Pipeline Component
  training_pipeline: Training Pipeline {
    class: platform_component
    orchestrator: Workflow Orchestrator
    pipeline_scheduler: Scheduler
    
    pipeline_db: Pipeline DB {
      shape: cylinder
      class: data_store
    }
    
    orchestrator -> pipeline_db: job status
    pipeline_scheduler -> orchestrator: trigger jobs
  }
  
  # Model Deployment Component  
  model_deployment: Model Deployment {
    class: platform_component
    deploy_api: Deployment API
    deployment_manager: Deployment Manager
    
    deploy_db: Deployment DB {
      shape: cylinder
      class: data_store
    }
    
    deploy_api -> deploy_db: deployment config
    deployment_manager -> deploy_db: status updates
  }
  
  # Model Monitoring Component
  model_monitoring: Model Monitoring {
    class: platform_component
    monitor_api: Monitoring API
    alert_manager: Alert Manager
    
    metrics_db: Metrics DB {
      shape: cylinder
      class: data_store
    }
    
    monitor_api -> metrics_db: performance data
    alert_manager -> metrics_db: query thresholds
  }
}

# External Systems
object_storage: Object Storage {
  shape: cylinder
  class: external_system
}

container_registry: Container Registry {
  class: external_system
}

inference_servers: Inference Servers {
  class: external_system
  
  model_server_1: Model Server A
  model_server_2: Model Server B
}

# Key Data Flow Connections
platform.experiment_tracking.exp_api -> platform.model_registry.registry_api: register model
platform.model_registry.registry_api -> platform.training_pipeline.orchestrator: fetch model
platform.training_pipeline.orchestrator -> object_storage: store artifacts
platform.model_registry.model_store <-> object_storage: sync artifacts
platform.model_deployment.deployment_manager -> container_registry: pull images
platform.model_deployment.deployment_manager -> inference_servers: deploy models
inference_servers -> platform.model_monitoring.monitor_api: send metrics
platform.model_monitoring.alert_manager -> platform.training_pipeline.pipeline_scheduler: trigger retraining

# Cross-component interactions
platform.training_pipeline.orchestrator -> platform.experiment_tracking.exp_api: log experiments
platform.model_deployment.deploy_api -> platform.model_registry.registry_api: fetch models
platform.model_monitoring.monitor_api -> platform.model_registry.registry_api: model metadata