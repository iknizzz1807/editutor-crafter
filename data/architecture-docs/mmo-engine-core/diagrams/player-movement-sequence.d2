shape: sequence_diagram

client: Client
spatial: Spatial System
interest: Interest Manager
netcode: Competitive Netcode
rollback: Rollback System

client -> spatial: Input (move forward)
spatial -> spatial: Update position
spatial -> interest: Position changed
interest -> interest: Query nearby entities
interest -> netcode: Relevant entities list
netcode -> netcode: Package state delta
netcode -> client: State update
client -> client: Apply update
client -> rollback: Store game state
rollback -> rollback: Verify consistency
rollback -> client: Confirmation
client -> spatial: ACK position update

classes: {
  system_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950" 
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

client.class: system_style
spatial.class: system_style
interest.class: system_style
netcode.class: system_style
rollback.class: system_style