title: Tenant Customization Components

classes: {
  primary: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  secondary: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  storage: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  important: {
    style.stroke: "#3fb950"
    style.stroke-width: 2
    style.font-color: "#3fb950"
    style.bold: true
  }
}

feature_flags: Feature Flags System {
  class: primary
  
  flag_engine: Flag Engine {
    class: secondary
  }
  
  tenant_flags: Tenant Flag Store {
    shape: cylinder
    class: storage
  }
  
  flag_resolver: Flag Resolver {
    class: secondary
  }
  
  flag_engine -> tenant_flags: read flags
  flag_resolver -> tenant_flags: evaluate
  flag_engine -> flag_resolver: resolve context
}

branding: Branding System {
  class: primary
  
  theme_engine: Theme Engine {
    class: secondary
  }
  
  asset_store: Asset Storage {
    shape: cylinder
    class: storage
  }
  
  brand_config: Brand Config {
    class: secondary
  }
  
  theme_engine -> asset_store: load assets
  brand_config -> asset_store: store branding
  theme_engine -> brand_config: apply theme
}

settings: Settings Hierarchy {
  class: primary
  
  global_defaults: Global Defaults {
    class: secondary
  }
  
  tenant_overrides: Tenant Overrides {
    shape: cylinder
    class: storage
  }
  
  settings_resolver: Settings Resolver {
    class: secondary
  }
  
  inheritance_engine: Inheritance Engine {
    class: secondary
  }
  
  global_defaults -> settings_resolver: provide defaults
  tenant_overrides -> settings_resolver: override values
  settings_resolver -> inheritance_engine: cascade rules
}

integrations: Integration Configuration {
  class: primary
  
  webhook_config: Webhook Config {
    class: secondary
  }
  
  api_settings: API Settings {
    shape: cylinder
    class: storage
  }
  
  auth_config: Auth Config {
    class: secondary
  }
  
  integration_registry: Integration Registry {
    class: secondary
  }
  
  webhook_config -> api_settings: store endpoints
  auth_config -> api_settings: save credentials
  integration_registry -> webhook_config: manage configs
  integration_registry -> auth_config: validate auth
}

customization_api: Customization API {
  class: important
}

tenant_context: Tenant Context {
  class: important
}

config_cache: Configuration Cache {
  shape: cylinder
  class: storage
}

customization_api -> feature_flags: manage flags
customization_api -> branding: update branding
customization_api -> settings: modify settings
customization_api -> integrations: configure integrations

tenant_context -> feature_flags: tenant scope
tenant_context -> branding: tenant scope
tenant_context -> settings: tenant scope
tenant_context -> integrations: tenant scope

feature_flags -> config_cache: cache flags
branding -> config_cache: cache themes
settings -> config_cache: cache config
integrations -> config_cache: cache endpoints

note: |md
  ## Tenant Customization Flow
  
  1. **Feature Flags**: Enable/disable features per tenant
  2. **Branding**: Custom themes, logos, colors
  3. **Settings**: Hierarchical configuration with inheritance
  4. **Integrations**: Tenant-specific API and webhook configs
  
  All components use tenant context for isolation and caching for performance.
| {
  shape: page
  near: bottom-center
  class: secondary
}