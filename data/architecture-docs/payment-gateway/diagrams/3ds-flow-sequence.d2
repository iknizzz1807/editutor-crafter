shape: sequence_diagram

classes: {
  primary: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  secondary: {
    style.fill: "#1a1a2e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  success: {
    style.stroke: "#28a745"
    style.font-color: "#28a745"
  }
  warning: {
    style.stroke: "#ffc107"
    style.font-color: "#ffc107"
  }
  error: {
    style.stroke: "#dc3545"
    style.font-color: "#dc3545"
  }
}

client: Client {
  class: primary
}
gateway: Payment Gateway {
  class: primary
}
provider: Payment Provider {
  class: secondary
}
issuer: Issuer Bank {
  class: secondary
}

client -> gateway: Initiate Payment
gateway -> provider: Create 3DS Session
provider -> gateway: Return ACS URL & Session ID
gateway -> client: Redirect to ACS URL
client -> issuer: Authentication Challenge
issuer -> client: Present Authentication Form
client -> issuer: Submit Authentication
issuer -> provider: Authentication Result
provider -> gateway: 3DS Authentication Status
gateway -> provider: Process Payment with 3DS Token
provider -> issuer: Authorization Request
issuer -> provider: Authorization Response
provider -> gateway: Payment Result
gateway -> client: Payment Confirmation