title: Enemy AI Behavior Flow

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  action: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

start: Start Patrol {
  shape: circle
  class: process
}

move_to_waypoint: Move Toward\nWaypoint {
  shape: rectangle
  class: action
}

check_bounds: At Patrol\nBoundary? {
  shape: diamond
  class: decision
}

reverse_direction: Reverse\nDirection {
  shape: rectangle
  class: action
}

check_player: Player\nDetected? {
  shape: diamond
  class: decision
}

handle_collision: Handle Player\nCollision {
  shape: rectangle
  class: process
}

player_stomp: Player Stomped\nEnemy? {
  shape: diamond
  class: decision
}

enemy_defeated: Enemy\nDefeated {
  shape: rectangle
  style.fill: "#d63031"
  style.font-color: "#ffffff"
  style.stroke: "#e17055"
}

player_hurt: Hurt Player {
  shape: rectangle
  style.fill: "#fdcb6e"
  style.font-color: "#2d3436"
  style.stroke: "#e17055"
}

continue_patrol: Continue\nPatrol {
  shape: rectangle
  class: action
}

start -> move_to_waypoint
move_to_waypoint -> check_bounds
check_bounds -> reverse_direction: Yes
check_bounds -> check_player: No
reverse_direction -> check_player
check_player -> handle_collision: Yes
check_player -> continue_patrol: No
handle_collision -> player_stomp
player_stomp -> enemy_defeated: Yes
player_stomp -> player_hurt: No
enemy_defeated -> start: {style.stroke-dash: 3}
player_hurt -> continue_patrol
continue_patrol -> move_to_waypoint