classes: {
  process_step: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  timing_element: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  decision: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

title: Game Loop Execution Cycle {
  near: top-center
  style.font-size: 18
  style.bold: true
  style.font-color: "#e6edf3"
}

frame_start: Frame Start {
  shape: circle
  class: process_step
  style.fill: "#3fb950"
}

calc_delta: Calculate Delta Time {
  class: timing_element
}

process_input: Process Input {
  class: process_step
}

update_entities: Update Entities {
  class: process_step
}

update_physics: Update Physics {
  class: process_step
}

resolve_collisions: Resolve Collisions {
  class: process_step
}

update_camera: Update Camera {
  class: process_step
}

render_frame: Render Frame {
  class: process_step
}

frame_complete: Frame Complete {
  shape: circle
  class: process_step
  style.fill: "#d63031"
}

vsync_check: VSync Ready? {
  shape: diamond
  class: decision
}

timing_info: |md
  **Delta Time Calculation:**
  ```
  current_time = get_time()
  delta = current_time - last_frame_time
  last_frame_time = current_time
  ```
  
  **Target: 60 FPS (16.67ms per frame)**
| {
  shape: page
  near: top-right
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

frame_start -> calc_delta: Start New Frame
calc_delta -> process_input: dt calculated
process_input -> update_entities: Input processed
update_entities -> update_physics: Entities updated (dt)
update_physics -> resolve_collisions: Physics stepped (dt)
resolve_collisions -> update_camera: Collisions resolved
update_camera -> render_frame: Camera updated (dt)
render_frame -> frame_complete: Rendering complete
frame_complete -> vsync_check: Check timing
vsync_check -> frame_start: Yes\nNext frame {
  style.stroke: "#3fb950"
}
vsync_check -> vsync_check: No\nWait for VSync {
  style.stroke: "#d63031"
}