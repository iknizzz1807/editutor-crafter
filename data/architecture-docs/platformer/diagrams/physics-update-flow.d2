title: Physics Update Flow

classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  arrow: {
    style.stroke: "#8b949e"
  }
}

start: Start {
  shape: circle
  style.fill: "#3fb950"
  style.font-color: "#ffffff"
}

apply_gravity: Apply Gravity {
  shape: rectangle
  class: process
}

process_input: Process Input {
  shape: rectangle
  class: process
}

update_velocity: Update Velocity {
  shape: rectangle
  class: process
}

update_position: Update Position {
  shape: rectangle
  class: process
}

check_collisions: Check Collisions {
  shape: rectangle
  class: process
}

has_collision: Has Collision? {
  shape: diamond
  class: decision
}

resolve_collisions: Resolve Collisions {
  shape: rectangle
  class: process
}

ground_check: On Ground? {
  shape: diamond
  class: decision
}

set_grounded: Set Grounded True {
  shape: rectangle
  class: process
}

set_airborne: Set Airborne {
  shape: rectangle
  class: process
}

end: End Frame {
  shape: circle
  style.fill: "#3fb950"
  style.font-color: "#ffffff"
}

start -> apply_gravity: {class: arrow}
apply_gravity -> process_input: {class: arrow}
process_input -> update_velocity: {class: arrow}
update_velocity -> update_position: {class: arrow}
update_position -> check_collisions: {class: arrow}
check_collisions -> has_collision: {class: arrow}
has_collision -> resolve_collisions: Yes {class: arrow}
has_collision -> ground_check: No {class: arrow}
resolve_collisions -> ground_check: {class: arrow}
ground_check -> set_grounded: Yes {class: arrow}
ground_check -> set_airborne: No {class: arrow}
set_grounded -> end: {class: arrow}
set_airborne -> end: {class: arrow}