classes: {
  process_style: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  pipe_style: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  fd_style: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    shape: circle
  }
}

title: "Pipe Communication Flow" {
  style.font-size: 24
  style.font-color: "#e6edf3"
  style.bold: true
  near: top-center
}

parent_process: "Parent Process" {
  class: process_style
  
  parent_stdin: "stdin (0)" {
    class: fd_style
  }
  parent_stdout: "stdout (1)" {
    class: fd_style
  }
  parent_stderr: "stderr (2)" {
    class: fd_style
  }
}

child_process: "Child Process" {
  class: process_style
  
  child_stdin: "stdin (0)" {
    class: fd_style
  }
  child_stdout: "stdout (1)" {
    class: fd_style
  }
  child_stderr: "stderr (2)" {
    class: fd_style
  }
}

pipe1: "Pipe 1" {
  class: pipe_style
  
  pipe1_read: "Read End (fd[0])" {
    class: fd_style
  }
  pipe1_write: "Write End (fd[1])" {
    class: fd_style
  }
}

pipe2: "Pipe 2" {
  class: pipe_style
  
  pipe2_read: "Read End (fd[0])" {
    class: fd_style
  }
  pipe2_write: "Write End (fd[1])" {
    class: fd_style
  }
}

external_input: "External Input" {
  shape: parallelogram
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

external_output: "External Output" {
  shape: parallelogram
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

external_input -> parent_process.parent_stdin: "input data"
parent_process.parent_stdout -> pipe1.pipe1_write: "write to pipe1"
pipe1.pipe1_read -> child_process.child_stdin: "redirect stdin"

child_process.child_stdout -> pipe2.pipe2_write: "write to pipe2"
pipe2.pipe2_read -> parent_process.parent_stdin: "read from pipe2"
parent_process.parent_stdout -> external_output: "processed output"

note: |md
  **Bidirectional Communication**
  - Parent writes to child via Pipe 1
  - Child responds via Pipe 2
  - File descriptors are redirected using dup2()
  - Each pipe has read/write endpoints
| {
  shape: page
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
  near: bottom-center
}