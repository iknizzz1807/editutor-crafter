shape: sequence_diagram

Process Manager: Process Manager
Worker 1: Worker 1
Worker 2: Worker 2
Kernel: Kernel

Process Manager: {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Worker 1: {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Worker 2: {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

Kernel: {
  style.fill: "#16213e"
  style.stroke: "#8b949e"
  style.font-color: "#e6edf3"
}

Process Manager -> Worker 1: fork/exec worker
Worker 1 -> Process Manager: running
Process Manager -> Worker 2: fork/exec worker
Worker 2 -> Process Manager: running

Worker 1 -> Worker 1: process task
Worker 1 -> Worker 1: crashes/exits

Kernel -> Process Manager: SIGCHLD signal
Process Manager -> Process Manager: signal handler invoked

Process Manager -> Kernel: waitpid(worker1_pid)
Kernel -> Process Manager: exit status

Process Manager -> Process Manager: update worker pool state
Process Manager -> Process Manager: mark worker1 as dead

Process Manager -> Worker 1: fork/exec replacement
Worker 1 -> Process Manager: new worker ready

Process Manager -> Process Manager: pool restored