title: System Component Architecture

classes: {
  component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  external: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  data_flow: {
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

# External Dependencies
target_process: Target Process {
  class: external
  shape: rectangle
}

elf_binaries: ELF Binaries {
  class: external
  shape: cylinder
}

debug_symbols: Debug Symbols {
  class: external
  shape: cylinder
}

# Main System Components
profiler_system: Profiler System {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  sampler: Sampler {
    class: component
    shape: rectangle
  }
  
  symbolizer: Symbolizer {
    class: component
    shape: rectangle
  }
  
  aggregator: Aggregator {
    class: component
    shape: rectangle
  }
  
  visualizer: Visualizer {
    class: component
    shape: rectangle
  }
  
  # Internal data flow
  sampler -> symbolizer: raw samples {
    class: data_flow
  }
  
  symbolizer -> aggregator: resolved symbols {
    class: data_flow
  }
  
  aggregator -> visualizer: processed data {
    class: data_flow
  }
}

# Output
flame_graph: Flame Graph {
  class: external
  shape: page
}

memory_report: Memory Report {
  class: external
  shape: page
}

# External connections
target_process -> profiler_system.sampler: attach/sample {
  class: data_flow
}

elf_binaries -> profiler_system.symbolizer: binary metadata {
  class: data_flow
}

debug_symbols -> profiler_system.symbolizer: symbol tables {
  class: data_flow
}

profiler_system.visualizer -> flame_graph: generate {
  class: data_flow
}

profiler_system.visualizer -> memory_report: generate {
  class: data_flow
}