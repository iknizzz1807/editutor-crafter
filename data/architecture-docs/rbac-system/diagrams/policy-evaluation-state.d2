direction: right

classes: {
  state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  error_state: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    style.bold: true
  }
  final_state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.double-border: true
  }
  start_state: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    style.font-color: "#ffffff"
  }
}

init: {
  shape: circle
  label: ""
  class: start_state
}

context_loading: Context Loading {
  shape: circle
  class: state
}

rule_matching: Rule Matching {
  shape: circle
  class: state
}

condition_evaluation: Condition Evaluation {
  shape: circle
  class: state
}

decision_combining: Decision Combining {
  shape: circle
  class: state
}

final_decision: Final Decision {
  shape: circle
  class: final_state
}

context_error: Context Load Error {
  shape: circle
  class: error_state
}

rule_error: Rule Match Error {
  shape: circle
  class: error_state
}

condition_error: Condition Error {
  shape: circle
  class: error_state
}

combining_error: Combining Error {
  shape: circle
  class: error_state
}

timeout_error: Evaluation Timeout {
  shape: circle
  class: error_state
}

init -> context_loading: Begin Evaluation

context_loading -> rule_matching: Context Ready
context_loading -> context_error: Load Failed

rule_matching -> condition_evaluation: Rules Found
rule_matching -> rule_error: Match Failed
rule_matching -> final_decision: No Rules (Default)

condition_evaluation -> decision_combining: Conditions Evaluated
condition_evaluation -> condition_error: Evaluation Failed

decision_combining -> final_decision: Decision Made
decision_combining -> combining_error: Combine Failed

context_error -> final_decision: Default Deny
rule_error -> final_decision: Default Deny
condition_error -> final_decision: Default Deny
combining_error -> final_decision: Default Deny

timeout_error -> final_decision: Timeout Deny

context_loading -> timeout_error: Timeout
rule_matching -> timeout_error: Timeout
condition_evaluation -> timeout_error: Timeout
decision_combining -> timeout_error: Timeout