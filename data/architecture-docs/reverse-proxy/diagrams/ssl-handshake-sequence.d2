shape: sequence_diagram

client: Client
proxy: SSL Termination Proxy
backend: Backend Server

client -> proxy: TLS Client Hello + SNI Extension
proxy -> proxy: Parse SNI hostname
proxy -> proxy: Select TLS context & certificate
proxy -> client: TLS Server Hello + Certificate
client -> proxy: TLS Certificate Verify
proxy -> client: TLS Finished
client -> proxy: Encrypted HTTP Request
proxy -> proxy: Decrypt TLS payload
proxy -> proxy: Extract HTTP request
proxy -> backend: Plain HTTP request
backend -> proxy: HTTP response
proxy -> proxy: Encrypt response
proxy -> client: Encrypted HTTP Response

classes: {
  ssl_process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

client.class: ssl_process
proxy.class: ssl_process
backend.class: ssl_process