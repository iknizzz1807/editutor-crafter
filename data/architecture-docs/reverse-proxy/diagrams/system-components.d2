title: System Component Architecture

classes: {
  component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  flow: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  client: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  backend: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

clients: Client Connections {
  class: client
  shape: cloud
}

proxy_system: Reverse Proxy System {
  class: component
  
  ssl_term: SSL Termination {
    class: component
    shape: rectangle
  }
  
  http_parser: HTTP Parser {
    class: component
    shape: rectangle
  }
  
  conn_mgr: Connection Manager {
    class: component
    shape: rectangle
  }
  
  load_balancer: Load Balancer {
    class: component
    shape: rectangle
  }
  
  cache_engine: Cache Engine {
    class: component
    shape: cylinder
  }
  
  ssl_term -> http_parser: decrypted requests {
    class: flow
  }
  
  http_parser -> conn_mgr: parsed HTTP {
    class: flow
  }
  
  conn_mgr -> load_balancer: route request {
    class: flow
  }
  
  load_balancer -> cache_engine: check cache {
    class: flow
  }
  
  cache_engine -> load_balancer: cache miss/hit {
    class: flow
  }
}

backend_servers: Backend Servers {
  class: backend
  shape: package
  
  server1: Server 1 {
    class: backend
    shape: rectangle
  }
  
  server2: Server 2 {
    class: backend
    shape: rectangle
  }
  
  server3: Server 3 {
    class: backend
    shape: rectangle
  }
}

clients -> proxy_system.ssl_term: HTTPS requests {
  class: flow
}

proxy_system.load_balancer -> backend_servers.server1: forward request {
  class: flow
}

proxy_system.load_balancer -> backend_servers.server2: forward request {
  class: flow
}

proxy_system.load_balancer -> backend_servers.server3: forward request {
  class: flow
}

backend_servers.server1 -> proxy_system.conn_mgr: response {
  class: flow
}

backend_servers.server2 -> proxy_system.conn_mgr: response {
  class: flow
}

backend_servers.server3 -> proxy_system.conn_mgr: response {
  class: flow
}

proxy_system.conn_mgr -> proxy_system.cache_engine: store response {
  class: flow
}

proxy_system.ssl_term <- proxy_system.http_parser: encrypted response {
  class: flow
}

clients <- proxy_system.ssl_term: HTTPS response {
  class: flow
}