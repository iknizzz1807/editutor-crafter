classes: {
  base_message: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  field_style: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  error_style: {
    style.fill: "#2d1b1b"
    style.stroke: "#e74c3c"
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

title: Message Protocol Structure {
  shape: text
  style.font-size: 20
  style.font-color: "#e6edf3"
  style.bold: true
}

Message: {
  class: base_message
  
  RequestMessage: {
    shape: class
    class: field_style
    - "message_id: string"
    - "method_name: string"
    - "arguments: List<Any>"
    - "timestamp: long"
  }
  
  ResponseMessage: {
    shape: class
    class: field_style
    - "message_id: string"
    - "result: Any"
    - "timestamp: long"
    - "success: boolean"
  }
  
  ErrorMessage: {
    shape: class
    class: error_style
    - "message_id: string"
    - "error_code: int"
    - "error_message: string"
    - "error_details: string"
    - "timestamp: long"
  }
}

Client: Client {
  shape: rectangle
  class: field_style
}

Server: Server {
  shape: rectangle
  class: field_style
}

Client -> Message.RequestMessage: creates
Message.RequestMessage -> Server: network transport

Server -> Message.ResponseMessage: success case
Server -> Message.ErrorMessage: error case

Message.ResponseMessage -> Client: success response
Message.ErrorMessage -> Client: error response

note: |md
  **Message ID Correlation**
  
  All messages use the same message_id
  to correlate requests with responses
| {
  shape: page
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  near: bottom-center
}