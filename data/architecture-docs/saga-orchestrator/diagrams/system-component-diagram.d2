classes: {
  saga_component: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  
  external_service: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  
  data_store: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
}

saga_orchestrator: Saga Orchestrator System {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  
  definition_manager: Definition Manager {
    class: saga_component
    label: "Definition Manager\n• Saga definitions\n• Step configurations\n• Compensation logic"
  }
  
  execution_engine: Execution Engine {
    class: saga_component
    label: "Execution Engine\n• Step execution\n• State transitions\n• Error handling"
  }
  
  state_store: State Store {
    shape: cylinder
    class: data_store
    label: "State Store\n• Saga instances\n• Step states\n• Recovery data"
  }
  
  admin_interface: Admin Interface {
    class: saga_component
    label: "Admin Interface\n• Monitoring\n• Manual controls\n• Analytics"
  }
}

job_scheduler: Job Scheduler {
  class: external_service
  label: "Job Scheduler\n• Timeout handling\n• Retry scheduling\n• Periodic tasks"
}

event_sourcing: Event Sourcing {
  class: external_service
  label: "Event Sourcing\n• Event persistence\n• State rebuilding\n• Audit trail"
}

microservices: Microservices {
  class: external_service
  label: "Target Services\n• Business operations\n• Compensations\n• Status updates"
}

definition_manager -> execution_engine: provides definitions
execution_engine -> state_store: reads/writes state
execution_engine -> job_scheduler: schedules timeouts
execution_engine -> event_sourcing: publishes events
execution_engine -> microservices: orchestrates calls
admin_interface -> state_store: queries state
admin_interface -> execution_engine: manual triggers
job_scheduler -> execution_engine: timeout notifications
event_sourcing -> execution_engine: event replay
microservices -> execution_engine: status callbacks