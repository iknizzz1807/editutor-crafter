classes: {
  entity: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  relationship: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

title: Data Model Relationships {
  style.font-size: 24
  style.font-color: "#e6edf3"
  style.bold: true
  near: top-center
}

document: Document {
  shape: class
  class: entity
  - "doc_id: string"
  - "title: string"
  - "content: string"
  - "metadata: Dict"
  - "created_at: datetime"
  - "updated_at: datetime"
  + "get_content(): string"
  + "get_title(): string"
}

embedding: Embedding {
  shape: class
  class: entity
  - "embedding_id: string"
  - "doc_id: string"
  - "vector: List of float"
  - "model_name: string"
  - "chunk_index: int"
  - "chunk_text: string"
  + "get_vector(): List of float"
  + "compute_similarity(other: Embedding): float"
}

index: Index {
  shape: class
  class: entity
  - "index_name: string"
  - "dimension: int"
  - "metric: string"
  - "embedding_count: int"
  - "created_at: datetime"
  + "add_embedding(embedding: Embedding): void"
  + "search(query_vector: List of float, k: int): List of Result"
  + "remove_document(doc_id: string): void"
}

query: Query {
  shape: class
  class: entity
  - "query_id: string"
  - "text: string"
  - "vector: List of float"
  - "filters: Dict"
  - "limit: int"
  - "timestamp: datetime"
  + "get_vector(): List of float"
  + "apply_filters(): Dict"
}

result: Result {
  shape: class
  class: entity
  - "doc_id: string"
  - "score: float"
  - "rank: int"
  - "snippet: string"
  - "highlights: List of string"
  - "metadata: Dict"
  + "get_snippet(): string"
  + "format_highlights(): List of string"
}

document -> embedding: generates {
  class: relationship
}

embedding -> index: stored in {
  class: relationship
}

query -> index: searches {
  class: relationship
}

index -> result: returns {
  class: relationship
}

result -> document: references {
  class: relationship
}

query -> result: produces {
  class: relationship
}