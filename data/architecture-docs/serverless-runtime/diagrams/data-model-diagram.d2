title: Core Data Relationships

FunctionDefinition: {
  shape: class
  - id: string
  - code: "byte[]"
  - runtime: string
  - memory_mb: int
  - timeout_sec: int
  - env_vars: "map[string]string"
  - created_at: timestamp
}

FunctionInstance: {
  shape: class
  - id: string
  - function_definition_id: string
  - state: "enum<PENDING|RUNNING|IDLE|TERMINATING|ERROR>"
  - ip_address: string
  - port: int
  - created_at: timestamp
  - last_used_at: timestamp
}

InvocationRequest: {
  shape: class
  - id: string
  - function_definition_id: string
  - function_instance_id: "string?"
  - status: "enum<PENDING|RUNNING|COMPLETED|FAILED|TIMEOUT>"
  - parameters: json
  - result: "json?"
  - created_at: timestamp
  - started_at: "timestamp?"
  - completed_at: "timestamp?"
}

RuntimeSnapshot: {
  shape: class
  - id: string
  - function_instance_id: string
  - timestamp: timestamp
  - memory_used_mb: int
  - cpu_usage_percent: float
  - active_requests: int
}

FunctionDefinition -> FunctionInstance: has many 1..* {
  source-arrowhead: * {
    shape: diamond
  }
}
FunctionInstance -> RuntimeSnapshot: has many 1..* {
  source-arrowhead: * {
    shape: diamond
  }
}
FunctionDefinition -> InvocationRequest: receives many 1..* {
  source-arrowhead: * {
    shape: diamond
  }
}
FunctionInstance -> InvocationRequest: processes many 0..* {
  source-arrowhead: * {
    shape: diamond
  }
}

FunctionDefinition.style: {
  fill: "#0f3460"
  stroke: "#3fb950"
  font-color: "#e6edf3"
}
FunctionInstance.style: {
  fill: "#16213e"
  stroke: "#3fb950"
  font-color: "#e6edf3"
}
InvocationRequest.style: {
  fill: "#1a1a2e"
  stroke: "#3fb950"
  font-color: "#e6edf3"
}
RuntimeSnapshot.style: {
  fill: "#0f3460"
  stroke: "#3fb950"
  font-color: "#e6edf3"
}

