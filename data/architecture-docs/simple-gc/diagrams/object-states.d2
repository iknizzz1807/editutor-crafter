title: Object State Machine

classes: {
  state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  initial: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    style.font-color: "#1a1a2e"
    style.bold: true
  }
  final: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.double-border: true
    style.bold: true
  }
  arrow: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
}

init: {
  shape: circle
  class: initial
  label: ""
}

allocated: Allocated {
  shape: circle
  class: state
}

marked: Marked {
  shape: circle
  class: state
}

swept: Swept {
  shape: circle
  class: final
}

init -> allocated: Object creation\nMemory allocation {
  class: arrow
}

allocated -> marked: Mark phase\nObject is reachable\nfrom root set {
  class: arrow
}

allocated -> swept: Sweep phase\nObject not marked\n(unreachable) {
  class: arrow
}

marked -> swept: Sweep phase\nReset mark bit\nPrepare for next cycle {
  class: arrow
}