direction: right

classes: {
  structure: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  buffer: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  primitive: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

geometric: Geometric Primitives {
  class: structure
  
  vector3: Vector3 {
    shape: class
    class: primitive
    "- x: float"
    "- y: float"
    "- z: float"
    "+ dot(other: Vector3): float"
    "+ cross(other: Vector3): Vector3"
    "+ normalize(): Vector3"
    "+ length(): float"
  }
  
  vector4: Vector4 {
    shape: class
    class: primitive
    "- x: float"
    "- y: float"
    "- z: float"
    "- w: float"
    "+ to_vector3(): Vector3"
  }
  
  triangle: Triangle {
    shape: class
    class: primitive
    "- vertices: Vector3[3]"
    "- normal: Vector3"
    "- material_id: int"
    "+ calculate_normal(): Vector3"
    "+ area(): float"
    "+ contains_point(point: Vector3): bool"
  }
  
  mesh: Mesh {
    shape: class
    class: primitive
    "- vertices: Vector3[]"
    "- triangles: Triangle[]"
    "- transform: Matrix4x4"
    "+ get_vertex_count(): int"
    "+ get_triangle_count(): int"
    "+ apply_transform(matrix: Matrix4x4): void"
  }
}

transformations: Transformations {
  class: structure
  
  matrix4x4: Matrix4x4 {
    shape: class
    class: primitive
    "- data: float[16]"
    "+ multiply(other: Matrix4x4): Matrix4x4"
    "+ multiply_vector(vec: Vector4): Vector4"
    "+ transpose(): Matrix4x4"
    "+ inverse(): Matrix4x4"
    "+ identity(): Matrix4x4"
    "+ translate(x: float, y: float, z: float): Matrix4x4"
    "+ rotate_x(angle: float): Matrix4x4"
    "+ scale(x: float, y: float, z: float): Matrix4x4"
  }
  
  camera: Camera {
    shape: class
    class: primitive
    "- position: Vector3"
    "- target: Vector3"
    "- up: Vector3"
    "- fov: float"
    "- aspect_ratio: float"
    "- near_plane: float"
    "- far_plane: float"
    "+ get_view_matrix(): Matrix4x4"
    "+ get_projection_matrix(): Matrix4x4"
  }
}

rendering: Rendering Buffers {
  class: structure
  
  framebuffer: FrameBuffer {
    shape: class
    class: buffer
    "- width: int"
    "- height: int"
    "- color_buffer: Color[]"
    "- depth_buffer: float[]"
    "+ set_pixel(x: int, y: int, color: Color): void"
    "+ get_pixel(x: int, y: int): Color"
    "+ clear(color: Color): void"
    "+ depth_test(x: int, y: int, depth: float): bool"
  }
  
  color: Color {
    shape: class
    class: buffer
    "- r: float"
    "- g: float"
    "- b: float"
    "- a: float"
    "+ to_rgba(): int"
    "+ blend(other: Color, alpha: float): Color"
  }
}

# Dependencies
geometric.vector3 -> geometric.vector4: extends to
geometric.triangle -> geometric.vector3: contains 3
geometric.mesh -> geometric.vector3: contains array
geometric.mesh -> geometric.triangle: contains array
geometric.mesh -> transformations.matrix4x4: has transform

transformations.matrix4x4 -> geometric.vector4: transforms

transformations.camera -> geometric.vector3: uses for position/target/up
transformations.camera -> transformations.matrix4x4: generates

rendering.framebuffer -> rendering.color: stores array
geometric.triangle -> geometric.vector3: calculates normal from

# Key relationships
geometric.vector3 -> geometric.triangle: "3 vertices" {
  style.stroke: "#3fb950"
  style.bold: true
}

transformations.matrix4x4 -> geometric.vector3: "transforms" {
  style.stroke: "#3fb950"
}

geometric.mesh -> rendering.framebuffer: "renders to" {
  style.stroke: "#3fb950"
  style.stroke-dash: 3
}

title: {
  label: "Core Data Structures - Software 3D Renderer"
  near: top-center
  style.font-size: 20
  style.bold: true
  style.font-color: "#e6edf3"
}