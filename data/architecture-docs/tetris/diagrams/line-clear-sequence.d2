shape: sequence_diagram

game_loop: Game Loop {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

line_clearing: Line Clearing Component {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

board: Game Board {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

scoring: Scoring Component {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

progression: Level Progression {
  style.fill: "#1a1a2e"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
}

game_loop -> line_clearing: Piece locked, check lines
line_clearing -> board: Scan rows for completion
board -> line_clearing: Return completed line indices
line_clearing -> line_clearing: Mark lines for removal
line_clearing -> board: Remove completed lines
board -> line_clearing: Lines removed
line_clearing -> board: Drop blocks above gaps
board -> line_clearing: Cascade complete
line_clearing -> scoring: Report cleared lines count
scoring -> line_clearing: Score calculated
line_clearing -> progression: Check level requirements
progression -> line_clearing: Level updated, new speed
line_clearing -> game_loop: Line clearing complete