title: TSM File Internal Layout

tsm_file: {
  style.fill: "#0f3460"
  style.stroke: "#3fb950"
  style.font-color: "#e6edf3"
  style.stroke-width: 2

  header: {
    label: "Header"
    style.bold: true
    style.fill: "#1a1a2e"
    shape: rectangle
  }

  series_blocks: {
    label: "Series Blocks"
    style.fill: "#16213e"
    
    series_block_1: {
      label: "Series Block 1"
      
      series_key_1: {
        label: "Series Key"
        shape: rectangle
        style.fill: "#1a1a2e"
      }
      
      data_block_1: {
        label: "Data Block 1"
        shape: rectangle
        style.fill: "#1a1a2e"
        
        block_metadata: {
          label: "Block Metadata"
          shape: rectangle
          style.fill: "#0f3460"
        }
        
        block_data: {
          label: "Block Data"
          style.fill: "#0f3460"
          
          timestamps_col: {
            label: "Compressed Timestamps Column"
            shape: rectangle
            style.fill: "#1a1a2e"
          }
          
          values_col: {
            label: "Compressed Values Column"
            shape: rectangle
            style.fill: "#1a1a2e"
          }
        }
      }
      
      data_block_2: {
        label: "Data Block 2"
        shape: rectangle
        style.fill: "#1a1a2e"
      }
      
      series_key_1 -> data_block_1
      data_block_1 -> data_block_2
    }
    
    series_block_2: {
      label: "Series Block 2..."
      shape: rectangle
      style.fill: "#1a1a2e"
      style.stroke-dash: 3
    }
  }

  index: {
    label: "Index"
    shape: rectangle
    style.fill: "#1a1a2e"
    style.bold: true
  }

  footer: {
    label: "Footer"
    shape: rectangle
    style.fill: "#1a1a2e"
    style.bold: true
  }
}

tsm_file.header -> tsm_file.series_blocks.series_block_1: "starts with"
tsm_file.series_blocks.series_block_1 -> tsm_file.series_blocks.series_block_2: "followed by"
tsm_file.series_blocks.series_block_2 -> tsm_file.index: "then"
tsm_file.index -> tsm_file.footer: "ends with"

tsm_file.series_blocks.series_block_1.data_block_1.block_metadata -> tsm_file.series_blocks.series_block_1.data_block_1.block_data.timestamps_col
tsm_file.series_blocks.series_block_1.data_block_1.block_metadata -> tsm_file.series_blocks.series_block_1.data_block_1.block_data.values_col