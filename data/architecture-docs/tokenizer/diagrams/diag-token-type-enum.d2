direction: right
vars: {
  d2-config: {
    layout-engine: elk
    theme-id: 4
  }
}

# --- STYLES & CLASSES ---
classes: {
  milestone_1: {
    style: {
      stroke: "#9e9e9e"
      stroke-width: 2
    }
  }
  milestone_2: {
    style: {
      stroke: "#2196f3"
      stroke-width: 3
    }
  }
  milestone_3: {
    style: {
      stroke: "#9c27b0"
      stroke-width: 3
    }
  }
}

# --- DIAGRAM CONTENT ---

title: "enum TokenType (scanner.py)" {
  shape: text
  near: top-center
  style: {
    font-size: 24
    bold: true
  }
}

legend: {
  near: bottom-right
  m1: "Milestone 1: Foundation" {
    style.stroke: "#9e9e9e"
  }
  m2: "Milestone 2: Multi-Char & Literals" {
    style.stroke: "#2196f3"
  }
  m3: "Milestone 3: Strings & Comments" {
    style.stroke: "#9c27b0"
  }
}

literals: {
  label: "LITERALS"
  direction: down
  
  num_table: {
    shape: sql_table
    label: "Numbers & Strings"
    class: milestone_2
    
    row1: "NUMBER | auto() | 42, 3.14 (M2)"
    row2: "STRING | auto() | \"quoted text\" (M3)" {
      class: milestone_3
    }
    style.fill: "#e3f2fd"
  }
}

identifiers: {
  label: "IDENTIFIERS"
  direction: down
  
  id_table: {
    shape: sql_table
    label: "Names & Keywords"
    class: milestone_2
    
    row1: "IDENTIFIER | auto() | var_name, _id"
    row2: "KEYWORD    | auto() | if, else, return..."
    style.fill: "#e8f5e9"
  }
}

operators: {
  label: "OPERATORS"
  direction: down
  
  arithmetic: {
    shape: sql_table
    label: "Arithmetic (M1/M3)"
    class: milestone_1
    
    row1: "OPERATOR | auto() | +, -, *, /"
    style.fill: "#f3e5f5"
  }
  
  logical_compare: {
    shape: sql_table
    label: "Comparison & Assign (M2)"
    class: milestone_2
    
    row1: "ASSIGN        | auto() | ="
    row2: "EQUALS        | auto() | =="
    row3: "NOT_EQUAL     | auto() | !="
    row4: "LESS_THAN     | auto() | <"
    row5: "LESS_EQUAL    | auto() | <="
    row6: "GREATER_THAN  | auto() | >"
    row7: "GREATER_EQUAL | auto() | >="
    style.fill: "#f3e5f5"
  }
}

punctuation: {
  label: "PUNCTUATION"
  direction: down
  
  punct_table: {
    shape: sql_table
    label: "Structural (M1)"
    class: milestone_1
    
    row1: "PUNCTUATION | auto() | (, ), {, }, [, ], ;, ,"
    style.fill: "#fafafa"
  }
}

special: {
  label: "SENTINELS"
  direction: down
  
  special_table: {
    shape: sql_table
    label: "Control & Error (M1)"
    class: milestone_1
    
    row1: "EOF   | auto() | End of Stream"
    row2: "ERROR | auto() | Lexical Error" {
      style.font-color: red
    }
    style.fill: "#fff3e0"
  }
}

# Layout Connections (Vertical alignment within Layers)
literals -> identifiers: {style.stroke-width: 0}
identifiers -> operators: {style.stroke-width: 0}
operators -> punctuation: {style.stroke-width: 0}
punctuation -> special: {style.stroke-width: 0}