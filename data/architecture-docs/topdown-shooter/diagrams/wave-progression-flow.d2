classes: {
  process: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  system: {
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  arrow: {
    style.stroke: "#8b949e"
  }
}

title: Wave Management Flow {
  style.font-color: "#e6edf3"
  style.bold: true
  near: top-center
}

wave_start: Start New Wave {
  shape: rectangle
  class: process
}

spawn_enemies: Spawn Enemies {
  shape: rectangle
  class: process
}

monitor_wave: Monitor Wave Status {
  shape: rectangle
  class: system
}

all_enemies_defeated: All Enemies\nDefeated? {
  shape: diamond
  class: decision
}

trigger_completion: Trigger Wave\nCompletion {
  shape: rectangle
  class: process
}

calculate_scaling: Calculate Difficulty\nScaling {
  shape: rectangle
  class: process
}

apply_scaling: Apply Scaling:\n• More enemies\n• Higher health\n• Faster movement {
  shape: rectangle
  class: process
}

next_wave: Increment Wave\nCounter {
  shape: rectangle
  class: process
}

wave_start -> spawn_enemies: {class: arrow}
spawn_enemies -> monitor_wave: {class: arrow}
monitor_wave -> all_enemies_defeated: Check status {class: arrow}
all_enemies_defeated -> monitor_wave: No {class: arrow}
all_enemies_defeated -> trigger_completion: Yes {class: arrow}
trigger_completion -> calculate_scaling: {class: arrow}
calculate_scaling -> apply_scaling: {class: arrow}
apply_scaling -> next_wave: {class: arrow}
next_wave -> wave_start: Start next wave {class: arrow}