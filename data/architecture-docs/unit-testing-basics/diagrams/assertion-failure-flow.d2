classes: {
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  success: {
    style.fill: "#0f3460"
    style.stroke: "#28a745"
    style.font-color: "#e6edf3"
  }
  failure: {
    style.fill: "#0f3460"
    style.stroke: "#dc3545"
    style.font-color: "#e6edf3"
  }
}

title: Assertion Failure and Error Reporting Flow {
  near: top-center
  style.font-size: 18
  style.font-color: "#e6edf3"
  style.bold: true
}

start: Start {
  shape: circle
  class: success
}

evaluate: Evaluate Assertion {
  class: process
}

check: Assertion Passes? {
  shape: diamond
  class: decision
}

collect_context: Collect Failure Context {
  class: process
}

detect_failure: Detect Failure Type {
  shape: diamond
  class: decision
}

format_comparison: Format Value Comparison {
  class: failure
}

format_exception: Format Exception Details {
  class: failure
}

format_timeout: Format Timeout Message {
  class: failure
}

generate_message: Generate Error Message {
  class: failure
}

capture_stack: Capture Stack Trace {
  class: process
}

create_report: Create Test Report {
  class: process
}

log_result: Log Test Result {
  class: process
}

test_continues: Test Suite Continues {
  class: success
}

start -> evaluate
evaluate -> check
check -> test_continues: Pass
check -> collect_context: Fail
collect_context -> detect_failure
detect_failure -> format_comparison: Value Mismatch
detect_failure -> format_exception: Exception Thrown
detect_failure -> format_timeout: Timeout
format_comparison -> generate_message
format_exception -> generate_message
format_timeout -> generate_message
generate_message -> capture_stack
capture_stack -> create_report
create_report -> log_result
log_result -> test_continues