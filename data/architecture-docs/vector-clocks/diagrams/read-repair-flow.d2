classes: {
  start_end: {
    style.fill: "#3fb950"
    style.font-color: "#1a1a2e"
    style.bold: true
  }
  process: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
  }
  decision: {
    style.fill: "#16213e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  conflict: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    style.bold: true
  }
  repair: {
    style.fill: "#0984e3"
    style.stroke: "#74b9ff"
    style.font-color: "#ffffff"
  }
}

start: Read Request {
  shape: circle
  class: start_end
}

read_data: Read Data\nfrom Replicas {
  class: process
}

check_consistency: Check Vector Clocks\nConsistency {
  shape: diamond
  class: decision
}

return_data: Return Data\nto Client {
  class: process
}

detect_conflicts: Detect Version\nConflicts {
  class: conflict
}

analyze_clocks: Analyze Vector\nClocks Causality {
  class: process
}

concurrent_check: Concurrent\nWrites? {
  shape: diamond
  class: decision
}

resolve_strategy: Apply Resolution\nStrategy {
  class: repair
}

last_writer_wins: Last Writer\nWins {
  class: repair
}

merge_values: Merge\nValues {
  class: repair
}

client_resolution: Client-Side\nResolution {
  class: repair
}

write_back: Write Resolved\nValue Back {
  class: process
}

update_clocks: Update Vector\nClocks {
  class: process
}

propagate: Propagate to\nAll Replicas {
  class: process
}

end: Complete {
  shape: circle
  class: start_end
}

start -> read_data
read_data -> check_consistency
check_consistency -> return_data: Consistent
check_consistency -> detect_conflicts: Inconsistent
detect_conflicts -> analyze_clocks
analyze_clocks -> concurrent_check
concurrent_check -> resolve_strategy: Yes
concurrent_check -> return_data: No (Causal Order)
resolve_strategy -> last_writer_wins: Timestamp
resolve_strategy -> merge_values: Semantic
resolve_strategy -> client_resolution: Application
last_writer_wins -> write_back
merge_values -> write_back
client_resolution -> write_back
write_back -> update_clocks
update_clocks -> propagate
propagate -> end
return_data -> end