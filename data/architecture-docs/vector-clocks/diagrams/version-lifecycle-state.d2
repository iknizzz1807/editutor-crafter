direction: right

classes: {
  state: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  initial: {
    style.fill: "#3fb950"
    style.stroke: "#3fb950"
    style.font-color: "#1a1a2e"
  }
  final: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.double-border: true
  }
  transition: {
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  conflict: {
    style.fill: "#d63031"
    style.stroke: "#e17055"
    style.font-color: "#ffffff"
    style.bold: true
  }
}

init: {
  shape: circle
  label: ""
  class: initial
}

created: Created {
  shape: circle
  class: state
}

stored: Stored {
  shape: circle
  class: state
}

conflict_detected: Conflict Detected {
  shape: circle
  class: conflict
}

concurrent_versions: Concurrent Versions {
  shape: circle
  class: state
}

resolved: Resolved {
  shape: circle
  class: state
}

dominated: Dominated {
  shape: circle
  class: state
}

pruned: Pruned {
  shape: circle
  class: final
}

init -> created: Version Created {
  class: transition
}

created -> stored: Store Version {
  class: transition
}

stored -> conflict_detected: Concurrent Write {
  class: transition
}

stored -> dominated: Causally Superseded {
  class: transition
}

conflict_detected -> concurrent_versions: Store Concurrent {
  class: transition
}

concurrent_versions -> resolved: Apply Resolution Strategy {
  class: transition
}

concurrent_versions -> pruned: Prune Old Versions {
  class: transition
}

resolved -> stored: New Canonical Version {
  class: transition
}

dominated -> pruned: Safe to Remove {
  class: transition
}

stored -> pruned: Garbage Collection {
  class: transition
}

title: Version Lifecycle State Machine {
  near: top-center
  style.font-size: 18
  style.font-color: "#e6edf3"
  style.bold: true
}