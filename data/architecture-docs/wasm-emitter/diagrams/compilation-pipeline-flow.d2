title: Compilation Pipeline Data Flow

classes: {
  pipeline_stage: {
    style.fill: "#1a1a2e"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
  data_format: {
    style.fill: "#16213e"
    style.stroke: "#8b949e"
    style.font-color: "#e6edf3"
  }
  process: {
    shape: diamond
    style.fill: "#0f3460"
    style.stroke: "#3fb950"
    style.font-color: "#e6edf3"
    style.bold: true
  }
}

input_ast: Raw AST Nodes {
  class: data_format
  shape: page
}

type_analysis: Type Analysis {
  class: process
}

typed_ast: Typed AST {
  class: data_format
  shape: page
}

expression_compiler: Expression Compilation {
  class: pipeline_stage
}

stack_instructions: Stack Instructions {
  class: data_format
  shape: page
}

control_flow_handler: Control Flow Handling {
  class: pipeline_stage
}

structured_blocks: Structured Control Blocks {
  class: data_format
  shape: page
}

function_generator: Function Body Generation {
  class: pipeline_stage
}

function_bodies: Complete Function Bodies {
  class: data_format
  shape: page
}

binary_emitter: Binary Emission {
  class: pipeline_stage
}

wasm_binary: WebAssembly Binary {
  class: data_format
  shape: cylinder
  style.fill: "#3fb950"
  style.font-color: "#000000"
}

input_ast -> type_analysis: Parse & Validate
type_analysis -> typed_ast: Type Annotations
typed_ast -> expression_compiler: Transform Trees
expression_compiler -> stack_instructions: Stack Operations
stack_instructions -> control_flow_handler: Structure Control
control_flow_handler -> structured_blocks: Nested Blocks
structured_blocks -> function_generator: Assemble Functions
function_generator -> function_bodies: Complete Code
function_bodies -> binary_emitter: Encode Binary
binary_emitter -> wasm_binary: Final Output