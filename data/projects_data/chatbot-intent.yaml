id: chatbot-intent
name: "Intent-Based Chatbot"
description: "Build a chatbot with intent classification, entity extraction, dialog state management, and template-based response generation—foundational conversational AI without LLMs."
difficulty: beginner
estimated_hours: "18-30"
essence: >
  Text classification using TF-IDF vectorization and supervised learning to map
  natural language inputs to predefined intent categories, combined with
  rule-based and pre-trained model entity extraction, dialog state tracking
  via finite state machines, and template-based response generation with
  entity slot-filling.
why_important: >
  Building this teaches foundational NLP techniques that underpin all conversational
  AI systems—intent classification, entity extraction, and dialog management—
  while providing hands-on experience with text classification and state machine
  design that transfers to production chatbot development.
learning_outcomes:
  - Implement intent classification using TF-IDF vectorization and supervised learning
  - Build entity extraction using regex patterns and pre-trained NLP models (spaCy)
  - Design finite state machines for multi-turn dialog management
  - Create template-based response generation with entity slot-filling
  - Build and evaluate text classifiers with proper train/test methodology
  - Handle ambiguous inputs with confidence thresholds and fallback strategies
  - Integrate all components into a working end-to-end chatbot pipeline
skills:
  - Text Classification (TF-IDF + ML)
  - Named Entity Recognition (rule-based + spaCy)
  - State Machine Design
  - Dialog State Tracking
  - Pattern Matching (regex)
  - Template-based NLG
tags:
  - beginner-friendly
  - classification
  - conversational
  - entities
  - intents
  - nlp
  - python
architecture_doc: architecture-docs/chatbot-intent/index.md
languages:
  recommended:
    - Python
  also_possible:
    - JavaScript
resources:
  - name: Rasa Open Source""
    url: https://rasa.com/docs/rasa/
    type: documentation
  - name: spaCy NER Documentation""
    url: https://spacy.io/usage/linguistic-features#named-entities
    type: documentation
  - name: scikit-learn Text Classification""
    url: https://scikit-learn.org/stable/tutorial/text_analytics/working_with_text_data.html
    type: tutorial
prerequisites:
  - type: skill
    name: "Python basics"
  - type: skill
    name: "Text processing (string manipulation, regex basics)"
  - type: skill
    name: "Basic ML concepts (classification, train/test split)"
milestones:
  - id: chatbot-intent-m1
    name: "Intent Classification"
    description: >
      Build an intent classifier that vectorizes user text with TF-IDF and
      classifies it into predefined intent categories using a supervised ML model.
    acceptance_criteria:
      - "Training data contains at least 5 intent categories with a minimum of 20 examples per intent"
      - "Data is split into training (80%) and test (20%) sets with stratified sampling to preserve class distribution"
      - "Classifier pipeline: text preprocessing (lowercase, tokenize, remove punctuation) → TF-IDF vectorization → supervised classifier (Naive Bayes or SVM)"
      - "Classifier predicts the most likely intent with a confidence score (probability) for each category"
      - "Predictions with confidence below a configurable threshold (default 0.4) are classified as 'unknown/fallback' intent"
      - "Classifier achieves at least 80% F1-score (macro-averaged) on the held-out test set"
      - "Classification report showing per-intent precision, recall, and F1-score is generated"
    pitfalls:
      - "Too few training examples per intent causes overfitting—augment with paraphrases if needed"
      - "Imbalanced classes skew predictions toward the majority class—use stratified split and check per-class metrics"
      - "Not handling out-of-domain inputs causes the classifier to confidently assign a wrong intent—confidence threshold is critical"
      - "TF-IDF vocabulary built on test data causes data leakage—fit vectorizer on training data only"
    concepts:
      - Text classification pipeline
      - TF-IDF vectorization
      - Confidence thresholding
      - Stratified train/test split
    skills:
      - Text preprocessing and tokenization
      - scikit-learn pipeline construction
      - Classification metric evaluation
      - Confidence score interpretation
    deliverables:
      - "Labeled training dataset organized by intent category"
      - "TF-IDF + classifier pipeline (Naive Bayes or SVM) trained on training data"
      - "Confidence threshold filter rejecting low-confidence predictions as unknown"
      - "Classification report with per-intent precision, recall, and F1-score"
    estimated_hours: "4-7"

  - id: chatbot-intent-m2
    name: "Entity Extraction"
    description: >
      Extract structured entities (names, dates, locations, custom types) from user
      input using regex patterns and pre-trained spaCy NER models.
    acceptance_criteria:
      - "Pre-trained spaCy NER model extracts standard entity types: PERSON, DATE, GPE (location), ORG from user text"
      - "Custom regex patterns extract domain-specific entities (e.g., email addresses, phone numbers, times, order IDs)"
      - "Extracted entities are normalized to canonical formats (e.g., 'next Tuesday' → ISO date string, '5pm' → '17: 00')"
      - "Slot-filling maps extracted entities to intent-specific parameter slots (e.g., 'book_flight' intent requires 'origin', 'destination', 'date' slots)"
      - "Missing required slots are identified and listed so the dialog manager can prompt for them"
      - "Multiple entities of the same type in a single message are correctly extracted and assigned to appropriate slots"
    pitfalls:
      - "spaCy model must be downloaded before use (python -m spacy download en_core_web_sm)—fail gracefully if missing"
      - "Date parsing ambiguity (01/02 = January 2 or February 1?)—document locale assumption and use dateutil parser"
      - "Greedy regex patterns match too broadly—use specific patterns with word boundaries"
      - "Overlapping entity spans from regex and spaCy need a priority/resolution strategy"
    concepts:
      - Named Entity Recognition (NER) with pre-trained models
      - Rule-based entity extraction (regex)
      - Entity normalization
      - Slot-filling for task-oriented dialog
    skills:
      - spaCy NER model usage
      - Regular expression design
      - Date/time parsing and normalization
      - Entity-to-slot mapping logic
    deliverables:
      - "spaCy NER integration extracting PERSON, DATE, GPE, ORG entities"
      - "Custom regex extractors for domain-specific entity types"
      - "Entity normalizer converting extracted text to canonical data formats"
      - "Slot-filler mapping entities to intent-specific parameter requirements"
    estimated_hours: "5-8"

  - id: chatbot-intent-m3
    name: "Dialog Management & Policy"
    description: >
      Implement a finite state machine for multi-turn dialog management with
      dialog policy that decides the next action based on current state and
      filled/missing slots.
    acceptance_criteria:
      - "Dialog state persists across turns: tracks current intent, filled slots, and conversation phase"
      - "Dialog policy decides the next action based on state: prompt for missing slot, confirm values, execute action, or ask for clarification"
      - "Follow-up messages update existing context without requiring the user to restate the intent"
      - "Missing required slots trigger specific prompt questions (e.g., 'What date would you like to travel?')"
      - "'Cancel' or 'start over' commands clear the current dialog state and return to initial state"
      - "Intent changes mid-conversation (e.g., user switches from booking to checking status) are handled by saving or discarding prior context"
      - "Session timeout: context is cleared after 5 minutes of inactivity (configurable)"
    pitfalls:
      - "Infinite dialog loops when slot-filling repeatedly fails validation—cap retry attempts per slot"
      - "Losing context on intent change: user says 'actually, check my booking instead'—must handle gracefully"
      - "Session state stored only in memory leaks if sessions are never cleaned up—implement TTL-based eviction"
      - "State machine transitions not exhaustively defined cause unhandled states and crashes"
    concepts:
      - Finite state machines for dialog
      - Dialog policy (next-action selection)
      - Session management
      - Context switching
    skills:
      - State machine design and implementation
      - Session lifecycle management
      - Context tracking across turns
      - Edge case handling in conversational flow
    deliverables:
      - "Finite state machine with defined states and transitions for each supported intent flow"
      - "Dialog policy engine selecting next action (prompt, confirm, execute, clarify) based on state"
      - "Session manager with TTL-based context expiration"
      - "Context switch handler for mid-conversation intent changes"
    estimated_hours: "5-8"

  - id: chatbot-intent-m4
    name: "Response Generation & Integration"
    description: >
      Build template-based response generation with variable substitution and
      integrate all components into a working end-to-end chatbot.
    acceptance_criteria:
      - "Response templates contain placeholders (e.g., {destination}, {date}) that are replaced with extracted entity values"
      - "Each intent-state combination has at least 3 response variations to avoid repetitive output"
      - "Fallback responses handle unknown intents with helpful suggestions (e.g., 'I can help with booking flights or checking weather. What would you like?')"
      - "User input is sanitized before insertion into templates to prevent format string injection"
      - "End-to-end pipeline: user text → intent classification → entity extraction → dialog state update → policy decision → response generation"
      - "Integration test: a multi-turn conversation (3+ turns) completing a task from start to finish runs without errors"
      - "Conversation log records all turns with user input, detected intent, extracted entities, and generated response for debugging"
    pitfalls:
      - "Missing template variables cause KeyError—validate all required slots are filled before rendering template"
      - "Too few response variations make the chatbot feel robotic—add at least 3 per intent-state"
      - "Template rendering with f-strings or .format() on user input is a code injection risk—use safe substitution"
      - "Integration bugs: components work in isolation but fail together due to data format mismatches between modules"
    concepts:
      - Template-based natural language generation
      - Response variation for naturalness
      - End-to-end pipeline integration
      - Input sanitization
    skills:
      - Template engine design
      - String interpolation and formatting
      - Pipeline integration and testing
      - Conversation logging for debugging
    deliverables:
      - "Template-based response generator with entity slot substitution"
      - "Response variation selector randomly choosing from alternative phrasings"
      - "Fallback response handler for unknown and low-confidence intents"
      - "End-to-end chatbot pipeline integrating all components"
      - "Conversation logger recording full dialog history for debugging"
      - "Integration test demonstrating a complete multi-turn task completion"
    estimated_hours: "5-8"