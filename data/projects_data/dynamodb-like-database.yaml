id: dynamodb-like-database
name: DynamoDB-like Database
description: >
  Build a fully managed NoSQL database like Amazon DynamoDB with auto-scaling,
  predictable single-digit millisecond latency, and flexible schema. Implement
  partition key design, global secondary indexes, and DynamoDB Streams.

difficulty: expert
estimated_hours: 80-100
domain: world-scale

essence: >
  Managed NoSQL with automatic partitioning based on key distribution, configurable
  consistency (eventual vs strong), on-demand or provisioned capacity, global secondary
  indexes for alternate access patterns, and change data capture streams.

why_important: >
  DynamoDB powers Amazon.com, Netflix, and many high-scale applications. Understanding
  partition key design, auto-scaling, and managed database architecture is valuable
  for cloud engineers at $200K-400K+.

learning_outcomes:
  - Implement partitioned key-value storage with automatic sharding
  - Build global secondary indexes for alternate query patterns
  - Implement configurable read consistency (eventual vs strong)
  - Build auto-scaling for read/write capacity
  - Implement DynamoDB Streams for change data capture
  - Handle hot partition detection and mitigation
  - Build conditional writes and atomic counters
  - Implement query and scan operations

skills:
  - Auto-Scaling Storage
  - Partition Key Design
  - Global Secondary Indexes
  - Consistency Models
  - Change Data Capture
  - Hot Partition Handling
  - Conditional Writes
  - Managed Service Design

tags:
  - expert
  - nosql
  - dynamodb
  - auto-scaling
  - managed-database
  - cloud

languages:
  recommended:
    - Go
    - Rust
  also_possible:
    - Java
    - Python

resources:
  - name: "Dynamo: Amazon's Highly Available Key-value Store"
    url: https://www.allthingsdistributed.com/files/amazon-dynamo-sosp2007.pdf
    type: paper
  - name: "Amazon DynamoDB FAQ"
    url: https://aws.amazon.com/dynamodb/faqs/
    type: documentation
  - name: "DynamoDB Adrenaline"
    url: https://www.youtube.com/watch?v=yvBKvkXHfHE
    type: video
  - name: "DynamoDB Best Practices"
    url: https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/best-practices.html
    type: documentation

prerequisites:
  - type: project
    name: build-redis or equivalent key-value storage
  - type: skill
    name: Distributed systems fundamentals
  - type: skill
    name: Understanding of consistent hashing
  - type: skill
    name: API design experience

milestones:
  - id: dynamodb-m1
    name: Partitioned Storage Engine
    description: >
      Implement the core partitioned key-value storage with hash-based
      partition distribution.
    acceptance_criteria:
      - Primary key: partition key (hash) or composite (hash + range)
      - Items stored in partitions based on partition key hash
      - Range key enables sorted queries within partition
      - PutItem, GetItem, DeleteItem operations
      - BatchWriteItem and BatchGetItem for efficiency
      - Partitions automatically split when size exceeds threshold
    pitfalls:
      - Hot partition from poor key design
      - Uneven data distribution across partitions
      - Partition split during high traffic causes issues
      - Range key queries limited to single partition
    concepts:
      - Partition key design
      - Hash distribution
      - Range key sorting
      - Automatic splitting
    skills:
      - Partitioned storage
      - Key design
      - Range queries
      - Auto-splitting
    deliverables:
      - Partitioned storage engine
      - Hash + range key support
      - Batch operations
      - Auto-split detection
    estimated_hours: "16-20"

  - id: dynamodb-m2
    name: Global Secondary Indexes
    description: >
      Implement global secondary indexes for alternate query patterns
      using different key attributes.
    acceptance_criteria:
      - GSI created with alternate partition key and optional range key
      - GSI maintained asynchronously (eventual consistency)
      - Query on GSI returns matching items
      - GSI can project subset of attributes (KEYS_ONLY, INCLUDE, ALL)
      - GSI has separate read/write capacity
      - Index backfill handled correctly
    pitfalls:
      - GSI consistency lag for writes
      - GSI capacity mismatch causes throttling
      - Index size increases storage cost
      - Not all queries benefit from GSI
    concepts:
      - Secondary indexes
      - Projection types
      - Index maintenance
      - Query optimization
    skills:
      - Index design
      - Async propagation
      - Projection handling
      - Query planning
    deliverables:
      - GSI creation
      - Index propagation
      - GSI queries
      - Projection support
    estimated_hours: "14-18"

  - id: dynamodb-m3
    name: Consistency & Conditional Writes
    description: >
      Implement configurable read consistency and conditional write
      operations for optimistic concurrency control.
    acceptance_criteria:
      - Eventually consistent reads (default) return latest or stale data
      - Strongly consistent reads return latest written data
      - Conditional writes fail if condition not met
      - Conditions: attribute exists/not exists, equals, comparison operators
      - ReturnValuesOnConditionCheckFailure for debugging
      - Atomic counters with UpdateItem ADD operation
    pitfalls:
      - Strong consistency has higher latency and cost
      - Condition failures need retry logic
      - Race conditions with concurrent conditional writes
      - Not handling condition check failures gracefully
    concepts:
      - Consistency models
      - Conditional writes
      - Optimistic concurrency
      - Atomic operations
    skills:
      - Consistency implementation
      - Condition evaluation
      - Atomic updates
      - Error handling
    deliverables:
      - Consistent reads
      - Conditional writes
      - Atomic counters
      - Error responses
    estimated_hours: "12-16"

  - id: dynamodb-m4
    name: Auto-Scaling Capacity
    description: >
      Implement automatic scaling of read and write capacity based
      on actual usage patterns.
    acceptance_criteria:
      - Provisioned capacity mode: min/max throughput configured
      - On-demand capacity mode: instant scaling, pay per request
      - Auto-scaling increases/decreases capacity within limits
      - Scaling decisions based on consumed vs provisioned ratio
      - Cooldown period prevents thrashing
      - Metrics track throttling events and capacity utilization
    pitfalls:
      - Scaling lag causes temporary throttling
      - Auto-scaling not fast enough for traffic spikes
      - Cost overruns with on-demand mode
      - Not monitoring throttling events
    concepts:
      - Auto-scaling
      - Provisioned vs on-demand
      - Throttling
      - Capacity planning
    skills:
      - Auto-scaling implementation
      - Metrics monitoring
      - Throttling handling
      - Cost optimization
    deliverables:
      - Auto-scaling engine
      - On-demand mode
      - Throttling detection
      - Capacity metrics
    estimated_hours: "14-18"

  - id: dynamodb-m5
    name: DynamoDB Streams
    description: >
      Implement change data capture streams that capture item-level
      modifications for downstream processing.
    acceptance_criteria:
      - Stream captures INSERT, MODIFY, REMOVE events
      - Stream records ordered by sequence number within shard
      - Shard iterator enables reading from specific point
      - Streams enabled/disabled per table
      - TTL for stream records (24 hours default)
      - Stream consumers process records at their own pace
    pitfalls:
      - Stream lag for real-time use cases
      - Duplicate records require idempotent processing
      - Shard splits/merges complicate ordering
      - Not handling stream consumer failures
    concepts:
      - Change data capture
      - Stream ordering
      - Shard management
      - Consumer patterns
    skills:
      - Stream implementation
      - Event capture
      - Shard handling
      - Consumer design
    deliverables:
      - Change capture stream
      - Shard management
      - Iterator API
      - Consumer support
    estimated_hours: "12-16"

  - id: dynamodb-m6
    name: Query & Scan Operations
    description: >
      Implement query (key-based) and scan (full table) operations
      with filtering and pagination.
    acceptance_criteria:
      - Query on partition key + optional range key condition
      - Scan reads entire table (all partitions)
      - Filter expressions reduce returned data (post-read)
      - Projection expression selects specific attributes
      - Pagination with LastEvaluatedKey for large results
      - Parallel scan divides table into segments
      - Query/Scan consume read capacity units
    pitfalls:
      - Filter expressions don't reduce read capacity consumption
      - Scan is expensive for large tables
      - Not using pagination causes memory issues
      - Parallel scan requires careful segment management
    concepts:
      - Query vs scan
      - Filter expressions
      - Pagination
      - Parallel operations
    skills:
      - Query implementation
      - Scan optimization
      - Expression parsing
      - Pagination
    deliverables:
      - Query operation
      - Scan operation
      - Filter expressions
      - Parallel scan
    estimated_hours: "10-14"
