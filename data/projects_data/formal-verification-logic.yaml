id: formal-verification-logic
name: Formal Verification Logic
description: >
  Use SMT solvers (Z3, CVC5) to formally prove correctness of algorithms,
  data structures, or simple systems like consensus protocols.

difficulty: expert
estimated_hours: 60-80
domain: specialized

essence: >
  Translating programs to logical formulas, expressing correctness
  properties as assertions, using SMT solvers to prove or disprove
  properties, and understanding decidability and complexity limits.

why_important: >
  Formal verification is critical for safety-critical systems (aviation,
  medical, automotive) and security-critical code. Verification engineers
  earn $180K-350K+ at companies like AWS, Microsoft Research, and
  chip manufacturers.

learning_outcomes:
  - Understand SMT solver capabilities and limits
  - Encode programs as logical formulas
  - Express correctness properties formally
  - Use Z3 or CVC5 programmatically
  - Prove correctness of algorithms
  - Verify concurrent protocols
  - Generate counterexamples from failures
  - Understand decidability and complexity

skills:
  - SMT Solving
  - Program Encoding
  - Property Specification
  - Proof Construction
  - Counterexample Analysis
  - Protocol Verification
  - Z3/CVC5 API
  - Formal Methods

tags:
  - expert
  - formal-methods
  - proof
  - smt
  - verification
  - z3
  - correctness
  - safety-critical

languages:
  recommended:
    - Python
    - Rust
  also_possible:
    - C++
    - Java

resources:
  - name: "Z3 Tutorial"
    url: https://microsoft.github.io/z3tutorial/
    type: tutorial
  - name: "Program Proofs (Book)"
    url: https://mitpress.mit.edu/9780262046434/program-proofs/
    type: book
  - name: "TLA+ Specification Language"
    url: https://lamport.azurewebsites.net/tla/tla.html
    type: documentation
  - name: "Dafny Verification Language"
    url: https://dafny.org/
    type: reference

prerequisites:
  - type: skill
    name: Discrete mathematics (logic, sets, proofs)
  - type: skill
    name: Programming proficiency
  - type: skill
    name: Understanding of algorithms
  - type: skill
    name: Basic knowledge of first-order logic

milestones:
  - id: fvl-m1
    name: SMT Solver Basics
    description: >
      Learn to use an SMT solver (Z3) to solve logical formulas and
      prove simple properties.
    acceptance_criteria:
      - Z3 or CVC5 installed and working
      - Solve boolean satisfiability problems
      - Solve linear integer arithmetic
      - Solve array theory problems
      - Understand sat/unsat/unknown results
      - Extract models (satisfying assignments)
      - Understand basic solver options
    pitfalls:
      - Solver timeouts on complex formulas
      - Unknown result doesn't mean true or false
      - Model extraction only works for sat
      - Some theories don't combine well
      - Quantifier reasoning is limited
    concepts:
      - SMT solving
      - satisfiability
      - Theories
      - Models
    skills:
      - Z3/CVC5 usage
      - Formula encoding
      - Result interpretation
      - Option tuning
    deliverables:
      - Solver setup
      - Example problems
      - Model extractor
      - Documentation
    estimated_hours: "10-12"

  - id: fvl-m2
    name: Program Encoding
    description: >
      Encode imperative programs as logical formulas for verification.
    acceptance_criteria:
      - Encode basic operations (assignment, arithmetic)
      - Encode control flow (if-then-else, loops)
      - Represent program state symbolically
      - Handle arrays and memory
      - Generate verification conditions
      - Prove absence of runtime errors (overflow, div-by-zero)
    pitfalls:
      - Loop invariants are hard to discover
      - Array theory doesn't scale well
      - Integer overflow modeling tricky
      - Symbolic execution path explosion
      - Aliasing complicates reasoning
    concepts:
      - Program encoding
      - Symbolic execution
      - Verification conditions
      - State representation
    skills:
      - Program translation
      - Formula generation
      - Invariant discovery
      - Error checking
    deliverables:
      - Program encoder
      - State representation
      - VC generator
      - Error checker
    estimated_hours: "14-16"

  - id: fvl-m3
    name: Algorithm Verification
    description: >
      Verify correctness of classic algorithms using formal methods.
    acceptance_criteria:
      - Verify sorting algorithm (insertion, selection)
      - Verify binary search correctness
      - Verify linked list operations
      - Specify pre/post conditions
      - Prove loop invariants
      - Generate counterexamples for bugs
    pitfalls:
      - Specifying correct properties is hard
      - Loop invariants must be strong enough
      - Termination proofs separate from correctness
      - Data structure invariants complex
      - Bugs in specification look like proof failures
    concepts:
      - Pre/post conditions
      - Loop invariants
      - Algorithm correctness
      - Specification
    skills:
      - Specification writing
      - Invariant discovery
      - Proof guidance
      - Bug finding
    deliverables:
      - Sorting verification
      - Search verification
      - List verification
      - Specification library
    estimated_hours: "14-16"

  - id: fvl-m4
    name: Concurrent Protocol Verification
    description: >
      Verify correctness of concurrent algorithms and protocols.
    acceptance_criteria:
      - Model concurrent execution
      - Verify mutual exclusion (lock correctness)
      - Verify consensus protocol (simplified Raft or Paxos)
      - Check for deadlocks
      - Check for liveness properties
      - Find bugs via counterexamples
    pitfalls:
      - State explosion with many processes
      - Liveness properties harder than safety
      - Fairness assumptions matter
      - Modeling message passing vs shared memory
      - Timeout/expiry modeling
    concepts:
      - Concurrent models
      - Safety vs liveness
      - Mutual exclusion
      - Consensus
    skills:
      - Concurrent modeling
      - Property specification
      - State exploration
      - Bug finding
    deliverables:
      - Lock verification
      - Consensus verification
      - Deadlock checker
      - Liveness checker
    estimated_hours: "14-16"

  - id: fvl-m5
    name: Integration & Production Use
    description: >
      Build a practical verification tool for a specific domain and
      integrate into development workflow.
    acceptance_criteria:
      - Domain-specific verification tool
      - Input format (code or specification)
      - Automated proof or counterexample
      - Clear error messages for failures
      - Integration with CI (optional)
      - Documentation for users
      - Case study demonstrating value
    pitfalls:
      - Tool usability often overlooked
      - False positives waste developer time
      - Scalability limits practical use
      - Maintenance burden for tool
      - Developer resistance to new tools
    concepts:
      - Tool design
      - Usability
      - Integration
      - Adoption
    skills:
      - Tool building
      - User interface
      - Documentation
      - Demonstration
    deliverables:
      - Verification tool
      - Input format
      - Error reporting
      - Documentation
      - Case study
    estimated_hours: "12-14"
