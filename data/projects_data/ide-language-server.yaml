id: ide-language-server
name: IDE Language Server
description: >
  Build a Language Server Protocol (LSP) implementation with advanced features
  like go-to-definition, find-references, refactoring, and inlay hints.
  Create a production-quality developer tool from scratch.

difficulty: advanced
estimated_hours: 50-70
domain: software-engineering

essence: >
  Language intelligence through AST-based analysis, incremental parsing for
  responsiveness, semantic analysis for type information, and LSP protocol
  implementation for IDE integration - the same technology behind rust-analyzer
  and pylsp.

why_important: >
  Developer tools are critical infrastructure. Understanding language servers
  is valuable for platform engineers at Microsoft, JetBrains, and language
  companies at $180K-350K+.

learning_outcomes:
  - Implement LSP protocol (JSON-RPC) server
  - Build incremental parser for responsive analysis
  - Implement semantic analysis with symbol resolution
  - Build go-to-definition and find-references
  - Implement rename refactoring
  - Build diagnostics with error recovery
  - Implement code completion with context awareness
  - Add inlay hints for type information

skills:
  - Language Server Protocol
  - Incremental Parsing
  - Semantic Analysis
  - Symbol Resolution
  - Refactoring
  - Code Completion
  - Diagnostics
  - JSON-RPC

tags:
  - advanced
  - language-server
  - lsp
  - ide
  - developer-tools
  - parsing

languages:
  recommended:
    - Rust
    - TypeScript
  also_possible:
    - Go
    - Python

resources:
  - name: "LSP Specification"
    url: https://microsoft.github.io/language-server-protocol/
    type: documentation
  - name: "rust-analyzer Architecture"
    url: https://github.com/rust-analyzer/rust-analyzer/blob/master/docs/dev/architecture.md
    type: documentation
  - name: "Writing a Language Server"
    url: https://tomassetti.me/writing-a-language-server/
    type: tutorial
  - name: "Tower-lsp (Rust)"
    url: https://github.com/ebkalderon/tower-lsp
    type: code

prerequisites:
  - type: project
    name: lisp-interp or build-interpreter
  - type: skill
    name: Parser implementation experience
  - type: skill
    name: Understanding of type systems
  - type: skill
    name: Async programming

milestones:
  - id: lsp-m1
    name: LSP Protocol & Server Setup
    description: >
      Implement the LSP protocol with JSON-RPC transport and
      basic initialization handshake.
    acceptance_criteria:
      - JSON-RPC message parsing (request, response, notification)
      - LSP initialize handshake returns server capabilities
      - Text document synchronization (didOpen, didChange, didClose)
      - Basic logging for debugging
      - Server runs as stdio process (LSP standard)
      - Test client connects successfully
    pitfalls:
      - Content-length header parsing errors
      - Not handling concurrent requests
      - Missing capabilities in initialize response
      - Blocking main thread during initialization
    concepts:
      - JSON-RPC
      - LSP handshake
      - Document sync
      - Server lifecycle
    skills:
      - Protocol implementation
      - Message handling
      - Async server
      - Capability declaration
    deliverables:
      - JSON-RPC layer
      - LSP initialization
      - Document sync
      - Logging
    estimated_hours: "10-14"

  - id: lsp-m2
    name: Incremental Parsing & AST
    description: >
      Build incremental parser that reuses work when
      small changes are made.
    acceptance_criteria:
      - Parser produces AST from source code
      - Incremental parsing reuses unchanged nodes
      - Parse errors don't prevent partial AST
      - Parsing completes in < 50ms for typical files
      - Line/column positions tracked for error reporting
      - AST supports traversal for analysis
    pitfalls:
      - Full reparse on every change is too slow
      - Parse errors corrupt entire AST
      - Position tracking off-by-one errors
      - Not handling unicode correctly
    concepts:
      - Incremental parsing
      - Error recovery
      - Position tracking
      - AST design
    skills:
      - Incremental parser
      - Error handling
      - Performance optimization
      - AST structure
    deliverables:
      - Incremental parser
      - Error recovery
      - Position mapping
      - AST visitor
    estimated_hours: "14-18"

  - id: lsp-m3
    name: Diagnostics & Semantic Analysis
    description: >
      Implement semantic analysis with symbol resolution and
      diagnostic reporting.
    acceptance_criteria:
      - Symbol table tracks definitions and references
      - Scope handling for nested blocks
      - Type errors reported as LSP diagnostics
      - Diagnostics update as user types
      - Quick fixes for common errors
      - Error codes and documentation links
    pitfalls:
      - Diagnostics too slow for typing
      - False positives from incomplete code
      - Not clearing old diagnostics
      - Symbol resolution across files
    concepts:
      - Semantic analysis
      - Symbol tables
      - Diagnostics
      - Quick fixes
    skills:
      - Symbol resolution
      - Type checking
      - Diagnostic formatting
      - Quick fix implementation
    deliverables:
      - Symbol table
      - Type checker
      - Diagnostic publisher
      - Quick fixes
    estimated_hours: "12-16"

  - id: lsp-m4
    name: Navigation Features
    description: >
      Implement go-to-definition, find-references, and
      hover information.
    acceptance_criteria:
      - Go-to-definition jumps to symbol definition
      - Find-references lists all uses of symbol
      - Hover shows type and documentation
      - Works across files in project
      - Handles re-exports and imports
      - Performance: < 100ms for typical queries
    pitfalls:
      - Not handling re-exports correctly
      - Slow for large codebases
      - Incomplete reference finding
      - Hover timeout on slow queries
    concepts:
      - Symbol navigation
      - Reference indexing
      - Documentation extraction
      - Cross-file analysis
    skills:
      - Definition lookup
      - Reference indexing
      - Hover formatting
      - Performance tuning
    deliverables:
      - Go-to-definition
      - Find-references
      - Hover provider
      - Cross-file support
    estimated_hours: "10-14"

  - id: lsp-m5
    name: Refactoring & Completion
    description: >
      Implement rename refactoring and intelligent code
      completion.
    acceptance_criteria:
      - Rename updates all references to symbol
      - Preview shows changes before applying
      - Code completion suggests valid symbols
      - Completion includes type information
      - Snippet completion for common patterns
      - Completion context-aware (expression, type, etc.)
    pitfalls:
      - Rename breaking imports/exports
      - Completion too slow
      - Not handling overloaded symbols
      - Incomplete rename in generated code
    concepts:
      - Rename refactoring
      - Code completion
      - Workspace editing
      - Context awareness
    skills:
      - Refactoring engine
      - Completion provider
      - Workspace edit
      - Snippet support
    deliverables:
      - Rename refactoring
      - Code completion
      - Snippet support
      - Workspace edit
    estimated_hours: "10-14"
