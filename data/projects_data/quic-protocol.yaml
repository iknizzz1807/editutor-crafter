id: quic-protocol
name: QUIC Protocol Implementation
description: >
  Build a QUIC protocol implementation from scratch, understanding the future
  of web transport. Implement connection establishment, stream multiplexing,
  congestion control, and 0-RTT connection resumption.

difficulty: advanced
estimated_hours: 60-80
domain: specialized

essence: >
  UDP-based reliable transport with TLS 1.3 integrated encryption, stream multiplexing
  without head-of-line blocking, pluggable congestion control, connection migration
  for mobile networks, and 0-RTT resumption for instant reconnection.

why_important: >
  QUIC is the foundation of HTTP/3 and the future of web transport. Understanding
  modern transport protocols is valuable for network engineers at $180K-320K+.

learning_outcomes:
  - Implement QUIC packet parsing and framing
  - Build TLS 1.3 integrated encryption
  - Implement stream multiplexing and flow control
  - Build congestion control (Cubic, BBR)
  - Implement connection migration
  - Build 0-RTT connection resumption
  - Handle packet loss and retransmission
  - Implement path MTU discovery

skills:
  - QUIC Protocol
  - TLS 1.3 Integration
  - Stream Multiplexing
  - Congestion Control
  - Connection Migration
  - 0-RTT Resumption
  - Flow Control
  - UDP Transport

tags:
  - advanced
  - quic
  - http3
  - networking
  - protocol
  - transport

languages:
  recommended:
    - Rust
    - Go
  also_possible:
    - C++

resources:
  - name: "QUIC RFC 9000"
    url: https://www.rfc-editor.org/rfc/rfc9000
    type: specification
  - name: "HTTP/3 RFC 9114"
    url: https://www.rfc-editor.org/rfc/rfc9114
    type: specification
  - name: "quiche (Cloudflare)"
    url: https://github.com/cloudflare/quiche
    type: code
  - name: "Quinn (Rust)"
    url: https://github.com/quinn-rs/quinn
    type: code

prerequisites:
  - type: project
    name: build-tcp-stack or equivalent network experience
  - type: skill
    name: Understanding of TCP/IP and UDP
  - type: skill
    name: TLS/SSL basics
  - type: skill
    name: Rust or Go proficiency

milestones:
  - id: quic-m1
    name: Packet Format & Framing
    description: >
      Implement QUIC packet parsing and framing including
      long/short headers and frame types.
    acceptance_criteria:
      - Long header parsing (Initial, Handshake, 0-RTT)
      - Short header parsing (1-RTT)
      - Frame types: STREAM, ACK, PADDING, PING, CRYPTO
      - Variable-length integer encoding (QUIC varint)
      - Packet number decoding with expected range
      - Connection ID handling
    pitfalls:
      - Varint encoding is tricky
      - Packet number wraparound
      - Connection ID length validation
      - Frame parsing errors
    concepts:
      - QUIC packets
      - Frame types
      - Varint encoding
      - Connection IDs
    skills:
      - Packet parsing
      - Frame handling
      - Varint implementation
      - Validation
    deliverables:
      - Packet parser
      - Frame parser
      - Varint codec
      - Connection ID handling
    estimated_hours: "12-16"

  - id: quic-m2
    name: TLS 1.3 Integration & Handshake
    description: >
      Implement TLS 1.3 integrated handshake for QUIC
      connection establishment.
    acceptance_criteria:
      - Initial packet with TLS ClientHello
      - Handshake packet with TLS ServerHello
      - CRYPTO frames carry TLS handshake data
      - TLS 1.3 key derivation for packet protection
      - Handshake completion triggers 1-RTT
      - Integration with TLS library (rustls, boringssl)
    pitfalls:
      - Key derivation order matters
      - Packet protection keys change during handshake
      - TLS record layer not used in QUIC
      - Retry packet for address validation
    concepts:
      - TLS 1.3 handshake
      - CRYPTO frames
      - Key derivation
      - Packet protection
    skills:
      - TLS integration
      - Handshake implementation
      - Key management
      - State machine
    deliverables:
      - Handshake implementation
      - CRYPTO frame handling
      - Key derivation
      - State machine
    estimated_hours: "14-18"

  - id: quic-m3
    name: Stream Multiplexing & Flow Control
    description: >
      Implement stream multiplexing with flow control
      for multiple concurrent streams.
    acceptance_criteria:
      - Stream creation (client-initiated, server-initiated)
      - Bidirectional and unidirectional streams
      - Per-stream flow control (sliding window)
      - Connection-level flow control
      - Stream states (idle, open, closed)
      - Data delivery in order within stream
    pitfalls:
      - Flow control window calculation
      - Stream ID numbering rules
      - Blocked frame handling
      - Stream reset and stop sending
    concepts:
      - Stream multiplexing
      - Flow control
      - Sliding window
      - Stream states
    skills:
      - Stream management
      - Flow control
      - State handling
      - Data ordering
    deliverables:
      - Stream manager
      - Flow controller
      - State machine
      - Data delivery
    estimated_hours: "12-16"

  - id: quic-m4
    name: Loss Recovery & Congestion Control
    description: >
      Implement packet loss detection, retransmission, and
      congestion control.
    acceptance_criteria:
      - ACK frame processing for delivery confirmation
      - Packet loss detection (time-based, ACK-based)
      - Probe timeout (PTO) for loss detection
      - Congestion control: Cubic or BBR
      - ECN support (optional)
      - Pacing for smooth transmission
    pitfalls:
      - Spurious retransmissions from aggressive timeout
      - Congestion collapse from improper control
      - RTT estimation errors
      - PTO calculation complexity
    concepts:
      - Loss detection
      - Retransmission
      - Congestion control
      - Pacing
    skills:
      - Loss recovery
      - RTT estimation
      - Congestion algorithm
      - Pacing implementation
    deliverables:
      - ACK processor
      - Loss detector
      - Congestion controller
      - Pacer
    estimated_hours: "12-16"

  - id: quic-m5
    name: Connection Migration & 0-RTT
    description: >
      Implement connection migration for network changes
      and 0-RTT connection resumption.
    acceptance_criteria:
      - Connection migration when IP changes
      - Path validation before switching
      - 0-RTT data sent immediately on reconnect
      - Session ticket for resumption
      - Replay attack mitigation
      - Preferred address from server
    pitfalls:
      - Migration during handshake
      - 0-RTT data may be replayed
      - Path validation timeout
      - NAT rebinding vs migration
    concepts:
      - Connection migration
      - Path validation
      - 0-RTT resumption
      - Session tickets
    skills:
      - Migration handling
      - Path validation
      - 0-RTT implementation
      - Replay protection
    deliverables:
      - Migration handler
      - Path validator
      - 0-RTT support
      - Session management
    estimated_hours: "10-14"
