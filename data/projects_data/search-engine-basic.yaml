id: search-engine-basic
name: Search Engine (Basic)
description: >
  Build a document search engine with inverted index, TF-IDF ranking,
  and boolean query parsing. Foundation for understanding web-scale search.

difficulty: intermediate
estimated_hours: 25-35
domain: data-storage

essence: >
  Inverted index construction for efficient text lookup, TF-IDF and BM25
  scoring for relevance ranking, boolean query parsing (AND/OR/NOT), and
  text preprocessing (tokenization, stopword removal, stemming).

why_important: >
  Search is fundamental to almost every application. Understanding how
  inverted indices work and how relevance is calculated provides the
  foundation for understanding Elasticsearch, Solr, and web-scale search
  systems used at every major tech company.

learning_outcomes:
  - Build inverted index from document corpus
  - Implement TF-IDF and BM25 scoring algorithms
  - Parse boolean queries (AND, OR, NOT)
  - Implement text preprocessing pipeline
  - Build snippet generation for search results
  - Handle incremental index updates
  - Measure search quality with precision/recall

skills:
  - Inverted Index
  - TF-IDF/BM25 Scoring
  - Query Parsing
  - Text Preprocessing
  - Relevance Ranking
  - Snippet Generation
  - Index Updates
  - Search Quality Metrics

tags:
  - intermediate
  - information-retrieval
  - inverted-index
  - search
  - tfidf
  - text-processing

languages:
  recommended:
    - Python
    - Go
    - Rust
  also_possible:
    - Java
    - C++

resources:
  - name: "Introduction to Information Retrieval"
    url: https://nlp.stanford.edu/IR-book/
    type: book
  - name: "Lucene Documentation"
    url: https://lucene.apache.org/core/documentation.html
    type: documentation
  - name: "BM25 Explained"
    url: https://www.elastic.co/blog/practical-bm25-part-2-the-bm25-algorithm-and-its-variables
    type: article
  - name: "Inverted Index Wikipedia"
    url: https://en.wikipedia.org/wiki/Inverted_index
    type: article

prerequisites:
  - type: skill
    name: Basic data structures (maps, lists, sets)
  - type: skill
    name: String manipulation and regular expressions
  - type: skill
    name: Basic file I/O

milestones:
  - id: search-basic-m1
    name: Text Preprocessing & Tokenization
    description: >
      Build a text preprocessing pipeline with tokenization,
      normalization, stopword removal, and stemming.
    acceptance_criteria:
      - Tokenizer splits text into words handling punctuation
      - Case normalization (lowercase all tokens)
      - Configurable stopword list removal
      - Porter stemmer for English stemming
      - N-gram tokenization option (bigrams, trigrams)
      - Handles Unicode text correctly
      - Token position tracking for phrase queries
    pitfalls:
      - Apostrophe handling (don't → don't or dont)
      - Unicode normalization (é vs e + combining accent)
      - Over-stemming creates false matches
      - Stopword list choice affects recall
      - Token position needed for phrase queries
    concepts:
      - Tokenization
      - Text normalization
      - Stopword removal
      - Stemming algorithms
    skills:
      - Text processing
      - Regular expressions
      - Unicode handling
      - N-gram generation
    deliverables:
      - Tokenizer with punctuation handling
      - Normalization pipeline
      - Stopword filter
      - Porter stemmer
      - N-gram tokenizer
    estimated_hours: "5-6"

  - id: search-basic-m2
    name: Inverted Index Construction
    description: >
      Build an inverted index data structure for efficient
      document lookup by term.
    acceptance_criteria:
      - Inverted index maps terms to list of (doc_id, positions)
      - Dictionary (term → postings list) stored efficiently
      - Postings list sorted by doc_id for efficient intersection
      - Position information stored for phrase queries
      - Document frequency (DF) tracked per term
      - Term frequency (TF) tracked per document
      - Index serialized to disk and loaded back
    pitfalls:
      - Memory usage grows with corpus; consider disk-based
      - Postings list compression (delta encoding, varint)
      - Dictionary can be large; consider prefix compression
      - Position storage multiplies index size
      - Case sensitivity in term lookup
    concepts:
      - Inverted index structure
      - Postings list
      - Dictionary
      - Document statistics
    skills:
      - Index data structure
      - Efficient storage
      - Serialization
      - Memory management
    deliverables:
      - Inverted index data structure
      - Index builder from corpus
      - Dictionary and postings storage
      - DF and TF statistics
      - Disk serialization
    estimated_hours: "6-8"

  - id: search-basic-m3
    name: Boolean Query Parsing & Execution
    description: >
      Implement boolean query parser supporting AND, OR, NOT
      operations and efficient query execution.
    acceptance_criteria:
      - Query parser handles: term, AND, OR, NOT, parentheses
      - Query AST (abstract syntax tree) representation
      - AND query: intersect postings lists
      - OR query: union postings lists
      - NOT query: complement against all docs
      - Phrase query using position information
      - Query execution returns sorted doc_ids
    pitfalls:
      - Operator precedence (NOT binds tightest)
      - Parentheses parsing and evaluation order
      - NOT on empty set returns all documents
      - Phrase query requires position index
      - Query optimization: process smallest list first
    concepts:
      - Boolean query model
      - Query parsing
      - Set operations on postings
      - Query optimization
    skills:
      - Parser implementation
      - Set algorithms
      - Query planning
      - Phrase matching
    deliverables:
      - Boolean query parser
      - Query AST representation
      - AND/OR/NOT execution
      - Phrase query support
      - Query optimizer
    estimated_hours: "6-8"

  - id: search-basic-m4
    name: TF-IDF & BM25 Scoring
    description: >
      Implement relevance scoring using TF-IDF and BM25 algorithms
      for ranking search results.
    acceptance_criteria:
      - TF-IDF score: tf * idf where idf = log(N/df)
      - Variants: raw TF, log-normalized TF, augmented TF
      - BM25 scoring with configurable k1 and b parameters
      - Document length normalization in BM25
      - Scores computed for all matching documents
      - Results sorted by descending score
      - Score explanation (which terms contributed)
    pitfalls:
      - TF-IDF favors long documents without normalization
      - BM25 parameters need tuning for corpus
      - Score values not comparable across queries
      - IDP (inverse document frequency) undefined for rare terms
      - Floating point precision in score aggregation
    concepts:
      - Term frequency weighting
      - Inverse document frequency
      - Document length normalization
      - BM25 formula
    skills:
      - Scoring algorithms
      - Statistical weighting
      - Parameter tuning
      - Score debugging
    deliverables:
      - TF-IDF scorer
      - BM25 scorer
      - Document length stats
      - Score explanation
      - Ranked results
    estimated_hours: "5-6"

  - id: search-basic-m5
    name: Snippet Generation & Search API
    description: >
      Build result snippet generation and a complete search API
      with pagination and query logging.
    acceptance_criteria:
      - Snippet generation shows query terms in context
      - Snippet highlights matching terms
      - Configurable snippet length (characters/words)
      - Best snippet selected when multiple matches
      - Search API: query, offset, limit parameters
      - Pagination support with total hit count
      - Query logging for analytics
      - Search quality evaluation with test queries
    pitfalls:
      - Snippet truncation mid-word
      - Context window too small to understand
      - HTML escaping in highlighted snippets
      - Total hit count expensive for large result sets
      - Query logging affects performance
    concepts:
      - Snippet extraction
      - Term highlighting
      - Pagination
      - Search analytics
    skills:
      - Text extraction
      - Highlighting
      - API design
      - Quality evaluation
    deliverables:
      - Snippet generator
      - Term highlighter
      - Search API with pagination
      - Query logger
      - Quality evaluation script
    estimated_hours: "4-5"
