id: spatial-audio-engine
name: Spatial Audio Engine
description: >
  Build a spatial audio engine for AR/VR applications with HRTF (Head-Related
  Transfer Function) processing, room acoustics simulation, and real-time
  binaural rendering.

difficulty: advanced
estimated_hours: 50-70
domain: game-dev

essence: >
  3D audio perception through HRTF filtering that simulates how ears perceive
  direction, distance-based attenuation and occlusion, room modeling with
  reflections and reverb, and real-time processing for interactive applications.

why_important: >
  Spatial audio is critical for immersive AR/VR experiences at Apple, Meta,
  and game studios. Understanding audio DSP and spatialization is valuable
  for audio engineers at $150K-300K+.

learning_outcomes:
  - Implement HRTF-based binaural rendering
  - Build distance attenuation and air absorption
  - Implement occlusion and obstruction effects
  - Build room acoustics with reflections and reverb
  - Handle head tracking for real-time updates
  - Implement audio source prioritization
  - Build real-time audio processing pipeline
  - Optimize for low-latency streaming

skills:
  - HRTF Processing
  - Binaural Rendering
  - Room Acoustics
  - Audio DSP
  - Occlusion Modeling
  - Real-Time Processing
  - Head Tracking
  - Audio Optimization

tags:
  - advanced
  - spatial-audio
  - hrtf
  - binaural
  - vr
  - ar
  - audio-engine

languages:
  recommended:
    - C++
    - Rust
  also_possible:
    - C

resources:
  - name: "HRTF Documentation - MIT Media Lab"
    url: https://sound.media.mit.edu/resources/KEMAR.html
    type: documentation
  - name: "Real-Time 3D Audio"
    url: https://www.gdcvault.com/play/1024015/Real-Time-3D-Audio
    type: video
  - name: "Oculus Audio SDK Guide"
    url: https://developer.oculus.com/documentation/unity/audio-spatializer-intro/
    type: documentation
  - name: "Steam Audio Documentation"
    url: https://valvesoftware.github.io/steam-audio/
    type: documentation

prerequisites:
  - type: skill
    name: Digital signal processing basics
  - type: skill
    name: Understanding of acoustics
  - type: skill
    name: Real-time programming experience
  - type: skill
    name: Linear algebra for 3D math

milestones:
  - id: spatial-audio-m1
    name: 3D Audio Fundamentals
    description: >
      Implement basic 3D audio with distance attenuation,
      panning, and Doppler effect.
    acceptance_criteria:
      - Distance attenuation follows inverse square law (configurable)
      - Stereo panning based on horizontal angle
      - Doppler pitch shift based on relative velocity
      - Listener and source positions tracked in 3D space
      - Multiple simultaneous sources handled
      - Basic volume limiting prevents clipping
    pitfalls:
      - Inverse square law too extreme near source
      - Doppler artifacts with rapid position changes
      - Clipping from accumulated sources
      - Coordinate system inconsistencies
    concepts:
      - Distance attenuation
      - Spatial panning
      - Doppler effect
      - Multi-source mixing
    skills:
      - Attenuation curves
      - Stereo panning
      - Doppler implementation
      - Gain staging
    deliverables:
      - Distance attenuator
      - Stereo panner
      - Doppler processor
      - Multi-source mixer
    estimated_hours: "10-14"

  - id: spatial-audio-m2
    name: HRTF Binaural Rendering
    description: >
      Implement HRTF-based binaural rendering for accurate
      3D audio perception over headphones.
    acceptance_criteria:
      - HRTF dataset loaded (KEMAR or similar)
      - HRTF selection based on source elevation and azimuth
      - Interpolation between nearby HRTF measurements
      - Convolution applies HRTF to mono source
      - ITD (interaural time difference) modeled
      - Perception of elevation and front/back direction
    pitfalls:
      - HRTF variation between individuals
      - Convolution latency for real-time
      - Discontinuities in HRTF interpolation
      - Missing elevation perception without good HRTF
    concepts:
      - HRTF dataset
      - Binaural rendering
      - ITD/ILD modeling
      - Convolution
    skills:
      - HRTF loading
      - Interpolation
      - Fast convolution
      - Binaural synthesis
    deliverables:
      - HRTF loader
      - Binaural renderer
      - HRTF interpolation
      - Fast convolution
    estimated_hours: "14-18"

  - id: spatial-audio-m3
    name: Room Acoustics & Reverb
    description: >
      Implement room acoustics simulation with early reflections
      and late reverberation.
    acceptance_criteria:
      - Ray casting for early reflection paths
      - Reflection delay based on path length
      - Surface material affects reflection absorption
      - Late reverb via feedback delay network (FDN)
      - Reverb parameters: RT60, pre-delay, diffusion
      - Real-time reverb for dynamic rooms
    pitfalls:
      - Ray casting expensive for many sources
      - Reverb parameters interact non-linearly
      - Temporal artifacts with room changes
      - CPU cost of FDN reverb
    concepts:
      - Early reflections
      - Ray acoustics
      - FDN reverb
      - Room parameters
    skills:
      - Reflection modeling
      - Reverb synthesis
      - FDN implementation
      - Parameter tuning
    deliverables:
      - Reflection calculator
      - FDN reverb
      - Room model
      - Parameter controls
    estimated_hours: "14-18"

  - id: spatial-audio-m4
    name: Occlusion & Obstruction
    description: >
      Implement sound occlusion when sources are blocked
      by geometry.
    acceptance_criteria:
      - Ray casting detects occlusion
      - Occlusion attenuates and filters sound
      - Low-pass filter simulates transmission through materials
      - Obstruction (direct path blocked) vs occlusion (all paths)
      - Multiple occluders accumulate effect
      - Portal/door handling for partial occlusion
    pitfalls:
      - Binary occlusion sounds unnatural
      - Expensive ray casting at audio rates
      - Not handling diffuse transmission
      - Temporal artifacts from occlusion changes
    concepts:
      - Sound occlusion
      - Material filtering
      - Ray-based detection
      - Transmission modeling
    skills:
      - Occlusion detection
      - Filter design
      - Geometry queries
      - Smooth transitions
    deliverables:
      - Occlusion ray caster
      - Material filter
      - Occlusion mixer
      - Portal handling
    estimated_hours: "10-14"

  - id: spatial-audio-m5
    name: Head Tracking & Real-Time Pipeline
    description: >
      Integrate head tracking for dynamic HRTF and build
      low-latency audio pipeline.
    acceptance_criteria:
      - Head tracking updates listener orientation
      - HRTF smoothly interpolates with head rotation
      - Audio latency < 20ms from head movement to sound
      - Buffer size configuration for latency/quality tradeoff
      - SIMD optimization for real-time processing
      - Profiling shows headroom for additional sources
    pitfalls:
      - HRTF switching artifacts with rapid rotation
      - Buffer underruns cause audio glitches
      - Not accounting for tracking latency
      - CPU spikes from simultaneous processing
    concepts:
      - Head tracking
      - Dynamic HRTF
      - Low-latency audio
      - Real-time optimization
    skills:
      - Tracking integration
      - Smooth interpolation
      - Latency optimization
      - SIMD processing
    deliverables:
      - Head tracking integration
      - Dynamic HRTF
      - Low-latency pipeline
      - Performance optimization
    estimated_hours: "10-14"
